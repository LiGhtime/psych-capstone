function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,n=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{CKRj:function(e,t,s){"use strict";s.r(t),s.d(t,"TrainingPageModule",(function(){return Ds}));var n=s("c7TG"),i=s("tyNb"),c=s("ofXK"),r=s("3Pt+"),a=s("mrSG"),o=s("PqYM"),l=s("l5mm"),f=s("fXoL"),h=["slideElement"];function d(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",10),f.fc("click",(function(){return f.sc(s),f.hc().toggleOverview()})),f.Wb()}}var u=function(e){return{hidden:e}};function b(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",11),f.fc("click",(function(){return f.sc(s),f.hc().closeModal()})),f.Wb()}if(2&e){var n=f.hc();f.kc("ngClass",f.nc(1,u,n.hideQuit))}}function g(e,t){if(1&e&&(f.Xb(0,"ion-slide",12),f.Vb(1,"img",13),f.Xb(2,"div",14),f.wc(3),f.Wb(),f.Wb()),2&e){var s=t.$implicit;f.Kb(1),f.kc("src",s[0],f.tc),f.Kb(2),f.xc(s[1])}}function v(e,t){1&e&&f.Vb(0,"ion-icon",18)}function m(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",19),f.fc("click",(function(){f.sc(s);var e=f.hc().index;return f.hc(),f.rc(9).slideTo(e)})),f.Wb()}}function p(e,t){if(1&e&&(f.Xb(0,"span",15),f.vc(1,v,1,0,"ion-icon",16),f.vc(2,m,1,0,"ion-icon",17),f.Wb()),2&e){var s=t.index,n=f.hc();f.Kb(1),f.kc("ngIf",n.currentSlide==s),f.Kb(1),f.kc("ngIf",n.currentSlide!=s)}}var k,S={Start:[["assets/help-slides/start/0.png","Welcome to your CRD training. Please take a minute to review these slides and familiarize yourself with the training process."],["assets/help-slides/start/1.png","There are 8 levels to complete. You should complete one level per day, in about 10-15 minutes."],["assets/help-slides/start/2.png","In the learning task you will learn the day's names and faces, then you will use those faces to complete the challenges in the four training tasks."],["assets/help-slides/start/3.png","After passing the training tasks, you will complete two assessment tasks. Your level will increase after you finish."],["assets/help-slides/start/4.png","Before Level 1 and after Level 8 you will complete an additional assessment to estimate your overall progress."],["assets/help-slides/start/5.png","If you have questions about how to complete a task or what to do next, you can click the help icon in the upper-right corner."],["assets/help-slides/start/6.png","Your data will be used to further research of CRD and facial recognition. For more information about the research visit the About Us page."],["assets/help-slides/start/7.png","Should you need to review this information again, simply click the help icon in the upper right-hand corner of any help page."]],Overview:[["assets/help-slides/start/0.png","These slides will provide an overview of the training process."],["assets/help-slides/start/1.png","There are 8 levels to complete. You should complete one level per day, in about 10-15 minutes."],["assets/help-slides/start/2.png","In the learning task you will learn the day's names and faces, then you will use those faces to complete the challenges in the four training tasks."],["assets/help-slides/start/3.png","After passing the training tasks, you will complete two assessment tasks. Your level will increase after you finish."],["assets/help-slides/start/4.png","Before Level 1 and after Level 8 you will complete an additional assessment to estimate your overall progress."],["assets/help-slides/start/5.png","If you have questions about how to complete a task or what to do next, you can click the help icon in the upper-right corner."],["assets/help-slides/start/6.png","Your data will be used to further research of CRD and facial recognition. For more information about the research visit the About Us page."]],"Meet Today's Faces":[["assets/help-slides/learning/0.png","Memorize the eight name-face pairs you are shown; they will be the basis of your daily training."],["assets/help-slides/learning/1.png","You can come back to this module at any time after finishing."]],"Name and Face":[["assets/help-slides/name-face/0.png","For each of the names you've seen before, you'll be asked to match the appropriate face."],["assets/help-slides/name-face/1.png","You'll get a point for each face you match correctly."],["assets/help-slides/name-face/2.png","Whenever you guess incorrectly, you'll be shown the correct answer as well as the two names."]],"Who's New?":[["assets/help-slides/whos-new/0.png","Select the face that you haven't yet seen today, and that wasn't part of the learning task."],["assets/help-slides/whos-new/1.png","You'll get a point for each face you guess correctly."],["assets/help-slides/whos-new/2.png","Whenever you guess incorrectly, you'll be shown the correct answer."]],"Memory Match":[["assets/help-slides/memory-match/0.png","Tap to show the faces and begin the timer."],["assets/help-slides/memory-match/1.png","You will have 10 seconds to memorize the placement of as many face pairs as you can."],["assets/help-slides/memory-match/2.png","After the timer is up, click the cards to match the pairs. When you correctly match a pair, they will be revealed."],["assets/help-slides/memory-match/3.png","Correct matches award 4 points, while incorrect matches deduct 1 point."]],Shuffle:[["assets/help-slides/shuffle/0.png","Tap to show the faces and begin the timer."],["assets/help-slides/shuffle/1.png","You will have 10 seconds to memorize the placement of the faces."],["assets/help-slides/shuffle/2.png","After the timer is up, click cards to swap their positions. Tap 'Done' when you think the positions are correct."],["assets/help-slides/shuffle/3.png","For an incorrect solution, incorrect cards will be colored red. You will be awarded a point for each correct card."],["assets/help-slides/shuffle/4.png","You can toggle between your solution and the correct solution with the toggle at the bottom."]],"Forced Choice":[["assets/help-slides/forced-choice/0.png","Tap to show the face and begin the timer."],["assets/help-slides/forced-choice/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/forced-choice/2.png","After the timer is up select the face that you saw."],["assets/help-slides/forced-choice/3.png","You will receive a point for each correct answer."]],"Same-Different":[["assets/help-slides/same-different/0.png","Tap to show the face and begin the timer."],["assets/help-slides/same-different/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/same-different/2.png","After the timer is up, decide whether the face is the same."],["assets/help-slides/same-different/3.png","You will receive a point for each correct answer."]],"Training Tasks":[["assets/help-slides/training/0.png","Welcome to the training tasks. You can revisit the learning task however often you need with the bottom left-hand button."],["assets/help-slides/training/1.png","When you complete a task, you can see your highest score. You must get at least 75% to pass each task, and can do them any number of times."],["assets/help-slides/training/2.png","After passing every task, you can progress to the daily assessment tasks with the bottom right-hand button. You will not be able to come back today after moving on."]],"Assessment Tasks":[["assets/help-slides/assessment/0.png","The daily assessment tasks track your learning progress. You cannot redo them."]],Finish:[["assets/help-slides/finish/0.png","You are done for the day, come back tomorrow for your next training. You can see your training history on the history page."]],"Pre-Assessment":[["assets/help-slides/pre-post/0.png","Welcome to your pre-assessment. This is a one-time test; it will provide a baseline for your current CRD."],["assets/help-slides/same-different/0.png","Tap to show the face and begin the timer."],["assets/help-slides/same-different/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/same-different/2.png","After the timer is up, decide whether the face is the same."],["assets/help-slides/pre-post/1.png","This test consists of 30 questions, so set aside a few minutes to complete it."],["assets/help-slides/finish/0.png","When you have finished you can officially begin your training in Level 1."]],"Post-Assessment":[["assets/help-slides/pre-post/0.png","Welcome to your post-assessment. This is your final test; after this, your participation in this research will be complete."],["assets/help-slides/pre-post/1.png","This test consists of 30 questions, so set aside a few minutes to complete it."]]},O=((k=function(){function e(t,s){_classCallCheck(this,e),this.modalController=t,this.navParams=s}return _createClass(e,[{key:"ngOnInit",value:function(){this.task=this.navParams.data.paramTask,this.displayFirst=this.navParams.data.displayFirst,this.slides=S[this.task],this.currentSlide=0,this.showOverview=!1;for(var e=[],t=0;t<this.slides.length;t++)e.push(new Image),e[e.length-1].src=this.slides[t][0];this.hideQuit=!1,this.displayFirst&&this.slides.length>1&&(this.hideQuit=!0)}},{key:"closeModal",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.dismiss();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:this.currentSlide=e.sent,this.currentSlide==this.slides.length-1&&(this.hideQuit=!1);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"toggleOverview",value:function(){if(this.slideElement.slideTo(0),this.showOverview)this.showOverview=!1,this.ngOnInit();else{this.showOverview=!0,this.task="Overview",this.slides=S[this.task];for(var e=[],t=0;t<this.slides.length;t++)e.push(new Image),e[e.length-1].src=this.slides[t][0]}}}]),e}()).\u0275fac=function(e){return new(e||k)(f.Ub(n.I),f.Ub(n.J))},k.\u0275cmp=f.Ob({type:k,selectors:[["app-help-modal"]],viewQuery:function(e,t){var s;1&e&&f.Bc(h,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{firstDisplayed:"firstDisplayed"},decls:13,vars:8,consts:[[2,"--background","dodgerblue","--color","white",3,"swipedown"],["lines","none",2,"font-size","3vh","margin-top","5%","text-align","center","--background","dodgerblue","--color","white"],["slot","start","color","dark","name","arrow-back","style","height: 3vh",3,"click",4,"ngIf"],["slot","end","color","dark","name","help-circle",2,"height","3vh",3,"ngClass","click"],["slot","start","color","dark","name","close-circle","style","margin-right: 10px; height: 3vh",3,"ngClass","click",4,"ngIf"],[2,"height","80%",3,"ionSlideWillChange"],["slideElement",""],["style","height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: space-evenly; padding-left: 5%; padding-right: 5%",4,"ngFor","ngForOf"],[2,"text-align","center","font-size","3vh"],["style","margin: 0 auto",4,"ngFor","ngForOf"],["slot","start","color","dark","name","arrow-back",2,"height","3vh",3,"click"],["slot","start","color","dark","name","close-circle",2,"margin-right","10px","height","3vh",3,"ngClass","click"],[2,"height","100%","width","100%","display","flex","flex-direction","column","justify-content","space-evenly","padding-left","5%","padding-right","5%"],[3,"src"],[2,"display","flex","align-items","center","flex-shrink","2","margin-left","5%","margin-right","5%","font-size","5vw"],[2,"margin","0 auto"],["color","dark","name","radio-button-on",4,"ngIf"],["color","dark","name","radio-button-off",3,"click",4,"ngIf"],["color","dark","name","radio-button-on"],["color","dark","name","radio-button-off",3,"click"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.fc("swipedown",(function(){return t.closeModal()})),f.Xb(1,"ion-item",1),f.Xb(2,"ion-label"),f.Xb(3,"b"),f.wc(4),f.Wb(),f.Wb(),f.vc(5,d,1,0,"ion-icon",2),f.Xb(6,"ion-icon",3),f.fc("click",(function(){return t.toggleOverview()})),f.Wb(),f.vc(7,b,1,3,"ion-icon",4),f.Wb(),f.Xb(8,"ion-slides",5,6),f.fc("ionSlideWillChange",(function(){return t.changeSlide()})),f.vc(10,g,4,2,"ion-slide",7),f.Wb(),f.Xb(11,"div",8),f.vc(12,p,3,2,"span",9),f.Wb(),f.Wb()),2&e&&(f.Kb(4),f.xc(t.task),f.Kb(1),f.kc("ngIf",t.showOverview),f.Kb(1),f.kc("ngClass",f.nc(6,u,"Start"==t.task||"Overview"==t.task||t.hideQuit)),f.Kb(1),f.kc("ngIf",!t.showOverview),f.Kb(3),f.kc("ngForOf",t.slides),f.Kb(2),f.kc("ngForOf",t.slides))},directives:[n.j,n.o,n.p,c.j,n.m,c.h,n.B,c.i,n.A],styles:["ion-item[_ngcontent-%COMP%]{--background:#1e90ff}div[_ngcontent-%COMP%]{color:#fff;text-align:center}img[_ngcontent-%COMP%]{height:55vh;width:auto;margin:0 auto;border-radius:5%}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]}),k),I=s("l7GE"),w=s("ZUHj");function y(e){return function(t){return t.lift(new E(e))}}var C,E=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var s=new T(e),n=Object(w.a)(s,this.notifier);return n&&!s.seenValue?(s.add(n),t.subscribe(s)):s}}]),e}(),T=function(e){_inherits(s,e);var t=_createSuper(s);function s(e){var n;return _classCallCheck(this,s),(n=t.call(this,e)).seenValue=!1,n}return _createClass(s,[{key:"notifyNext",value:function(e,t,s,n,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),s}(I.a),R=s("MTcp"),F=s("Xy44"),W=s("tk/3"),x=((C=function(){function e(t){_classCallCheck(this,e),this.http=t,this.scores_url="https://crossfacerecognition.herokuapp.com/tasks/",this.pre_url="https://crossfacerecognition.herokuapp.com/preassessment/",this.post_url="https://crossfacerecognition.herokuapp.com/postassessment/",this.shuffle=0,this.memory=0,this.whosnew=0,this.nameface=0,this.forcedchoice=0,this.samedifferent=0,this.pre_score=0,this.post_score=0}return _createClass(e,[{key:"setScores",value:function(e,t){var s=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Black";return new Promise((function(i,c){s.level=e,s.race=n,s.nameface=t[0],s.whosnew=t[1],s.memory=t[2],s.shuffle=t[3],s.forcedchoice=t[4],s.samedifferent=t[5],s.body={level:s.level,race:s.race,shuffle:s.shuffle,memory:s.memory,whosnew:s.whosnew,nameface:s.nameface,forcedchoice:s.forcedchoice,samedifferent:s.samedifferent},i()}))}},{key:"putScores",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Black";return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},n.next=3,this.setScores(e,t,s);case 3:console.log("Sent: ",JSON.stringify(this.body)),this.http.post(this.scores_url,this.body,i).subscribe((function(e){console.log("Response: ",e)}),(function(e){console.log("Error: ",e)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"submitTaskScores",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Black";this.putScores(e,t,s)}},{key:"setPre",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return new Promise((function(n,i){t.pre_score=e,t.race=s,t.body={score:t.pre_score,race:t.race},n()}))}},{key:"submitPreAssessment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},s.next=3,this.setPre(e,t);case 3:console.log("Sent to pre: ",JSON.stringify(this.body)),this.http.put(this.pre_url,this.body,n).subscribe((function(e){console.log("Response: ",e),console.log("status: ",e.status)}),(function(e){console.log("Error: ",e)}));case 5:case"end":return s.stop()}}),s,this)})))}},{key:"setPost",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return new Promise((function(n,i){t.post_score=e,t.race=s,t.body={score:t.post_score,race:t.race},n()}))}},{key:"submitPostAssessment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},s.next=3,this.setPost(e,t);case 3:console.log("Sent to post: ",JSON.stringify(this.body)),this.http.put(this.post_url,this.body,n).subscribe((function(e){console.log("Response: ",e),console.log("status: ",e.status)}),(function(e){console.log("Error: ",e)}));case 5:case"end":return s.stop()}}),s,this)})))}}]),e}()).\u0275fac=function(e){return new(e||C)(f.bc(W.a))},C.\u0275prov=f.Qb({token:C,factory:C.\u0275fac,providedIn:"root"}),C),j=s("Bg0J"),X=s("R0Ic"),M=function(e){return{opacity:e}};function K(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-slide",10),f.Xb(1,"ion-card",11),f.Xb(2,"ion-icon",12),f.fc("click",(function(){return f.sc(s),f.hc(),f.rc(6).slidePrev()})),f.Wb(),f.Xb(3,"div"),f.Xb(4,"div",13),f.Vb(5,"img",14),f.Wb(),f.Xb(6,"div",15),f.Xb(7,"div",16),f.Xb(8,"p",17),f.wc(9),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(10,"ion-icon",18),f.fc("click",(function(){return f.sc(s),f.hc(),f.rc(6).slideNext()})),f.Wb(),f.Wb(),f.Wb()}if(2&e){var n=t.$implicit,i=t.index,c=f.hc();f.Kb(2),f.kc("ngStyle",f.nc(4,M,0==c.progress?"0.2":"1")),f.Kb(3),f.kc("src",n,f.tc),f.Kb(4),f.xc(c.setNames[i]),f.Kb(1),f.kc("ngStyle",f.nc(6,M,c.progress==c.facePaths.length-1?"0.2":"1"))}}function A(e,t){1&e&&(f.Xb(0,"ion-button",19),f.wc(1,"Finish"),f.Wb())}function P(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-button",20),f.fc("click",(function(){return f.sc(s),f.hc().finished.emit()})),f.wc(1,"Finish"),f.Wb()}}var L,N=((L=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.progress=0,this.progressPercent=0,this.seenAll=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"changeCard",value:function(e){"next"==e?this.progress++:this.progress--,this.seenAll||(this.progressPercent=this.progress/(this.facePaths.length-1)),7==this.progress&&(this.seenAll=!0)}}]),e}()).\u0275fac=function(e){return new(e||L)},L.\u0275cmp=f.Ob({type:L,selectors:[["app-learning-task"]],inputs:{setNames:"setNames",facePaths:"facePaths"},outputs:{finished:"finished"},decls:11,vars:4,consts:[["id","learningView"],[2,"margin-top","0px",3,"value"],[1,"flex-slide"],[2,"font-size","7vw","color","white","text-align","center","margin-top","5%"],[2,"width","100%",3,"ionSlideNextStart","ionSlidePrevStart"],["slideElement",""],["style","text-align: center",4,"ngFor","ngForOf"],[2,"text-align","center","height","7%","margin-bottom","5%"],["color","success","style","height: 100%","disabled","",4,"ngIf"],["color","success","style","height: 100%",3,"click",4,"ngIf"],[2,"text-align","center"],[2,"display","flex","justify-content","center","align-items","center"],["color","dark","name","arrow-back",2,"margin-right","calc((100% - 220px) / 2)","font-size","150%",3,"ngStyle","click"],[1,"imgContainer"],["id","faceImg",3,"src"],[1,"nameContainer"],["id","nameDisplay"],["id","nameText"],["color","dark","name","arrow-forward",2,"margin-left","calc((100% - 220px) / 2)","font-size","150%",3,"ngStyle","click"],["color","success","disabled","",2,"height","100%"],["color","success",2,"height","100%",3,"click"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.Xb(2,"div",2),f.Xb(3,"div",3),f.wc(4,"Memorize the faces and names"),f.Wb(),f.Xb(5,"ion-slides",4,5),f.fc("ionSlideNextStart",(function(){return t.changeCard("next")}))("ionSlidePrevStart",(function(){return t.changeCard("back")})),f.vc(7,K,11,8,"ion-slide",6),f.Wb(),f.Xb(8,"div",7),f.vc(9,A,2,0,"ion-button",8),f.vc(10,P,2,0,"ion-button",9),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Kb(1),f.lc("value",t.progressPercent),f.Kb(6),f.kc("ngForOf",t.facePaths),f.Kb(2),f.kc("ngIf",!t.seenAll),f.Kb(1),f.kc("ngIf",t.seenAll))},directives:[n.j,n.u,n.B,c.i,c.j,n.A,n.g,n.m,c.k,n.e],styles:["#learningView[_ngcontent-%COMP%]{--background:grey}ion-card[_ngcontent-%COMP%]{width:90%;height:auto;text-align:center;border-radius:2%;box-shadow:6px 4px 5px rgba(0,0,0,.7);display:block;margin-left:auto;margin-right:auto;margin-bottom:5px;background-color:#dcdcdc}ion-button[_ngcontent-%COMP%]{width:80%;height:100%;padding:0;margin:5px}ion-icon[_ngcontent-%COMP%]{font-size:100%}.imgContainer[_ngcontent-%COMP%]{height:230px;width:auto;text-align:center!important;display:flex;flex-direction:column;justify-content:center}#faceImg[_ngcontent-%COMP%]{margin:0 auto;height:210px;width:160px;display:inline-block}.nameContainer[_ngcontent-%COMP%]{height:70px;width:100%;margin-bottom:10px;background-image:url(nametag.9fffc7bfd1a8708802bc.png);background-position:50%;background-size:auto 100%;background-repeat:no-repeat}.nameContainer[_ngcontent-%COMP%]   #nameDisplay[_ngcontent-%COMP%]{height:100%;position:relative}.nameContainer[_ngcontent-%COMP%]   #nameDisplay[_ngcontent-%COMP%]   #nameText[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700;font-size:large;margin:5px;position:absolute;left:50%;transform:translate(-55%);bottom:15%}"]}),L);function _(e,t){if(1&e&&(f.Xb(0,"div",5),f.wc(1),f.Wb()),2&e){var s=f.hc();f.Kb(1),f.Ac("You need a score of at least ",s.length*s.minTrainScore,"/",s.length," (",100*s.minTrainScore,"%) to pass this module")}}function Y(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-button",6),f.fc("click",(function(){return f.sc(s),f.hc().finished.emit(0)})),f.wc(1,"Retry"),f.Wb()}}function D(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-button",6),f.fc("click",(function(){return f.sc(s),f.hc().finished.emit(1)})),f.Vb(1,"ion-icon",7),f.wc(2," \xa0 "),f.Vb(3,"ion-icon",7),f.Wb()}if(2&e){var n=f.hc();f.Kb(1),f.kc("src",n.replay_icon),f.Kb(2),f.kc("src",n.face_icon)}}var z,V=((z=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.minTrainScore=.75,this.replay_icon="assets/icon/replay.svg",this.face_icon="assets/icon/face.svg"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"failed",value:function(){return this.score<this.length*this.minTrainScore&&!this.assessment}}]),e}()).\u0275fac=function(e){return new(e||z)},z.\u0275cmp=f.Ob({type:z,selectors:[["app-score-page"]],inputs:{score:"score",length:"length",assessment:"assessment"},outputs:{finished:"finished"},decls:10,vars:6,consts:[[1,"flex-slide"],[1,"header"],["class","subheader","style","margin: 5%",4,"ngIf"],[3,"click",4,"ngIf"],[3,"color","click"],[1,"subheader",2,"margin","5%"],[3,"click"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"div"),f.Xb(2,"div",1),f.wc(3),f.Wb(),f.vc(4,_,2,3,"div",2),f.vc(5,Y,2,0,"ion-button",3),f.vc(6,D,4,2,"ion-button",3),f.Vb(7,"br"),f.Xb(8,"ion-button",4),f.fc("click",(function(){return t.finished.emit(2)})),f.wc(9,"Finish"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Kb(3),f.zc("Your score: ",t.score,"/",t.length,""),f.Kb(1),f.kc("ngIf",t.failed()),f.Kb(1),f.kc("ngIf",t.failed()),f.Kb(1),f.kc("ngIf",t.failed()),f.Kb(2),f.kc("color",t.failed()?"danger":"success"))},directives:[c.j,n.e,n.m],styles:["ion-button[_ngcontent-%COMP%]{height:8vh}"]}),z),H=["slideElement"];function B(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",7),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",8),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(3),f.zc("Score: ",s.score,"/",s.progressPercent*s.taskLength,"")}}function U(e,t){if(1&e&&(f.Xb(0,"div",16),f.wc(1,"Who is "),f.Xb(2,"b"),f.wc(3),f.Wb(),f.wc(4,"?"),f.Wb()),2&e){var s=f.hc().index,n=f.hc();f.Kb(3),f.xc(n.slideInfo[s].correctName)}}function Z(e,t){1&e&&(f.Xb(0,"div",16),f.wc(1,"Correct!"),f.Wb())}function G(e,t){1&e&&(f.Xb(0,"div",16),f.wc(1,"Incorrect!"),f.Wb())}function q(e,t){if(1&e&&f.Vb(0,"img",21),2&e){var s=f.hc().index,n=f.hc().index,i=f.hc();f.kc("src",i.slideInfo[n].faces[s],f.tc)}}var J=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function Q(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",17),f.Xb(1,"ion-card",18),f.fc("click",(function(){f.sc(s);var e=t.index,n=f.hc().index,i=f.hc();return i.selectFace(i.slideInfo[n].faces[e])})),f.vc(2,q,1,1,"img",19),f.Wb(),f.Xb(3,"div",20),f.wc(4),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc().index,c=f.hc();f.Kb(1),f.kc("button",!c.showFeedback())("ngClass",f.oc(4,J,c.showSelected(n)&&i==c.currentSlide,c.showDisabled(n)&&i==c.currentSlide)),f.Kb(1),f.kc("ngIf",i<=c.currentSlide),f.Kb(2),f.xc(i==c.currentSlide?c.getName(n):"")}}function $(e,t){if(1&e&&f.Vb(0,"img",21),2&e){var s=f.hc().index,n=f.hc().index,i=f.hc();f.kc("src",i.slideInfo[n].faces[s+3],f.tc)}}function ee(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",17),f.Xb(1,"ion-card",18),f.fc("click",(function(){f.sc(s);var e=t.index,n=f.hc().index,i=f.hc();return i.selectFace(i.slideInfo[n].faces[e+3])})),f.vc(2,$,1,1,"img",19),f.Wb(),f.Xb(3,"div",20),f.wc(4),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc().index,c=f.hc();f.Kb(1),f.kc("button",!c.showFeedback())("ngClass",f.oc(4,J,c.showSelected(n+3)&&i==c.currentSlide,c.showDisabled(n+3)&&i==c.currentSlide)),f.Kb(1),f.kc("ngIf",i<=c.currentSlide),f.Kb(2),f.xc(i==c.currentSlide?c.getName(n+3):"")}}var te=function(){return[]};function se(e,t){if(1&e&&(f.Xb(0,"ion-slide"),f.Xb(1,"div",9),f.vc(2,U,5,1,"div",10),f.vc(3,Z,2,0,"div",10),f.vc(4,G,2,0,"div",10),f.Xb(5,"div"),f.Xb(6,"div",11),f.vc(7,Q,5,7,"div",12),f.Wb(),f.Xb(8,"div",13),f.vc(9,ee,5,7,"div",12),f.Wb(),f.Wb(),f.Xb(10,"ion-item",14),f.Xb(11,"ion-label"),f.wc(12,"Swipe to Continue"),f.Wb(),f.Vb(13,"ion-icon",15),f.Wb(),f.Wb(),f.Wb()),2&e){var s=t.index,n=f.hc();f.Kb(2),f.kc("ngIf",s!=n.currentSlide||!n.showFeedback()),f.Kb(1),f.kc("ngIf",n.showFeedback()&&n.slideInfo[s].stage==n.Stage.CORRECT),f.Kb(1),f.kc("ngIf",n.showFeedback()&&n.slideInfo[s].stage==n.Stage.INCORRECT),f.Kb(3),f.kc("ngForOf",f.mc(6,te).constructor(3)),f.Kb(2),f.kc("ngForOf",f.mc(7,te).constructor(3)),f.Kb(1),f.kc("@fadeFooter",n.showFeedback()?"visible":"invisible")}}var ne,ie=function(e,t,s){return{default:e,success:t,failure:s}},ce=function(e){return e[e.SELECT=0]="SELECT",e[e.CORRECT=1]="CORRECT",e[e.INCORRECT=2]="INCORRECT",e}({}),re=((ne=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=ce,this.numberOfOptions=6}return _createClass(e,[{key:"ngOnInit",value:function(){this.score=0,this.currentSlide=0,this.progressPercent=0,this.changeScore=Object(R.h)(),this.taskLength=this.facePaths.length,this.shuffledNames=[];for(var e=0;e<this.taskLength;e++)this.shuffledNames.push(this.setNames[e]);for(var t=this.taskLength-1;t>0;t-=1){var s=Math.floor(Math.random()*(t+1)),n=this.shuffledNames[t];this.shuffledNames[t]=this.shuffledNames[s],this.shuffledNames[s]=n}this.slideInfo=[];for(var i=0;i<this.taskLength;i++)this.slideInfo.push({correctName:this.shuffledNames[i],correctFace:this.facePaths[this.setNames.indexOf(this.shuffledNames[i])],selectedFace:null,faces:this.getSlideFaces(i),stage:ce.SELECT})}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"selectFace",value:function(e){this.slideInfo[this.currentSlide].stage==ce.SELECT&&(this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=ce.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=ce.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0))}},{key:"getSlideFaces",value:function(e){for(var t=[],s=0;s<this.numberOfOptions-1;s++){for(var n=Math.floor(Math.random()*this.taskLength);t.indexOf(this.facePaths[n])>-1||this.facePaths[n]==this.facePaths[this.setNames.indexOf(this.shuffledNames[e])];)n=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[n])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.facePaths[this.setNames.indexOf(this.shuffledNames[e])]),t}},{key:"showDisabled",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].correctFace!=this.slideInfo[this.currentSlide].faces[e]}},{key:"showSelected",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].faces[e]!=this.slideInfo[this.currentSlide].correctFace&&this.slideInfo[this.currentSlide].faces[e]==this.slideInfo[this.currentSlide].selectedFace}},{key:"getName",value:function(e){return!this.showFeedback()||this.showDisabled(e)&&!this.showSelected(e)?"  ":this.setNames[this.facePaths.indexOf(this.slideInfo[this.currentSlide].faces[e])]}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ce.CORRECT||this.slideInfo[this.currentSlide].stage==ce.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,e.t2=e.t0>e.t1,!e.t2){e.next=13;break}return e.next=8,this.slideElement.getActiveIndex();case 8:return this.currentSlide=e.sent,e.next=11,this.slideElement.lockSwipes(!0);case 11:return e.next=13,this.changeScore.stop();case 13:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=f.Ob({type:ne,selectors:[["app-name-face"]],viewQuery:function(e,t){var s;1&e&&f.Bc(H,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{setNames:"setNames",facePaths:"facePaths"},outputs:{finished:"finished"},decls:8,vars:11,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[2,"display","flex","justify-content","center"],["style","margin-left: 10px; margin-right: 10px",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","margin-top","10px"],["lines","none",1,"footer"],["slot","end","color","medium","name","arrow-back",2,"margin-top","10px"],[1,"prompt"],[2,"margin-left","10px","margin-right","10px"],[1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],[2,"height","25px","color","white"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,B,6,2,"span",2),f.Xb(3,"ion-slides",3,4),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(5,se,14,8,"ion-slide",5),f.Xb(6,"ion-slide"),f.Xb(7,"app-score-page",6),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(7,ie,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[n.j,c.h,n.u,c.j,n.B,c.i,n.A,V,n.o,n.p,n.m,n.g],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;height:110px;width:80px;margin:0}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:75px;margin-left:3px;margin-top:5px}"],data:{animation:[Object(X.k)("fadeFooter",[Object(X.h)("visible",Object(X.i)({opacity:.75})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)("invisible => visible",[Object(X.e)(1500,Object(X.f)([Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:".75"})]))]),Object(X.j)("visible => invisible",[Object(X.e)(200)])])]}}),ne),ae=["slideElement"];function oe(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",7),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",8),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(3),f.zc("Score: ",s.score,"/",s.progressPercent*s.taskLength,"")}}function le(e,t){1&e&&(f.Xb(0,"div",15),f.wc(1,"Who didn't you see today?"),f.Wb())}function fe(e,t){1&e&&(f.Xb(0,"div",15),f.wc(1,"Correct!"),f.Wb())}function he(e,t){1&e&&(f.Xb(0,"div",15),f.wc(1,"Incorrect!"),f.Wb())}function de(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.slideInfo[s].faces[0],f.tc)}}function ue(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.slideInfo[s].faces[1],f.tc)}}function be(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.slideInfo[s].faces[2],f.tc)}}function ge(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.slideInfo[s].faces[3],f.tc)}}var ve=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function me(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-slide"),f.Xb(1,"div",9),f.vc(2,le,2,0,"div",10),f.vc(3,fe,2,0,"div",10),f.vc(4,he,2,0,"div",10),f.Xb(5,"div"),f.Xb(6,"div"),f.Xb(7,"ion-card",11),f.fc("click",(function(){f.sc(s);var e=t.index,n=f.hc();return n.selectFace(n.slideInfo[e].faces[0])})),f.vc(8,de,1,1,"img",12),f.Wb(),f.Xb(9,"ion-card",11),f.fc("click",(function(){f.sc(s);var e=t.index,n=f.hc();return n.selectFace(n.slideInfo[e].faces[1])})),f.vc(10,ue,1,1,"img",12),f.Wb(),f.Wb(),f.Xb(11,"div"),f.Xb(12,"ion-card",11),f.fc("click",(function(){f.sc(s);var e=t.index,n=f.hc();return n.selectFace(n.slideInfo[e].faces[2])})),f.vc(13,be,1,1,"img",12),f.Wb(),f.Xb(14,"ion-card",11),f.fc("click",(function(){f.sc(s);var e=t.index,n=f.hc();return n.selectFace(n.slideInfo[e].faces[3])})),f.vc(15,ge,1,1,"img",12),f.Wb(),f.Wb(),f.Wb(),f.Xb(16,"ion-item",13),f.Xb(17,"ion-label"),f.wc(18,"Swipe to Continue"),f.Wb(),f.Vb(19,"ion-icon",14),f.Wb(),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc();f.Kb(2),f.kc("ngIf",n!=i.currentSlide||!i.showFeedback()),f.Kb(1),f.kc("ngIf",i.showFeedback()&&i.slideInfo[n].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.showFeedback()&&i.slideInfo[n].stage==i.Stage.INCORRECT),f.Kb(3),f.kc("button",!i.showFeedback())("ngClass",f.oc(16,ve,i.showSelected(0)&&n==i.currentSlide,i.showDisabled(0)&&n==i.currentSlide)),f.Kb(1),f.kc("ngIf",n<=i.currentSlide),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(19,ve,i.showSelected(1)&&n==i.currentSlide,i.showDisabled(1)&&n==i.currentSlide)),f.Kb(1),f.kc("ngIf",n<=i.currentSlide),f.Kb(2),f.kc("button",!i.showFeedback())("ngClass",f.oc(22,ve,i.showSelected(2)&&n==i.currentSlide,i.showDisabled(2)&&n==i.currentSlide)),f.Kb(1),f.kc("ngIf",n<=i.currentSlide),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(25,ve,i.showSelected(3)&&n==i.currentSlide,i.showDisabled(3)&&n==i.currentSlide)),f.Kb(1),f.kc("ngIf",n<=i.currentSlide),f.Kb(1),f.kc("@fadeFooter",i.showFeedback()?"visible":"invisible")}}var pe,ke=function(e,t,s){return{default:e,success:t,failure:s}},Se=function(e){return e[e.SELECT=0]="SELECT",e[e.CORRECT=1]="CORRECT",e[e.INCORRECT=2]="INCORRECT",e}({}),Oe=((pe=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=Se,this.numberOfOptions=4}return _createClass(e,[{key:"ngOnInit",value:function(){this.score=0,this.currentSlide=0,this.progressPercent=0,this.changeScore=Object(R.h)(),this.taskLength=this.newFacePaths.length,this.shuffledFaces=[];for(var e=0;e<this.taskLength;e++)this.shuffledFaces.push(this.newFacePaths[e]);for(var t=this.taskLength-1;t>0;t-=1){var s=Math.floor(Math.random()*(t+1)),n=this.shuffledFaces[t];this.shuffledFaces[t]=this.shuffledFaces[s],this.shuffledFaces[s]=n}this.slideInfo=[];for(var i=0;i<this.taskLength;i++)this.slideInfo.push({correctFace:this.shuffledFaces[i],selectedFace:null,faces:this.getSlideFaces(i),stage:Se.SELECT})}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"selectFace",value:function(e){this.slideInfo[this.currentSlide].stage==Se.SELECT&&(this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=Se.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=Se.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0))}},{key:"getSlideFaces",value:function(e){for(var t=[],s=0;s<this.numberOfOptions-1;s++){for(var n=Math.floor(Math.random()*this.taskLength);t.indexOf(this.facePaths[n])>-1;)n=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[n])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.shuffledFaces[e]),t}},{key:"showDisabled",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].correctFace!=this.slideInfo[this.currentSlide].faces[e]}},{key:"showSelected",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].faces[e]!=this.slideInfo[this.currentSlide].correctFace&&this.slideInfo[this.currentSlide].faces[e]==this.slideInfo[this.currentSlide].selectedFace}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==Se.CORRECT||this.slideInfo[this.currentSlide].stage==Se.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,e.t2=e.t0>e.t1,!e.t2){e.next=13;break}return e.next=8,this.slideElement.getActiveIndex();case 8:return this.currentSlide=e.sent,e.next=11,this.slideElement.lockSwipes(!0);case 11:return e.next=13,this.changeScore.stop();case 13:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=f.Ob({type:pe,selectors:[["app-whos-new"]],viewQuery:function(e,t){var s;1&e&&f.Bc(ae,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths",newFacePaths:"newFacePaths"},outputs:{finished:"finished"},decls:8,vars:11,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","medium","name","arrow-back"],[1,"prompt"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,oe,6,2,"span",2),f.Xb(3,"ion-slides",3,4),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(5,me,20,28,"ion-slide",5),f.Xb(6,"ion-slide"),f.Xb(7,"app-score-page",6),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(7,ke,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[n.j,c.h,n.u,c.j,n.B,c.i,n.A,V,n.g,n.o,n.p,n.m],styles:[""],data:{animation:[Object(X.k)("fadeFooter",[Object(X.h)("visible",Object(X.i)({opacity:.75})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)("invisible => visible",[Object(X.e)(1500,Object(X.f)([Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:".75"})]))]),Object(X.j)("visible => invisible",[Object(X.e)(200)])])]}}),pe),Ie=["slideElement"];function we(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",14),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",15),f.wc(5),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(3),f.zc("Score: ",s.score,"/",s.progressPercent*s.taskLength,""),f.Kb(2),f.xc(s.stage==s.Stage.CORRECT?"+4":"-1")}}function ye(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",16),f.fc("click",(function(){return f.sc(s),f.hc().startMemorizeTimer()})),f.Xb(1,"div",17),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var n=f.hc();f.kc("@fadeInOut",n.stage==n.Stage.START?"visible":"invisible")}}function Ce(e,t){if(1&e&&(f.Xb(0,"div",18),f.wc(1),f.Wb()),2&e){var s=f.hc();f.Kb(1),f.yc("Memorize the face placement: ",s.memorizeTime,"")}}function Ee(e,t){if(1&e&&(f.Xb(0,"div",18),f.wc(1,"Memorize the face placement: "),f.Xb(2,"span",19),f.wc(3),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(2),f.kc("@countdown",s.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(s.timeRemaining)}}function Te(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Hold the faces in your mind..."),f.Wb())}function Re(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Match the faces"),f.Wb())}function Fe(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Correct!"),f.Wb())}function We(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Incorrect!"),f.Wb())}function xe(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.stage==n.Stage.MASK?n.mask:n.randomFaces[s],f.tc)}}var je=function(e){return{"selected-card":e}};function Xe(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(s);var e=t.index;return f.hc().clickFace(e)})),f.vc(2,xe,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,je,i.selectedFace==n)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(n))}}function Me(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.stage==n.Stage.MASK?n.mask:n.randomFaces[s+4],f.tc)}}function Ke(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(s);var e=t.index;return f.hc().clickFace(e+4)})),f.vc(2,Me,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,je,i.selectedFace==n+4)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(n+4))}}function Ae(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.stage==n.Stage.MASK?n.mask:n.randomFaces[s+8],f.tc)}}function Pe(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(s);var e=t.index;return f.hc().clickFace(e+8)})),f.vc(2,Ae,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,je,i.selectedFace==n+8)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(n+8))}}function Le(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var s=f.hc().index,n=f.hc();f.kc("src",n.stage==n.Stage.MASK?n.mask:n.randomFaces[s+12],f.tc)}}function Ne(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(s);var e=t.index;return f.hc().clickFace(e+12)})),f.vc(2,Le,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,je,i.selectedFace==n+12)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(n+12))}}var _e,Ye=function(e,t,s){return{default:e,success:t,failure:s}},De=function(){return[]},ze=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),Ve=((_e=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=ze,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=10,this.taskLength=32}return _createClass(e,[{key:"ngOnInit",value:function(){this.stage=ze.START,this.score=0,this.promise=0,this.progressPercent=0,this.selectedFace=null,this.correctFaces=[],this.incorrectFaces=[],this.firstSlide=!0,this.changeScore=Object(R.h)(),this.randomFaces=[];for(var e=0;e<this.facePaths.length;e++)this.randomFaces.push(this.facePaths[e]),this.randomFaces.push(this.facePaths[e]);for(var t=this.randomFaces.length-1;t>0;t-=1){var s=Math.floor(Math.random()*(t+1)),n=this.randomFaces[t];this.randomFaces[t]=this.randomFaces[s],this.randomFaces[s]=n}}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"clickFace",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.stage!=ze.START&&this.stage!=ze.MEMORIZE&&this.stage!=ze.MASK,!t.t0){t.next=25;break}if(this.stage!=ze.CORRECT&&this.stage!=ze.INCORRECT||(this.promise++,this.selectedFace=null,this.resetSelected()),t.t1=this.correctFaces.indexOf(this.randomFaces[e])<0&&e!=this.selectedFace,!t.t1){t.next=25;break}if(null!=this.selectedFace){t.next=9;break}this.selectedFace=e,t.next=25;break;case 9:if(this.randomFaces[e]!=this.randomFaces[this.selectedFace]){t.next=19;break}return this.correctFaces.push(this.randomFaces[e]),this.progressPercent=this.correctFaces.length/this.facePaths.length,this.score+=this.taskLength/this.facePaths.length,this.stage=ze.CORRECT,this.correctFaces.length==this.facePaths.length&&(this.score=Math.ceil(this.score),this.slideElement.lockSwipes(!1)),t.next=17,this.waitForFeedback();case 17:t.next=25;break;case 19:return this.incorrectFaces.push(this.selectedFace),this.incorrectFaces.push(e),this.score=this.score>=1?this.score-1:0,this.stage=ze.INCORRECT,t.next=25,this.waitForFeedback();case 25:case"end":return t.stop()}}),t,this)})))}},{key:"imageIsDisplayed",value:function(e){return this.stage==ze.MEMORIZE||this.stage==ze.MASK||this.incorrectFaces.indexOf(e)>-1||this.correctFaces.indexOf(this.randomFaces[e])>-1||this.selectedFace==e}},{key:"resetSelected",value:function(){this.incorrectFaces=[],this.stage=ze.SELECT,this.changeScore.stop()}},{key:"waitForFeedback",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectedFace=null,this.stage!=ze.INCORRECT&&this.stage!=ze.CORRECT||(this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()),t=this.promise,e.next=4,new Promise((function(e){return setTimeout(e,2e3)}));case 4:t==this.promise&&this.resetSelected();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stage==ze.START&&(this.timeRemaining=this.memorizeTime,this.stage=ze.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(y(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.stage=ze.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.stage=ze.SELECT}))}},{key:"scoreCardDisplayed",value:function(){return!this.firstSlide}}]),e}()).\u0275fac=function(e){return new(e||_e)},_e.\u0275cmp=f.Ob({type:_e,selectors:[["app-memory-match"]],viewQuery:function(e,t){var s;1&e&&f.Bc(Ie,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:28,vars:26,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange","ionSlideReachStart","ionSlideReachEnd"],["slideElement",""],[1,"flex-slide"],["class","prompt-small",4,"ngIf"],[2,"text-align","center"],[2,"display","flex","justify-content","center"],["style","margin: 10px",4,"ngFor","ngForOf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change",2,"right","12vw"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"prompt-small"],[1,"time-left"],[2,"margin","10px"],[3,"button","ngClass","click"],[3,"src",4,"ngIf"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,we,6,3,"span",2),f.vc(3,ye,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.ngAfterViewInit(),t.resetSelected()}))("ionSlideReachStart",(function(){return t.firstSlide=!0}))("ionSlideReachEnd",(function(){return t.firstSlide=!1})),f.Xb(6,"ion-slide",6),f.vc(7,Ce,2,1,"div",7),f.vc(8,Ee,4,2,"div",7),f.vc(9,Te,2,0,"div",7),f.vc(10,Re,2,0,"div",7),f.vc(11,Fe,2,0,"div",7),f.vc(12,We,2,0,"div",7),f.Xb(13,"div",8),f.Xb(14,"div",9),f.vc(15,Xe,3,5,"div",10),f.Wb(),f.Xb(16,"div",9),f.vc(17,Ke,3,5,"div",10),f.Wb(),f.Xb(18,"div",9),f.vc(19,Pe,3,5,"div",10),f.Wb(),f.Xb(20,"div",9),f.vc(21,Ne,3,5,"div",10),f.Wb(),f.Wb(),f.Xb(22,"ion-item",11),f.Xb(23,"ion-label"),f.wc(24,"Swipe to Continue"),f.Wb(),f.Vb(25,"ion-icon",12),f.Wb(),f.Wb(),f.Xb(26,"ion-slide"),f.Xb(27,"app-score-page",13),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(18,Ye,t.stage!=t.Stage.CORRECT&&t.stage!=t.Stage.INCORRECT,t.stage==t.Stage.CORRECT,t.stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.START),f.Kb(4),f.kc("ngIf",t.stage==t.Stage.START),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.MASK),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.SELECT),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.CORRECT),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.INCORRECT),f.Kb(3),f.kc("ngForOf",f.mc(22,De).constructor(4)),f.Kb(2),f.kc("ngForOf",f.mc(23,De).constructor(4)),f.Kb(2),f.kc("ngForOf",f.mc(24,De).constructor(4)),f.Kb(2),f.kc("ngForOf",f.mc(25,De).constructor(4)),f.Kb(1),f.kc("@fadeFooter",t.correctFaces.length==t.facePaths.length?"visible":"invisible"),f.Kb(5),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[n.j,c.h,n.u,c.j,n.B,n.A,c.i,n.o,n.p,n.m,V,n.g],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;background-color:#dcdcdc;display:inline-block;margin:0;height:70px;width:52px}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:45px;margin-left:4px;margin-top:5px}"],data:{animation:[Object(X.k)("fadeInOut",[Object(X.h)("visible",Object(X.i)({opacity:.9})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)(":enter",[Object(X.e)(500)]),Object(X.j)(":leave",[Object(X.e)(500)])]),Object(X.k)("countdown",[Object(X.j)("active <=> inactive",[Object(X.e)(200,Object(X.f)([Object(X.i)({transform:"translateY(0%)",opacity:"1"}),Object(X.i)({transform:"translateY(75%)",opacity:"0"}),Object(X.i)({transform:"translateY(-75%)",opacity:"0"}),Object(X.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(X.k)("fadeFooter",[Object(X.h)("visible",Object(X.i)({opacity:.75})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)("invisible => visible",[Object(X.e)(1500,Object(X.f)([Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:".75"})]))]),Object(X.j)("visible => invisible",[Object(X.e)(200)])])]}}),_e),He=["slideElement"];function Be(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",8),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",9),f.wc(5),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(3),f.zc("Score: ",s.score,"/",s.progressPercent*s.taskLength,""),f.Kb(2),f.yc("+",s.changeScoreValue,"")}}function Ue(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",10),f.fc("click",(function(){return f.sc(s),f.hc().startMemorizeTimer()})),f.Xb(1,"div",11),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var n=f.hc();f.kc("@fadeInOut",n.slideInfo[n.currentSlide].stage==n.Stage.START?"visible":"invisible")}}function Ze(e,t){if(1&e&&(f.Xb(0,"div",24),f.wc(1),f.Wb()),2&e){var s=f.hc(2);f.Kb(1),f.yc("Memorize the face placement: ",s.memorizeTime,"")}}function Ge(e,t){if(1&e&&(f.Xb(0,"div",24),f.wc(1,"Memorize the face placement: "),f.Xb(2,"span",25),f.wc(3),f.Wb(),f.Wb()),2&e){var s=f.hc(2);f.Kb(2),f.kc("@countdown",s.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(s.timeRemaining)}}function qe(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Hold the faces in your mind..."),f.Wb())}function Je(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Rearrange the faces"),f.Wb())}function Qe(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Correct!"),f.Wb())}function $e(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Incorrect!"),f.Wb())}function et(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var s=f.hc(2);f.kc("src",s.getSrc(0),f.tc)}}function tt(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var s=f.hc(2);f.kc("src",s.getSrc(1),f.tc)}}function st(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var s=f.hc(2);f.kc("src",s.getSrc(2),f.tc)}}function nt(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var s=f.hc(2);f.kc("src",s.getSrc(3),f.tc)}}function it(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-button",27),f.fc("click",(function(){return f.sc(s),f.hc(2).clickDone()})),f.wc(1,"Done"),f.Wb()}}function ct(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-grid",28),f.Xb(1,"ion-row"),f.Xb(2,"ion-col"),f.Xb(3,"span",29),f.wc(4,"Correct"),f.Wb(),f.Wb(),f.Xb(5,"ion-col"),f.Xb(6,"ion-toggle",30),f.fc("ngModelChange",(function(e){f.sc(s);var t=f.hc().index;return f.hc().slideInfo[t].feedback=e}))("click",(function(){return f.sc(s),f.hc(2).animateCardChange()})),f.Wb(),f.Wb(),f.Xb(7,"ion-col"),f.Xb(8,"span",29),f.wc(9,"Selected"),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){var n=f.hc().index,i=f.hc();f.Kb(6),f.kc("ngModel",i.slideInfo[n].feedback)}}var rt=function(e,t){return{"selected-card":e,"wrong-card":t}};function at(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-slide",12),f.vc(1,Ze,2,1,"div",13),f.vc(2,Ge,4,2,"div",13),f.vc(3,qe,2,0,"div",13),f.vc(4,Je,2,0,"div",13),f.vc(5,Qe,2,0,"div",13),f.vc(6,$e,2,0,"div",13),f.Xb(7,"div"),f.Xb(8,"div"),f.Xb(9,"ion-card",14),f.fc("click",(function(){return f.sc(s),f.hc().clickCard(0)})),f.vc(10,et,1,1,"img",15),f.Wb(),f.Xb(11,"ion-card",16),f.fc("click",(function(){return f.sc(s),f.hc().clickCard(1)})),f.vc(12,tt,1,1,"img",15),f.Wb(),f.Wb(),f.Xb(13,"div"),f.Xb(14,"ion-card",17),f.fc("click",(function(){return f.sc(s),f.hc().clickCard(2)})),f.vc(15,st,1,1,"img",15),f.Wb(),f.Xb(16,"ion-card",18),f.fc("click",(function(){return f.sc(s),f.hc().clickCard(3)})),f.vc(17,nt,1,1,"img",15),f.Wb(),f.Wb(),f.Wb(),f.Xb(18,"div",19),f.vc(19,it,2,0,"ion-button",20),f.vc(20,ct,10,1,"ion-grid",21),f.Wb(),f.Xb(21,"ion-item",22),f.Xb(22,"ion-label"),f.wc(23,"Swipe to Continue"),f.Wb(),f.Vb(24,"ion-icon",23),f.Wb(),f.Wb()}if(2&e){var n=t.index,i=f.hc();f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.START),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.MASK),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.INCORRECT),f.Kb(3),f.kc("button",i.slideInfo[n].stage==i.Stage.SELECT)("ngClass",f.oc(21,rt,i.slideInfo[n].stage!=i.Stage.START&&i.getSrc(0)==i.slideInfo[n].selectedFace,i.slideInfo[n].stage==i.Stage.INCORRECT&&i.slideInfo[n].feedback&&i.slideInfo[n].shuffledOrder[0]!=i.slideInfo[n].correctOrder[0])),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage!=i.Stage.START),f.Kb(1),f.kc("button",i.slideInfo[n].stage==i.Stage.SELECT)("ngClass",f.oc(24,rt,i.slideInfo[n].stage!=i.Stage.START&&i.getSrc(1)==i.slideInfo[n].selectedFace,i.slideInfo[n].stage==i.Stage.INCORRECT&&i.slideInfo[n].feedback&&i.slideInfo[n].shuffledOrder[1]!=i.slideInfo[n].correctOrder[1])),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage!=i.Stage.START),f.Kb(2),f.kc("button",i.slideInfo[n].stage==i.Stage.SELECT)("ngClass",f.oc(27,rt,i.slideInfo[n].stage!=i.Stage.START&&i.getSrc(2)==i.slideInfo[n].selectedFace,i.slideInfo[n].stage==i.Stage.INCORRECT&&i.slideInfo[n].feedback&&i.slideInfo[n].shuffledOrder[2]!=i.slideInfo[n].correctOrder[2])),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage!=i.Stage.START),f.Kb(1),f.kc("button",i.slideInfo[n].stage==i.Stage.SELECT)("ngClass",f.oc(30,rt,i.slideInfo[n].stage!=i.Stage.START&&i.getSrc(3)==i.slideInfo[n].selectedFace,i.slideInfo[n].stage==i.Stage.INCORRECT&&i.slideInfo[n].feedback&&i.slideInfo[n].shuffledOrder[3]!=i.slideInfo[n].correctOrder[3])),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage!=i.Stage.START),f.Kb(2),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.INCORRECT),f.Kb(1),f.kc("@fadeFooter",i.showFeedback()?"visible":"invisible")}}var ot,lt=function(e,t,s){return{default:e,success:t,failure:s}},ft=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),ht=((ot=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=ft,this.numberOfOptions=4,this.numberOfSlides=4,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=10,this.taskLength=this.numberOfOptions*this.numberOfSlides}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.changeScore=Object(R.h)(),this.slideInfo=[];for(var e=0;e<this.numberOfSlides;e++){var t=this.getSlideFaces(e);this.slideInfo.push({correctOrder:t,shuffledOrder:this.shuffleFaces(t),stage:ft.START,feedback:!0,selectedFace:null})}}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"clickDone",value:function(){this.changeScoreValue=this.numberOfOptions,this.slideInfo[this.currentSlide].selectedFace=null;for(var e=0;e<this.slideInfo[this.currentSlide].shuffledOrder.length;e++)this.slideInfo[this.currentSlide].shuffledOrder[e]!=this.slideInfo[this.currentSlide].correctOrder[e]&&(this.changeScoreValue-=1);this.score+=this.changeScoreValue,this.slideInfo[this.currentSlide].stage=this.changeScoreValue==this.numberOfOptions?ft.CORRECT:ft.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.numberOfSlides,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0),this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()}},{key:"getSlideFaces",value:function(e){for(var t=[],s=0;s<this.numberOfOptions-1;s++){for(var n=Math.floor(Math.random()*this.facePaths.length);t.indexOf(this.facePaths[n])>-1||this.facePaths[n]==this.facePaths[e];)n=Math.floor(Math.random()*this.facePaths.length);t.push(this.facePaths[n])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.facePaths[e]),t}},{key:"shuffleFaces",value:function(e){for(var t=[],s=0;s<e.length;s++)t.push(e[s]);for(var n=t.length-1;n>0;n-=1){var i=Math.floor(Math.random()*(n+1)),c=t[n];t[n]=t[i],t[i]=c}return t}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=ft.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(y(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.slideInfo[this.currentSlide].stage=ft.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.slideInfo[e.currentSlide].stage=ft.SELECT}))}},{key:"getSrc",value:function(e){return this.slideInfo[this.currentSlide].stage==ft.MASK?this.mask:this.slideInfo[this.currentSlide].stage==ft.SELECT||this.slideInfo[this.currentSlide].stage==ft.INCORRECT&&this.slideInfo[this.currentSlide].feedback?this.slideInfo[this.currentSlide].shuffledOrder[e]:this.slideInfo[this.currentSlide].correctOrder[e]}},{key:"clickCard",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.slideInfo[this.currentSlide].stage!=ft.SELECT){t.next=4;break}null==this.slideInfo[this.currentSlide].selectedFace?this.slideInfo[this.currentSlide].selectedFace=this.slideInfo[this.currentSlide].shuffledOrder[e]:(n=this.slideInfo[this.currentSlide].shuffledOrder.indexOf(this.slideInfo[this.currentSlide].selectedFace),s=[this.slideInfo[this.currentSlide].shuffledOrder[n],this.slideInfo[this.currentSlide].shuffledOrder[e]],this.slideInfo[this.currentSlide].shuffledOrder[e]=s[0],this.slideInfo[this.currentSlide].shuffledOrder[n]=s[1],this.slideInfo[this.currentSlide].selectedFace=null),t.next=9;break;case 4:if(t.t0=this.showFeedback(),!t.t0){t.next=9;break}return t.next=8,this.animateCardChange();case 8:this.slideInfo[this.currentSlide].feedback=!this.slideInfo[this.currentSlide].feedback;case 9:case"end":return t.stop()}}),t,this)})))}},{key:"animateCardChange",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s,n,i,c,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],s=0;s<this.slideInfo[this.currentSlide].correctOrder.length;s++)n=this.slideInfo[this.currentSlide].shuffledOrder.indexOf(this.slideInfo[this.currentSlide].correctOrder[s]),i="0px",c="0px",s!=n&&(1!=Math.abs(s-n)&&3!=Math.abs(s-n)||(i="-125px",(s<n&&!this.slideInfo[this.currentSlide].feedback||s>n&&this.slideInfo[this.currentSlide].feedback)&&(i="125px"),(1==s&&2==n||2==s&&1==n)&&(i="125px"==i?"-125px":"125px")),(3==Math.abs(s-n)||2==Math.abs(s-n)||1==Math.abs(s-n)&&(1==s&&2==n||2==s&&1==n))&&(c="-150px",(s<n&&!this.slideInfo[this.currentSlide].feedback||s>n&&this.slideInfo[this.currentSlide].feedback)&&(c="150px"))),r="#card-"+(this.slideInfo[this.currentSlide].feedback?n:s),a=Object(R.h)().addElement(document.querySelectorAll(r)[this.currentSlide]).fill("none").duration(300).fromTo("transform","translate(0vw, 0vh)","translate("+i+", "+c+")"),t.push(a);o=0;case 3:if(!(o<t.length)){e.next=13;break}if(o!=t.length-1){e.next=9;break}return e.next=7,t[o].play();case 7:e.next=10;break;case 9:t[o].play();case 10:o++,e.next=3;break;case 13:case"end":return e.stop()}}),e,this)})))}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ft.CORRECT||this.slideInfo[this.currentSlide].stage==ft.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.numberOfSlides}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,e.t2=e.t0>e.t1,!e.t2){e.next=14;break}return e.next=8,this.slideElement.getActiveIndex();case 8:return this.currentSlide=e.sent,e.next=11,this.slideElement.lockSwipes(!0);case 11:return e.next=13,this.changeScore.stop();case 13:this.scoreCardDisplayed()||this.startMemorizeTimer();case 14:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ot)},ot.\u0275cmp=f.Ob({type:ot,selectors:[["app-shuffle"]],viewQuery:function(e,t){var s;1&e&&f.Bc(He,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],["class","flex-slide",4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change",2,"right","12vw"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"flex-slide"],["class","prompt-small",4,"ngIf"],["id","card-0",1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],["id","card-1",1,"grid-card",3,"button","ngClass","click"],["id","card-2",1,"grid-card",3,"button","ngClass","click"],["id","card-3",1,"grid-card",3,"button","ngClass","click"],[2,"text-align","center","height","10%","width","100%"],[3,"click",4,"ngIf"],["style","--background: transparent; height: 60%","lines","none",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[1,"prompt-small"],[1,"time-left"],[3,"src"],[3,"click"],["lines","none",2,"--background","transparent","height","60%"],[2,"color","white"],[3,"ngModel","ngModelChange","click"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,Be,6,3,"span",2),f.vc(3,Ue,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(6,at,25,33,"ion-slide",6),f.Xb(7,"ion-slide"),f.Xb(8,"app-score-page",7),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(8,lt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[n.j,c.h,n.u,c.j,n.B,c.i,n.A,V,n.g,n.o,n.p,n.m,n.e,n.k,n.x,n.i,n.E,n.b,r.f,r.h],styles:[".wrong-card[_ngcontent-%COMP%]{background-color:transparent!important}"],data:{animation:[Object(X.k)("fadeInOut",[Object(X.h)("visible",Object(X.i)({opacity:.9})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)(":enter",[Object(X.e)(500)]),Object(X.j)(":leave",[Object(X.e)(500)])]),Object(X.k)("countdown",[Object(X.j)("active <=> inactive",[Object(X.e)(200,Object(X.f)([Object(X.i)({transform:"translateY(0%)",opacity:"1"}),Object(X.i)({transform:"translateY(75%)",opacity:"0"}),Object(X.i)({transform:"translateY(-75%)",opacity:"0"}),Object(X.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(X.k)("fadeFooter",[Object(X.h)("visible",Object(X.i)({opacity:.75})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)("invisible => visible",[Object(X.e)(1500,Object(X.f)([Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:".75"})]))]),Object(X.j)("visible => invisible",[Object(X.e)(200)])])]}}),ot),dt=["slideElement"];function ut(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",8),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",9),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(3),f.zc("Score: ",s.score,"/",s.progressPercent*s.taskLength,"")}}function bt(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",10),f.fc("click",(function(){return f.sc(s),f.hc().startMemorizeTimer()})),f.Xb(1,"div",11),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var n=f.hc();f.kc("@fadeInOut",n.slideInfo[n.currentSlide].stage==n.Stage.START?"visible":"invisible")}}function gt(e,t){if(1&e&&(f.Xb(0,"div",20),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.yc("Memorize the face: ",s.memorizeTime,"")}}function vt(e,t){if(1&e&&(f.Xb(0,"div",20),f.wc(1,"Memorize the face: "),f.Xb(2,"span",21),f.wc(3),f.Wb(),f.Wb()),2&e){var s=f.hc(3);f.Kb(2),f.kc("@countdown",s.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(s.timeRemaining)}}function mt(e,t){1&e&&(f.Xb(0,"div",20),f.wc(1,"Hold the face in your mind..."),f.Wb())}var pt=function(e){return{width:e}};function kt(e,t){if(1&e&&f.Vb(0,"img",22),2&e){var s=f.hc(2).index,n=f.hc();f.kc("src",n.slideInfo[s].stage==n.Stage.MEMORIZE?n.slideInfo[s].correctFace:n.mask,f.tc)("ngStyle",f.nc(2,pt,n.slideInfo[s].stage==n.Stage.MASK?"85%":"auto"))}}function St(e,t){if(1&e&&(f.Xb(0,"div",14),f.vc(1,gt,2,1,"div",15),f.vc(2,vt,4,2,"div",15),f.vc(3,mt,2,0,"div",15),f.Xb(4,"ion-card",16),f.vc(5,kt,1,4,"img",17),f.Wb(),f.Xb(6,"ion-item",18),f.Xb(7,"ion-label"),f.wc(8,"Swipe to Continue"),f.Wb(),f.Vb(9,"ion-icon",19),f.Wb(),f.Wb()),2&e){var s=f.hc().index,n=f.hc();f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.START),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.MASK),f.Kb(2),f.kc("ngIf",n.slideInfo[s].stage!=n.Stage.START),f.Kb(1),f.kc("@fadeFooter",n.showFeedback()?"visible":"invisible")}}function Ot(e,t){1&e&&(f.Xb(0,"div",20),f.wc(1,"Who did you see?"),f.Wb())}function It(e,t){1&e&&(f.Xb(0,"div",20),f.wc(1,"Correct!"),f.Wb())}function wt(e,t){1&e&&(f.Xb(0,"div",20),f.wc(1,"Incorrect!"),f.Wb())}var yt=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function Ct(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",23),f.vc(1,Ot,2,0,"div",15),f.vc(2,It,2,0,"div",15),f.vc(3,wt,2,0,"div",15),f.Xb(4,"div"),f.Xb(5,"div"),f.Xb(6,"ion-card",24),f.fc("click",(function(){f.sc(s);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[0])})),f.Vb(7,"img",25),f.Wb(),f.Xb(8,"ion-card",24),f.fc("click",(function(){f.sc(s);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[1])})),f.Vb(9,"img",25),f.Wb(),f.Wb(),f.Xb(10,"div"),f.Xb(11,"ion-card",24),f.fc("click",(function(){f.sc(s);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[2])})),f.Vb(12,"img",25),f.Wb(),f.Xb(13,"ion-card",24),f.fc("click",(function(){f.sc(s);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[3])})),f.Vb(14,"img",25),f.Wb(),f.Wb(),f.Wb(),f.Xb(15,"ion-item",18),f.Xb(16,"ion-label"),f.wc(17,"Swipe to Continue"),f.Wb(),f.Vb(18,"ion-icon",19),f.Wb(),f.Wb()}if(2&e){var n=f.hc().index,i=f.hc();f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.INCORRECT),f.Kb(3),f.kc("button",!i.showFeedback())("ngClass",f.oc(16,yt,i.showFeedback()&&i.slideInfo[n].faces[0]!=i.slideInfo[n].correctFace&&i.slideInfo[n].faces[0]==i.slideInfo[n].selectedFace,i.showFeedback()&&i.slideInfo[n].faces[0]!=i.slideInfo[n].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[n].faces[0],f.tc),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(19,yt,i.showFeedback()&&i.slideInfo[n].faces[1]!=i.slideInfo[n].correctFace&&i.slideInfo[n].faces[1]==i.slideInfo[n].selectedFace,i.showFeedback()&&i.slideInfo[n].faces[1]!=i.slideInfo[n].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[n].faces[1],f.tc),f.Kb(2),f.kc("button",!i.showFeedback())("ngClass",f.oc(22,yt,i.showFeedback()&&i.slideInfo[n].faces[2]!=i.slideInfo[n].correctFace&&i.slideInfo[n].faces[2]==i.slideInfo[n].selectedFace,i.showFeedback()&&i.slideInfo[n].faces[2]!=i.slideInfo[n].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[n].faces[2],f.tc),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(25,yt,i.showFeedback()&&i.slideInfo[n].faces[3]!=i.slideInfo[n].correctFace&&i.slideInfo[n].faces[3]==i.slideInfo[n].selectedFace,i.showFeedback()&&i.slideInfo[n].faces[3]!=i.slideInfo[n].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[n].faces[3],f.tc),f.Kb(1),f.kc("@fadeFooter",i.showFeedback()?"visible":"invisible")}}function Et(e,t){if(1&e&&(f.Xb(0,"ion-slide"),f.vc(1,St,10,5,"div",12),f.vc(2,Ct,19,28,"div",13),f.Wb()),2&e){var s=t.index,n=f.hc();f.Kb(1),f.kc("ngIf",n.firstStage(s)),f.Kb(1),f.kc("ngIf",!n.firstStage(s))}}var Tt,Rt=function(e,t,s){return{default:e,success:t,failure:s}},Ft=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),Wt=((Tt=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=Ft,this.numberOfOptions=4,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=3}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.changeScore=Object(R.h)(),this.taskLength=this.facePaths.length,this.slideInfo=[];for(var e=0;e<this.taskLength;e++)this.slideInfo.push({correctFace:this.facePaths[e],selectedFace:null,faces:this.getSlideFaces(e),stage:Ft.START})}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"selectFace",value:function(e){this.slideInfo[this.currentSlide].stage==Ft.SELECT&&(this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=Ft.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=Ft.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0))}},{key:"getSlideFaces",value:function(e){for(var t=[],s=0;s<this.numberOfOptions-1;s++){for(var n=Math.floor(Math.random()*this.taskLength);t.indexOf(this.facePaths[n])>-1||this.facePaths[n]==this.facePaths[e];)n=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[n])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.facePaths[e]),t}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=Ft.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(y(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.slideInfo[this.currentSlide].stage=Ft.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.slideInfo[e.currentSlide].stage=Ft.SELECT}))}},{key:"firstStage",value:function(e){return this.slideInfo[e].stage==Ft.START||this.slideInfo[e].stage==Ft.MEMORIZE||this.slideInfo[e].stage==Ft.MASK}},{key:"getSrc",value:function(e){return this.slideInfo[e].stage==Ft.MEMORIZE?this.slideInfo[e].correctFace:this.slideInfo[e].stage==Ft.MASK?this.mask:null}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==Ft.CORRECT||this.slideInfo[this.currentSlide].stage==Ft.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,e.t2=e.t0>e.t1,!e.t2){e.next=14;break}return e.next=8,this.slideElement.getActiveIndex();case 8:return this.currentSlide=e.sent,e.next=11,this.slideElement.lockSwipes(!0);case 11:return e.next=13,this.changeScore.stop();case 13:this.scoreCardDisplayed()||this.startMemorizeTimer();case 14:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Tt)},Tt.\u0275cmp=f.Ob({type:Tt,selectors:[["app-forced-choice"]],viewQuery:function(e,t){var s;1&e&&f.Bc(dt,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],["class","flex-slide","style","align-items: center",4,"ngIf"],["class","flex-slide",4,"ngIf"],[1,"flex-slide",2,"align-items","center"],["class","prompt",4,"ngIf"],[2,"height","310px","width","270px","display","flex","justify-content","center","align-items","center","background-color","gainsboro"],["style","height: 270px",3,"src","ngStyle",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[1,"prompt"],[1,"time-left"],[2,"height","270px",3,"src","ngStyle"],[1,"flex-slide"],[1,"grid-card",3,"button","ngClass","click"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,ut,6,2,"span",2),f.vc(3,bt,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(6,Et,3,2,"ion-slide",6),f.Xb(7,"ion-slide"),f.Xb(8,"app-score-page",7),f.fc("finished",(function(){return t.finished.emit([t.score,2])})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(8,Rt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!0))},directives:[n.j,c.h,n.u,c.j,n.B,c.i,n.A,V,n.g,n.o,n.p,n.m,c.k],styles:[""],data:{animation:[Object(X.k)("fadeInOut",[Object(X.h)("visible",Object(X.i)({opacity:.9})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)(":enter",[Object(X.e)(500)]),Object(X.j)(":leave",[Object(X.e)(500)])]),Object(X.k)("countdown",[Object(X.j)("active <=> inactive",[Object(X.e)(200,Object(X.f)([Object(X.i)({transform:"translateY(0%)",opacity:"1"}),Object(X.i)({transform:"translateY(75%)",opacity:"0"}),Object(X.i)({transform:"translateY(-75%)",opacity:"0"}),Object(X.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(X.k)("fadeFooter",[Object(X.h)("visible",Object(X.i)({opacity:.75})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)("invisible => visible",[Object(X.e)(1500,Object(X.f)([Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:".75"})]))]),Object(X.j)("visible => invisible",[Object(X.e)(200)])])]}}),Tt),xt=["slideElement"];function jt(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",8),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",9),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var s=f.hc();f.Kb(3),f.zc("Score: ",s.score,"/",s.progressPercent*s.taskLength,"")}}function Xt(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",10),f.fc("click",(function(){return f.sc(s),f.hc().startMemorizeTimer()})),f.Xb(1,"div",11),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var n=f.hc();f.kc("@fadeInOut",n.slideInfo[n.currentSlide].stage==n.Stage.START?"visible":"invisible")}}function Mt(e,t){if(1&e&&(f.Xb(0,"div",18),f.wc(1),f.Wb()),2&e){var s=f.hc(2);f.Kb(1),f.yc("Memorize the face: ",s.memorizeTime,"")}}function Kt(e,t){if(1&e&&(f.Xb(0,"div",18),f.wc(1,"Memorize the face: "),f.Xb(2,"span",19),f.wc(3),f.Wb(),f.Wb()),2&e){var s=f.hc(2);f.Kb(2),f.kc("@countdown",s.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(s.timeRemaining)}}function At(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Hold the face in your mind..."),f.Wb())}function Pt(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Is this the same person?"),f.Wb())}function Lt(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Correct!"),f.Wb())}function Nt(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Incorrect!"),f.Wb())}function _t(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",24),f.fc("click",(function(){return f.sc(s),f.hc(3).selectFace(!0)})),f.Wb()}}var Yt=function(e){return{width:e}};function Dt(e,t){if(1&e&&f.Vb(0,"img",25),2&e){var s=f.hc(2).index,n=f.hc();f.kc("src",n.getSrc(s),f.tc)("ngStyle",f.nc(2,Yt,n.slideInfo[s].stage==n.Stage.MASK?"85%":"auto"))}}function zt(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",26),f.fc("click",(function(){return f.sc(s),f.hc(3).selectFace(!1)})),f.Wb()}}function Vt(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-card",20),f.fc("pan",(function(e){return f.sc(s),f.hc(2).drag(e)}))("panend",(function(e){return f.sc(s),f.hc(2).returnCenter(e)})),f.vc(1,_t,1,0,"ion-icon",21),f.vc(2,Dt,1,4,"img",22),f.vc(3,zt,1,0,"ion-icon",23),f.Wb()}if(2&e){var n=f.hc().index,i=f.hc();f.kc("@swipeCard",1==i.slideInfo[n].selection?"left":"right")("@flipCard",i.slideInfo[n].stage==i.Stage.MASK?"back":"front"),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage!=i.Stage.START),f.Kb(1),f.kc("ngIf",i.slideInfo[n].stage==i.Stage.SELECT)}}function Ht(e,t){1&e&&(f.Xb(0,"div",31),f.wc(1,"Same"),f.Wb())}function Bt(e,t){1&e&&(f.Xb(0,"div",31),f.wc(1,"Different"),f.Wb())}function Ut(e,t){if(1&e&&(f.Xb(0,"div",27),f.vc(1,Ht,2,0,"div",28),f.vc(2,Bt,2,0,"div",28),f.Xb(3,"div"),f.Xb(4,"ion-card",29),f.Vb(5,"img",30),f.Wb(),f.Xb(6,"ion-card",29),f.Vb(7,"img",30),f.Wb(),f.Wb(),f.Wb()),2&e){var s=f.hc().index,n=f.hc();f.Kb(1),f.kc("ngIf",n.slideInfo[s].correctFace==n.slideInfo[s].displayedFace),f.Kb(1),f.kc("ngIf",n.slideInfo[s].correctFace!=n.slideInfo[s].displayedFace),f.Kb(3),f.kc("src",n.slideInfo[s].correctFace,f.tc),f.Kb(2),f.kc("src",n.slideInfo[s].displayedFace,f.tc)}}function Zt(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",32),f.Xb(1,"ion-button",33),f.fc("click",(function(){return f.sc(s),f.hc(2).selectFace(!0)})),f.wc(2,"Same"),f.Wb(),f.Xb(3,"ion-button",34),f.fc("click",(function(){return f.sc(s),f.hc(2).selectFace(!1)})),f.wc(4,"Different"),f.Wb(),f.Wb()}if(2&e){var n=f.hc().index,i=f.hc();f.kc("@fadeFooter",i.slideInfo[n].stage==i.Stage.SELECT?"sameDifferent":"invisible")}}function Gt(e,t){if(1&e&&(f.Xb(0,"ion-item",35),f.Xb(1,"ion-label"),f.wc(2,"Swipe to Continue"),f.Wb(),f.Vb(3,"ion-icon",36),f.Wb()),2&e){var s=f.hc(2);f.kc("@fadeFooter",s.showFeedback()?"visible":"invisible")}}function qt(e,t){if(1&e&&(f.Xb(0,"ion-slide",12),f.vc(1,Mt,2,1,"div",13),f.vc(2,Kt,4,2,"div",13),f.vc(3,At,2,0,"div",13),f.vc(4,Pt,2,0,"div",13),f.vc(5,Lt,2,0,"div",13),f.vc(6,Nt,2,0,"div",13),f.vc(7,Vt,4,5,"ion-card",14),f.vc(8,Ut,8,4,"div",15),f.vc(9,Zt,5,1,"div",16),f.vc(10,Gt,4,1,"ion-item",17),f.Wb()),2&e){var s=t.index,n=f.hc();f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.START),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.MASK),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.SELECT),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.CORRECT),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.INCORRECT),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage!=n.Stage.CORRECT&&n.slideInfo[s].stage!=n.Stage.INCORRECT),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.CORRECT||n.slideInfo[s].stage==n.Stage.INCORRECT),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage==n.Stage.SELECT),f.Kb(1),f.kc("ngIf",n.slideInfo[s].stage!=n.Stage.SELECT)}}var Jt,Qt=function(e,t,s){return{default:e,success:t,failure:s}},$t=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),es=((Jt=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=$t,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=3}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.changeScore=Object(R.h)(),this.taskLength=this.facePaths.length,this.slideInfo=[];for(var e=0;e<this.taskLength;e++){var t=this.facePaths[e];Math.random()>.5&&(t=this.facePaths[Math.floor(Math.random()*this.taskLength)]),this.slideInfo.push({correctFace:this.facePaths[e],displayedFace:t,selection:null,stage:$t.START})}}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"selectFace",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.slideInfo[this.currentSlide].stage==$t.SELECT&&(this.slideInfo[this.currentSlide].selection=e,this.timer=Object(o.a)(10).subscribe((function(){e==(s.slideInfo[s.currentSlide].displayedFace==s.slideInfo[s.currentSlide].correctFace)?(s.score++,s.slideInfo[s.currentSlide].stage=$t.CORRECT,s.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),s.changeScore.play()):s.slideInfo[s.currentSlide].stage=$t.INCORRECT,s.progressPercent=(s.currentSlide+1)/s.taskLength,s.slideElement.lockSwipes(!1),s.slideElement.lockSwipeToPrev(!0)})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=$t.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(y(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.slideInfo[this.currentSlide].stage=$t.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.slideInfo[e.currentSlide].stage=$t.SELECT}))}},{key:"getSrc",value:function(e){return this.slideInfo[e].stage==$t.MEMORIZE?this.slideInfo[e].correctFace:this.slideInfo[e].stage==$t.MASK?this.mask:this.slideInfo[e].displayedFace}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==$t.CORRECT||this.slideInfo[this.currentSlide].stage==$t.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,e.t2=e.t0>e.t1,!e.t2){e.next=14;break}return e.next=8,this.slideElement.getActiveIndex();case 8:return this.currentSlide=e.sent,e.next=11,this.slideElement.lockSwipes(!0);case 11:return e.next=13,this.changeScore.stop();case 13:this.scoreCardDisplayed()||this.startMemorizeTimer();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"drag",value:function(e){this.slideInfo[this.currentSlide].stage==$t.SELECT&&Array.from(document.getElementsByClassName("swipe-card"))[0].setAttribute("style","transform: translateX(".concat(e.deltaX,"px) translateY(-").concat(Math.abs(e.deltaX/2),"px) rotate(").concat(e.deltaX/3,"deg)"))}},{key:"returnCenter",value:function(e){Math.abs(e.velocityX)>.5?e.velocityX<0?(this.slideInfo[this.currentSlide].selection=!0,this.selectFace(!0)):(this.slideInfo[this.currentSlide].selection=!1,this.selectFace(!1)):Array.from(document.getElementsByClassName("swipe-card"))[0].setAttribute("style","transform: translateX(0px) transform: translateY(0px) transform: rotate(0px)")}}]),e}()).\u0275fac=function(e){return new(e||Jt)},Jt.\u0275cmp=f.Ob({type:Jt,selectors:[["app-same-different"]],viewQuery:function(e,t){var s;1&e&&f.Bc(xt,!0),2&e&&f.qc(s=f.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],["class","flex-slide",4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"flex-slide"],["class","prompt",4,"ngIf"],["class","swipe-card",3,"pan","panend",4,"ngIf"],["style","width: 100%; display: flex; flex-direction: column; justify-content: center",4,"ngIf"],["class","swipe-footer",4,"ngIf"],["class","footer","lines","none",4,"ngIf"],[1,"prompt"],[1,"time-left"],[1,"swipe-card",3,"pan","panend"],["color","dark","name","arrow-back","style","font-size: 150%",3,"click",4,"ngIf"],["style","height: 270px",3,"src","ngStyle",4,"ngIf"],["color","dark","name","arrow-forward","style","font-size: 150%",3,"click",4,"ngIf"],["color","dark","name","arrow-back",2,"font-size","150%",3,"click"],[2,"height","270px",3,"src","ngStyle"],["color","dark","name","arrow-forward",2,"font-size","150%",3,"click"],[2,"width","100%","display","flex","flex-direction","column","justify-content","center"],["class","subheader",4,"ngIf"],[1,"grid-card",2,"--background","gainsboro"],[3,"src"],[1,"subheader"],[1,"swipe-footer"],["color","primary",3,"click"],["color","secondary",3,"click"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,jt,6,2,"span",2),f.vc(3,Xt,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(6,qt,11,10,"ion-slide",6),f.Xb(7,"ion-slide"),f.Xb(8,"app-score-page",7),f.fc("finished",(function(){return t.finished.emit([t.score,2])})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(8,Qt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!0))},directives:[n.j,c.h,n.u,c.j,n.B,c.i,n.A,V,n.g,n.m,c.k,n.e,n.o,n.p],styles:[".swipe-card[_ngcontent-%COMP%]{background-color:#dcdcdc;height:310px;width:270px;display:flex;justify-content:space-evenly;align-items:center}.swipe-footer[_ngcontent-%COMP%]{opacity:0;--background:grey;width:100%}.sliding[_ngcontent-%COMP%]{position:absolute;z-index:21;height:600px}"],data:{animation:[Object(X.k)("fadeInOut",[Object(X.h)("visible",Object(X.i)({opacity:.9})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)(":enter",[Object(X.e)(500)]),Object(X.j)(":leave",[Object(X.e)(500)])]),Object(X.k)("countdown",[Object(X.j)("active <=> inactive",[Object(X.e)(200,Object(X.f)([Object(X.i)({transform:"translateY(0%)",opacity:"1"}),Object(X.i)({transform:"translateY(75%)",opacity:"0"}),Object(X.i)({transform:"translateY(-75%)",opacity:"0"}),Object(X.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(X.k)("fadeFooter",[Object(X.h)("visible",Object(X.i)({opacity:.75})),Object(X.h)("sameDifferent",Object(X.i)({opacity:1})),Object(X.h)("invisible",Object(X.i)({opacity:0})),Object(X.j)("void => visible",[Object(X.e)(1500,Object(X.f)([Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:"0"}),Object(X.i)({opacity:".75"})]))]),Object(X.j)("void => sameDifferent",[Object(X.e)(500)]),Object(X.j)("visible => invisible",[Object(X.e)(200)])]),Object(X.k)("swipeCard",[Object(X.j)("right => void",[Object(X.e)(200,Object(X.f)([Object(X.i)({transform:"*",position:"absolute",zIndex:"21"}),Object(X.i)({transform:"translateY(-50%) translateX(100%) rotate(100deg)",position:"absolute",zIndex:"21"})]))]),Object(X.j)("left => void",[Object(X.e)(200,Object(X.f)([Object(X.i)({transform:"*",position:"absolute",zIndex:"21"}),Object(X.i)({transform:"translateY(-50%) translateX(-100%) rotate(-100deg)",position:"absolute",zIndex:"21"})]))])]),Object(X.k)("flipCard",[Object(X.j)("front <=> back",[Object(X.e)(500,Object(X.f)([Object(X.i)({transform:"rotateY(0deg)"}),Object(X.i)({transform:"rotateY(180deg)"})]))])])]}}),Jt);function ts(e,t){1&e&&(f.Xb(0,"ion-buttons",12),f.Vb(1,"ion-menu-button",13),f.Wb())}function ss(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",14),f.fc("click",(function(){return f.sc(s),f.hc().taskExitAlert()})),f.Wb()}}function ns(e,t){if(1&e){var s=f.Yb();f.Xb(0,"ion-icon",15),f.fc("click",(function(){return f.sc(s),f.hc().getHelp(!1)})),f.Wb()}}function is(e,t){1&e&&(f.Xb(0,"div",16),f.Vb(1,"ion-spinner",17),f.Wb())}function cs(e,t){if(1&e&&(f.Xb(0,"div"),f.Xb(1,"div",25),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"Are you ready to train?"),f.Wb(),f.Wb()),2&e){var s=f.hc(3);f.Kb(3),f.yc("Level ",s.userLevel,"")}}function rs(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",27),f.Xb(2,"b"),f.wc(3,"Pre-Assessment"),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"It looks like you're new, are you ready to begin your pretest?"),f.Wb(),f.Wb())}function as(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",27),f.Xb(2,"b"),f.wc(3,"Post-Assessment"),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"It looks like you've completed all eight levels, are you ready to begin your post-test?"),f.Wb(),f.Wb())}function os(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",22),f.vc(1,cs,6,1,"div",23),f.vc(2,rs,6,0,"div",23),f.vc(3,as,6,0,"div",23),f.Vb(4,"br"),f.Xb(5,"ion-button",24),f.fc("click",(function(){return f.sc(s),f.hc(2).clickStart()})),f.wc(6,"Start"),f.Wb(),f.Wb()}if(2&e){var n=f.hc(2);f.Kb(1),f.kc("ngIf",n.userLevel>0&&n.userLevel<9),f.Kb(1),f.kc("ngIf",0==n.userLevel),f.Kb(1),f.kc("ngIf",9==n.userLevel)}}function ls(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.zc(": ",s.scores[s.Task.NAME_FACE],"/",s.taskLengths[s.Task.NAME_FACE],"")}}function fs(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.zc(": ",s.scores[s.Task.WHOS_NEW],"/",s.taskLengths[s.Task.WHOS_NEW],"")}}function hs(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.zc(": ",s.scores[s.Task.MEMORY],"/",s.taskLengths[s.Task.MEMORY],"")}}function ds(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.zc(": ",s.scores[s.Task.SHUFFLE],"/",s.taskLengths[s.Task.SHUFFLE],"")}}var us=function(e,t){return{"task-done":e,"task-failed":t}};function bs(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.wc(2,"What would you like to do next?"),f.Wb(),f.Xb(3,"ion-card",30),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return-1==e.scores[e.Task.NAME_FACE]&&e.renderLevelOneHelp(),e.task=e.Task.NAME_FACE})),f.Vb(4,"ion-icon",31),f.Xb(5,"div"),f.wc(6,"Name and Face"),f.vc(7,ls,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(8,"ion-card",30),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return-1==e.scores[e.Task.WHOS_NEW]&&e.renderLevelOneHelp(),e.task=e.Task.WHOS_NEW})),f.Vb(9,"ion-icon",32),f.Xb(10,"div"),f.wc(11,"Who's New"),f.vc(12,fs,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(13,"ion-card",30),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return-1==e.scores[e.Task.MEMORY]&&e.renderLevelOneHelp(),e.task=e.Task.MEMORY})),f.Vb(14,"ion-icon",33),f.Xb(15,"div"),f.wc(16,"Memory Match"),f.vc(17,hs,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(18,"ion-card",30),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return-1==e.scores[e.Task.SHUFFLE]&&e.renderLevelOneHelp(),e.task=e.Task.SHUFFLE})),f.Vb(19,"ion-icon",34),f.Xb(20,"div"),f.wc(21,"Shuffle"),f.vc(22,ds,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(23,"ion-button",35),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return e.task=e.Task.LEARNING})),f.Vb(24,"ion-icon",36),f.wc(25," \xa0 "),f.Vb(26,"ion-icon",36),f.Wb(),f.Xb(27,"ion-button",37),f.fc("click",(function(){return f.sc(s),f.hc(2).startAssessmentAlert()})),f.Vb(28,"ion-icon",36),f.Wb(),f.Wb()}if(2&e){var n=f.hc(2);f.Kb(3),f.kc("ngClass",f.oc(12,us,n.scores[n.Task.NAME_FACE]>=n.taskLengths[n.Task.NAME_FACE]*n.minTrainScore,n.scores[n.Task.NAME_FACE]>-1&&n.scores[n.Task.NAME_FACE]<n.taskLengths[n.Task.NAME_FACE]*n.minTrainScore)),f.Kb(4),f.kc("ngIf",n.scores[n.Task.NAME_FACE]>-1),f.Kb(1),f.kc("ngClass",f.oc(15,us,n.scores[n.Task.WHOS_NEW]>=n.taskLengths[n.Task.WHOS_NEW]*n.minTrainScore,n.scores[n.Task.WHOS_NEW]>-1&&n.scores[n.Task.WHOS_NEW]<n.taskLengths[n.Task.WHOS_NEW]*n.minTrainScore)),f.Kb(4),f.kc("ngIf",n.scores[n.Task.WHOS_NEW]>-1),f.Kb(1),f.kc("ngClass",f.oc(18,us,n.scores[n.Task.MEMORY]>=n.taskLengths[n.Task.MEMORY]*n.minTrainScore,n.scores[n.Task.MEMORY]>-1&&n.scores[n.Task.MEMORY]<n.taskLengths[n.Task.MEMORY]*n.minTrainScore)),f.Kb(4),f.kc("ngIf",n.scores[n.Task.MEMORY]>-1),f.Kb(1),f.kc("ngClass",f.oc(21,us,n.scores[n.Task.SHUFFLE]>=n.taskLengths[n.Task.SHUFFLE]*n.minTrainScore,n.scores[n.Task.SHUFFLE]>-1&&n.scores[n.Task.SHUFFLE]<n.taskLengths[n.Task.SHUFFLE]*n.minTrainScore)),f.Kb(4),f.kc("ngIf",n.scores[n.Task.SHUFFLE]>-1),f.Kb(2),f.kc("src",n.replay_icon),f.Kb(2),f.kc("src",n.face_icon),f.Kb(1),f.kc("disabled",n.trainingNotDone()),f.Kb(1),f.kc("src",n.assessment_icon)}}function gs(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.zc(": ",s.scores[s.Task.FORCED_CHOICE],"/",s.taskLengths[s.Task.FORCED_CHOICE],"")}}function vs(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var s=f.hc(3);f.Kb(1),f.zc(": ",s.scores[s.Task.SAME_DIFFERENT],"/",s.taskLengths[s.Task.SAME_DIFFERENT],"")}}var ms=function(e){return{"task-done":e}};function ps(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.wc(2,"What would you like to do next?"),f.Wb(),f.Xb(3,"ion-card",30),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return-1==e.scores[4]&&(e.task=e.Task.FORCED_CHOICE),e.renderLevelOneHelp()})),f.Vb(4,"ion-icon",38),f.Xb(5,"div"),f.wc(6,"Forced Choice"),f.vc(7,gs,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(8,"ion-card",30),f.fc("click",(function(){f.sc(s);var e=f.hc(2);return-1==e.scores[5]&&(e.task=e.Task.SAME_DIFFERENT),e.renderLevelOneHelp()})),f.Vb(9,"ion-icon",39),f.Xb(10,"div"),f.wc(11,"Same Different"),f.vc(12,vs,2,2,"span",23),f.Wb(),f.Wb(),f.Wb()}if(2&e){var n=f.hc(2);f.Kb(3),f.kc("ngClass",f.nc(4,ms,-1!=n.scores[4])),f.Kb(4),f.kc("ngIf",n.scores[4]>-1),f.Kb(1),f.kc("ngClass",f.nc(6,ms,-1!=n.scores[5])),f.Kb(4),f.kc("ngIf",n.scores[5]>-1)}}function ks(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div"),f.Xb(1,"div",26),f.wc(2,"You've entered level 1! Tap to begin your training."),f.Wb(),f.Xb(3,"ion-button",24),f.fc("click",(function(){return f.sc(s),f.hc(4).initCurrentLevel()})),f.wc(4,"Train"),f.Wb(),f.Wb()}2&e&&f.kc("@fadeIn",void 0)}function Ss(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",26),f.wc(2,"You've moved on to the next level! Come back tomorrow for your next training."),f.Wb(),f.Xb(3,"ion-button",46),f.wc(4,"Home"),f.Wb(),f.Wb()),2&e&&f.kc("@fadeIn",void 0)}function Os(e,t){if(1&e){var s=f.Yb();f.Xb(0,"div"),f.Xb(1,"div",26),f.wc(2,"You've completed all eight levels! Now it's time for your post-assessment."),f.Wb(),f.Xb(3,"ion-button",24),f.fc("click",(function(){return f.sc(s),f.hc(4).initCurrentLevel()})),f.wc(4,"Post-Assessment"),f.Wb(),f.Wb()}2&e&&f.kc("@fadeIn",void 0)}function Is(e,t){if(1&e&&(f.Xb(0,"div",42),f.Xb(1,"div",25),f.Xb(2,"b"),f.wc(3,"Finished!"),f.Wb(),f.Wb(),f.Vb(4,"ion-progress-bar",43),f.Xb(5,"div",44),f.wc(6,"Level "),f.Xb(7,"span",45),f.wc(8),f.Wb(),f.Wb(),f.vc(9,ks,5,1,"div",23),f.vc(10,Ss,5,1,"div",23),f.vc(11,Os,5,1,"div",23),f.Wb()),2&e){var s=f.hc(3);f.Kb(4),f.lc("value",s.progress),f.Kb(4),f.xc(s.userLevel),f.Kb(1),f.kc("ngIf",1==s.userLevel),f.Kb(1),f.kc("ngIf",s.userLevel>0&&s.userLevel<9),f.Kb(1),f.kc("ngIf",9==s.userLevel)}}function ws(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",25),f.Xb(2,"b"),f.wc(3,"You're all done."),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"Since you've completed all eight levels and the post assessment, you don't have anything else to do! Thank you for your participation in this research."),f.Wb(),f.Xb(6,"ion-button",46),f.wc(7,"Home"),f.Wb(),f.Wb())}function ys(e,t){if(1&e&&(f.Xb(0,"div",40),f.vc(1,Is,12,5,"div",41),f.vc(2,ws,8,0,"div",23),f.Wb()),2&e){var s=f.hc(2);f.Kb(1),f.kc("ngIf",s.userLevel<=9),f.Kb(1),f.kc("ngIf",s.userLevel>9)}}function Cs(e,t){if(1&e&&(f.Xb(0,"div",18),f.vc(1,os,7,3,"div",19),f.vc(2,bs,29,24,"div",20),f.vc(3,ps,13,8,"div",20),f.vc(4,ys,3,2,"div",21),f.Wb()),2&e){var s=f.hc();f.Kb(1),f.kc("ngIf",s.stage==s.Stage.START),f.Kb(1),f.kc("ngIf",s.stage==s.Stage.TRAINING),f.Kb(1),f.kc("ngIf",s.stage==s.Stage.ASSESSMENT),f.Kb(1),f.kc("ngIf",s.stage==s.Stage.DONE)}}function Es(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-learning-task",47),f.fc("finished",(function(){f.sc(s);var e=f.hc();return e.learningDone=!0,e.iterateStage()})),f.Wb()}if(2&e){var n=f.hc();f.kc("setNames",n.setNames)("facePaths",n.trainingFacePaths)}}function Ts(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-name-face",47),f.fc("finished",(function(e){return f.sc(s),f.hc().finished(e,0)})),f.Wb()}if(2&e){var n=f.hc();f.kc("setNames",n.setNames)("facePaths",n.trainingFacePaths)}}function Rs(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-whos-new",48),f.fc("finished",(function(e){return f.sc(s),f.hc().finished(e,1)})),f.Wb()}if(2&e){var n=f.hc();f.kc("facePaths",n.trainingFacePaths)("newFacePaths",n.whosNewFacePaths)}}function Fs(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-memory-match",49),f.fc("finished",(function(e){return f.sc(s),f.hc().finished(e,2)})),f.Wb()}if(2&e){var n=f.hc();f.kc("facePaths",n.trainingFacePaths)}}function Ws(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-shuffle",49),f.fc("finished",(function(e){return f.sc(s),f.hc().finished(e,3)})),f.Wb()}if(2&e){var n=f.hc();f.kc("facePaths",n.trainingFacePaths)}}function xs(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-forced-choice",49),f.fc("finished",(function(e){return f.sc(s),f.hc().finished(e,4)})),f.Wb()}if(2&e){var n=f.hc();f.kc("facePaths",n.assessmentFacePaths)}}function js(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-same-different",49),f.fc("finished",(function(e){return f.sc(s),f.hc().finished(e,5)})),f.Wb()}if(2&e){var n=f.hc();f.kc("facePaths",n.assessmentFacePaths)}}function Xs(e,t){if(1&e){var s=f.Yb();f.Xb(0,"app-same-different",49),f.fc("finished",(function(e){return f.sc(s),f.hc().finishPrePost(e)})),f.Wb()}if(2&e){var n=f.hc();f.kc("facePaths",n.assessmentFacePaths)}}var Ms,Ks,As=function(e){return{"blue-border":e}},Ps=function(e){return e[e.BLACK=0]="BLACK",e[e.ASIAN=1]="ASIAN",e}({}),Ls=function(e){return e[e.START=0]="START",e[e.TRAINING=1]="TRAINING",e[e.ASSESSMENT=2]="ASSESSMENT",e[e.DONE=3]="DONE",e}({}),Ns=function(e){return e[e.NAME_FACE=0]="NAME_FACE",e[e.WHOS_NEW=1]="WHOS_NEW",e[e.MEMORY=2]="MEMORY",e[e.SHUFFLE=3]="SHUFFLE",e[e.FORCED_CHOICE=4]="FORCED_CHOICE",e[e.SAME_DIFFERENT=5]="SAME_DIFFERENT",e[e.PRETEST=6]="PRETEST",e[e.POSTTEST=7]="POSTTEST",e[e.LEARNING=8]="LEARNING",e}({}),_s={0:{race:Ps.BLACK,namePool:{1:["James","John","Robert","Michael","Will","David","Richard","Joseph"],2:["Thomas","Charlie","Chris","Daniel","Matthew","Anthony","Don","Mark"],3:["Paul","Steven","Andrew","Ken","Joshua","George","Kevin","Brian"],4:["Edward","Ron","Tim","Jason","Jeff","Ryan","Jacob","Gary"],5:["Nick","Eric","Stephen","Jonathan","Larry","Justin","Scott","Brandon"],6:["Frank","Ben","Greg","Sam","Ray","Patrick","Alex","Jack"],7:["Dennis","Jerry","Tyler","Aaron","Jose","Henry","Doug","Adam"],8:["Peter","Nathan","Zach","Walter","Kyle","Harry","Carl","Jeremy"]}}},Ys=((Ks=function(){function e(t,s,n,i,c,r,a,o){_classCallCheck(this,e),this.alertController=t,this.modalController=s,this.routerOutlet=n,this.getProgress=i,this.submitScores=c,this.toastController=r,this.localNotifications=a,this.http=o,this.Race=Ps,this.Stage=Ls,this.Task=Ns,this.stage=null,this.task=null,this.learningDone=!1,this.scores=[-1,-1,-1,-1,-1,-1],this.minTrainScore=.75,this.taskLengths=[8,8,32,16,8,8],this.numFaces=8,this.assessmentPoolSize=30,this.assessment_icon="assets/icon/assessment.svg",this.replay_icon="assets/icon/replay.svg",this.face_icon="assets/icon/face.svg",this.routerOutlet.swipeGesture=!1}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.stage=null,this.task=null,Object(o.a)(500).subscribe((function(){e.currentRace=Ps.BLACK,e.initCurrentLevel()}))}},{key:"ngAfterViewInit",value:function(){var e=this;0==this.userLevel&&Object(o.a)(500).subscribe((function(){e.getHelp(!0)}))}},{key:"initCurrentLevel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ps.BLACK;this.currentRace=t,this.getProgress.getData().subscribe((function(t){var s=t.days;e.userLevel=t.level;var n=!1;if(0==e.userLevel||9==e.userLevel)e.getPrePostAssessmentFaces().then((function(t){e.assessmentFacePaths=t,Object(o.a)(1e3).subscribe((function(){e.stage=Ls.START}))}));else if(e.userLevel>0&&e.userLevel<9){var i=(new Date).toLocaleDateString(),c="";for(var r in s)[s[r].nameface,s[r].whosnew,s[r].memory,s[r].shuffle,s[r].forcedchoice,s[r].samedifferent].indexOf(-1)<0&&(c=new Date(s[r].date).toLocaleDateString());i==c&&(n=!0),n?(e.userLevel--,e.finishLevel()):(e.setNames=_s[e.currentRace].namePool[e.userLevel],e.getTrainingFaces().then((function(t){e.trainingFacePaths=t,e.getWhosNewFaces().then((function(t){e.whosNewFacePaths=t,e.getDailyAssessmentFaces().then((function(t){e.assessmentFacePaths=t,s[e.userLevel-1]&&(e.scores=[s[e.userLevel-1].nameface,s[e.userLevel-1].whosnew,s[e.userLevel-1].memory,s[e.userLevel-1].shuffle,s[e.userLevel-1].forcedchoice,s[e.userLevel-1].samedifferent],e.learningDone=e.scores.indexOf(-1)>-1),Object(o.a)(1e3).subscribe((function(){e.iterateStage()}))}))}))})))}else e.stage=Ls.DONE;var a=[];a.push(new Image),a[a.length-1].src="assets/background_imgs/mask1.png"}),(function(t){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"Something went wrong. Please try logging out and back in",color:"danger",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}))}},{key:"iterateStage",value:function(){this.task=null,this.learningDone?this.trainingNotDone()?(this.stage=Ls.TRAINING,-1==this.scores[Ns.NAME_FACE]&&-1==this.scores[Ns.WHOS_NEW]&&-1==this.scores[Ns.MEMORY]&&-1==this.scores[Ns.SAME_DIFFERENT]&&this.renderLevelOneHelp()):this.scores.includes(-1)?(this.stage=Ls.ASSESSMENT,-1==this.scores[Ns.FORCED_CHOICE]&&-1==this.scores[Ns.SAME_DIFFERENT]&&this.renderLevelOneHelp()):(this.finishLevel(),this.scheduleNotification()):this.stage=Ls.START}},{key:"getTitle",value:function(){switch(this.task){case null:switch(this.stage){case Ls.START:return"Start";case Ls.TRAINING:return"Training Tasks";case Ls.ASSESSMENT:return"Assessment Tasks";case Ls.DONE:return"Finish";default:return"Modules"}case Ns.LEARNING:return"Meet Today's Faces";case Ns.NAME_FACE:return"Name and Face";case Ns.WHOS_NEW:return"Who's New?";case Ns.MEMORY:return"Memory Match";case Ns.SHUFFLE:return"Shuffle";case Ns.FORCED_CHOICE:return"Forced Choice";case Ns.SAME_DIFFERENT:return"Same-Different";case Ns.PRETEST:return"Pre-Assessment";case Ns.POSTTEST:return"Post-Assessment";default:return"Modules"}}},{key:"getHelp",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:O,componentProps:{paramTask:this.getTitle(),displayFirst:e}});case 2:return s=t.sent,t.next=5,s.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"renderLevelOneHelp",value:function(){var e=this;1==this.userLevel&&Object(o.a)(500).subscribe((function(){e.getHelp(!0)}))}},{key:"getTrainingFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s,n,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s=!0,n=0;case 2:if(!(n<8)){e.next=11;break}if(i=sessionStorage.getItem("training"+n)){e.next=7;break}return s=!1,e.abrupt("break",11);case 7:t.push(i);case 8:n++,e.next=2;break;case 11:if(s){e.next=16;break}return t=[],c={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=16,this.http.put("https://crossfacerecognition.herokuapp.com/getTrainingFaces/",{level:this.userLevel},c).subscribe((function(e){for(var s=0;s<8;s++)t.push("data:image/png;base64,"+e.images[s]),sessionStorage.setItem("training"+s,"data:image/png;base64,"+e.images[s])}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"getWhosNewFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=4,this.http.put("https://crossfacerecognition.herokuapp.com/getWhosNewFaces/",{level:this.userLevel},s).subscribe((function(e){for(var s=0;s<8;s++)t.push("data:image/png;base64,"+e.images[s])}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getDailyAssessmentFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s,n,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s=!0,n=0;case 2:if(!(n<8)){e.next=11;break}if(i=sessionStorage.getItem("dailyAssessment"+n)){e.next=7;break}return s=!1,e.abrupt("break",11);case 7:t.push(i);case 8:n++,e.next=2;break;case 11:if(s){e.next=16;break}return t=[],c={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=16,this.http.put("https://crossfacerecognition.herokuapp.com/getDailyAssessmentFaces/",{},c).subscribe((function(e){for(var s=0;s<8;s++)t.push("data:image/jpg;base64,"+e.images[s]),sessionStorage.setItem("dailyAssessment"+s,"data:image/jpg;base64,"+e.images[s])}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"getPrePostAssessmentFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s={headers:new W.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=4,this.http.put("https://crossfacerecognition.herokuapp.com/getPrePostAssessmentFaces/",{},s).subscribe((function(e){for(var s=0;s<30;s++)t.push("data:image/jpg;base64,"+e.images[s])}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"finished",value:function(e,t){this.scores[t]=Math.max(e[0],this.scores[t]),0!=e[1]&&(this.task=1==e[1]?Ns.LEARNING:null,4!=t&&5!=t||this.iterateStage()),this.submitScores.submitTaskScores(this.userLevel,this.scores)}},{key:"finishPrePost",value:function(e){0==this.userLevel?this.submitScores.submitPreAssessment(e[0]):9==this.userLevel&&this.submitScores.submitPostAssessment(e[0]),this.finishLevel()}},{key:"taskExitAlert",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Quit",message:"Do you want to quit? Your progress on this task will be lost.",buttons:[{text:"Cancel"},{text:"Quit",handler:function(){Object(o.a)(500).subscribe((function(){s.task=null}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"startAssessmentAlert",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Assessment",message:"Do you want to move on to the assessment? You will not be able to come back to training today.",buttons:[{text:"Cancel"},{text:"Go",handler:function(){Object(o.a)(500).subscribe((function(){s.iterateStage()}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"clickStart",value:function(){var e=this;0==this.userLevel?(this.task=Ns.PRETEST,Object(o.a)(500).subscribe((function(){e.getHelp(!0)}))):9==this.userLevel?this.task=Ns.POSTTEST:this.userLevel>0&&this.userLevel<9&&(this.task=Ns.LEARNING,this.renderLevelOneHelp())}},{key:"finishLevel",value:function(){var e=this;this.stage=Ls.DONE;var t=this.task;this.task=null,t!=Ns.POSTTEST?(this.progress=0,Object(o.a)(1200).subscribe((function(){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userLevel++,t=Object(R.h)().addElement(document.querySelector(".level")).fill("none").duration(500).keyframes([{offset:0,transform:"scale(1, 1)"},{offset:.5,transform:"scale(2, 2)"},{offset:1,transform:"scale(1, 1)"}]),e.next=4,t.play();case 4:case"end":return e.stop()}}),e,this)})))})),Object(l.a)(100).pipe(y(Object(o.a)(1100))).subscribe((function(){e.progress+=.1}))):this.userLevel++}},{key:"trainingNotDone",value:function(){return this.scores[Ns.NAME_FACE]<this.taskLengths[Ns.NAME_FACE]*this.minTrainScore||this.scores[Ns.WHOS_NEW]<this.taskLengths[Ns.WHOS_NEW]*this.minTrainScore||this.scores[Ns.MEMORY]<this.taskLengths[Ns.MEMORY]*this.minTrainScore||this.scores[Ns.SHUFFLE]<this.taskLengths[Ns.SHUFFLE]*this.minTrainScore}},{key:"scheduleNotification",value:function(){var e=new Date;e.setMinutes(0),e.setSeconds(0),e.setHours(8),e.setDate(e.getDate()+1),this.localNotifications.schedule({id:1,text:"You're next training is now available!",foreground:!0,trigger:{at:e}})}}]),e}()).\u0275fac=function(e){return new(e||Ks)(f.Ub(n.a),f.Ub(n.I),f.Ub(n.w),f.Ub(F.a),f.Ub(x),f.Ub(n.P),f.Ub(j.a),f.Ub(W.a))},Ks.\u0275cmp=f.Ob({type:Ks,selectors:[["app-training"]],decls:46,vars:17,consts:[[2,"--background","gray","height","100%"],[3,"ngClass"],["slot","start",4,"ngIf"],["slot","start","color","medium","name","arrow-back","style","margin-left: 1vw; height: 3vh",3,"click",4,"ngIf"],["slot","end","color","medium","name","help-circle","style","margin-right: 1vw; height: 3vh",3,"click",4,"ngIf"],["style","height: 90%; display: flex; justify-content: center; align-items: center",4,"ngIf"],["style","color: white; text-align: center",4,"ngIf"],[3,"setNames","facePaths","finished",4,"ngIf"],[3,"facePaths","newFacePaths","finished",4,"ngIf"],[3,"facePaths","finished",4,"ngIf"],[2,"text-align","center"],[3,"click"],["slot","start"],["autoHide","false"],["slot","start","color","medium","name","arrow-back",2,"margin-left","1vw","height","3vh",3,"click"],["slot","end","color","medium","name","help-circle",2,"margin-right","1vw","height","3vh",3,"click"],[2,"height","90%","display","flex","justify-content","center","align-items","center"],["name","crescent","color","light"],[2,"color","white","text-align","center"],["style","margin-top: 50%",4,"ngIf"],["style","margin-top: 20px",4,"ngIf"],["style","margin-top: 40%",4,"ngIf"],[2,"margin-top","50%"],[4,"ngIf"],["color","success",3,"click"],[1,"header",2,"margin","5%"],[1,"subheader",2,"margin","5%"],[1,"header"],[2,"margin-top","20px"],[2,"font-size","6vw"],["button","",3,"ngClass","click"],["slot","start","name","happy",2,"font-size","300%"],["slot","start","name","person-add",2,"font-size","300%"],["slot","start","name","grid",2,"font-size","300%"],["slot","start","name","swap",2,"font-size","300%"],[2,"padding","0","margin","1%",3,"click"],[3,"src"],[2,"padding","0","margin","1%",3,"disabled","click"],["slot","start","name","checkmark-circle",2,"font-size","300%"],["slot","start","name","contacts",2,"font-size","300%"],[2,"margin-top","40%"],["style","display: flex; flex-direction: column; justify-content: center; align-items: center",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[2,"width","80%",3,"value"],[2,"margin-top","5%","font-size","4vh"],[1,"level"],["color","success","routerLink","/dashboard","routerDirection","forward"],[3,"setNames","facePaths","finished"],[3,"facePaths","newFacePaths","finished"],[3,"facePaths","finished"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Xb(1,"ion-header"),f.Xb(2,"ion-toolbar",1),f.Xb(3,"ion-title"),f.wc(4),f.Wb(),f.vc(5,ts,2,0,"ion-buttons",2),f.vc(6,ss,1,0,"ion-icon",3),f.vc(7,ns,1,0,"ion-icon",4),f.Wb(),f.Wb(),f.vc(8,is,2,0,"div",5),f.vc(9,Cs,5,4,"div",6),f.vc(10,Es,1,2,"app-learning-task",7),f.vc(11,Ts,1,2,"app-name-face",7),f.vc(12,Rs,1,2,"app-whos-new",8),f.vc(13,Fs,1,1,"app-memory-match",9),f.vc(14,Ws,1,1,"app-shuffle",9),f.vc(15,xs,1,1,"app-forced-choice",9),f.vc(16,js,1,1,"app-same-different",9),f.vc(17,Xs,1,1,"app-same-different",9),f.wc(18," For development only "),f.Xb(19,"div",10),f.Vb(20,"br"),f.Vb(21,"br"),f.Vb(22,"br"),f.Vb(23,"br"),f.Vb(24,"br"),f.Vb(25,"br"),f.Vb(26,"br"),f.Vb(27,"br"),f.Vb(28,"br"),f.Vb(29,"br"),f.Vb(30,"br"),f.Vb(31,"br"),f.Xb(32,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.LEARNING})),f.wc(33,"Learning"),f.Wb(),f.Xb(34,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.NAME_FACE})),f.wc(35,"Name and Face"),f.Wb(),f.Xb(36,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.WHOS_NEW})),f.wc(37,"Who's New"),f.Wb(),f.Xb(38,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.MEMORY})),f.wc(39,"Memory"),f.Wb(),f.Xb(40,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.SHUFFLE})),f.wc(41,"Shuffle"),f.Wb(),f.Xb(42,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.FORCED_CHOICE})),f.wc(43,"Forced Choice"),f.Wb(),f.Xb(44,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.SAME_DIFFERENT})),f.wc(45,"Same Different"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Kb(2),f.kc("ngClass",f.nc(15,As,null==t.task)),f.Kb(2),f.xc(t.getTitle()),f.Kb(1),f.kc("ngIf",null==t.task),f.Kb(1),f.kc("ngIf",null!=t.task&&t.task!=t.Task.FORCED_CHOICE&&t.task!=t.Task.SAME_DIFFERENT&&t.task!=t.Task.PRETEST&&t.task!=t.Task.POSTTEST),f.Kb(1),f.kc("ngIf",t.userLevel<=9),f.Kb(1),f.kc("ngIf",null==t.stage),f.Kb(1),f.kc("ngIf",null==t.task),f.Kb(1),f.kc("ngIf",t.task==t.Task.LEARNING),f.Kb(1),f.kc("ngIf",t.task==t.Task.NAME_FACE),f.Kb(1),f.kc("ngIf",t.task==t.Task.WHOS_NEW),f.Kb(1),f.kc("ngIf",t.task==t.Task.MEMORY),f.Kb(1),f.kc("ngIf",t.task==t.Task.SHUFFLE),f.Kb(1),f.kc("ngIf",t.task==t.Task.FORCED_CHOICE),f.Kb(1),f.kc("ngIf",t.task==t.Task.SAME_DIFFERENT),f.Kb(1),f.kc("ngIf",t.task==t.Task.PRETEST||t.task==t.Task.POSTTEST))},directives:[n.j,n.l,n.F,c.h,n.D,c.j,n.e,n.f,n.s,n.m,n.C,n.g,n.u,n.M,i.h,N,re,Oe,Ve,ht,Wt,es],styles:[".task-done[_ngcontent-%COMP%]{--background:#8ecf8e!important;color:#000}.task-failed[_ngcontent-%COMP%]{--background:#c98b8b!important;color:#000}.blue-border[_ngcontent-%COMP%]{border-bottom:solid #1e90ff}.fade-in[_ngcontent-%COMP%], .level[_ngcontent-%COMP%]{display:inline-block}.fade-in[_ngcontent-%COMP%]{opacity:0}ion-card[_ngcontent-%COMP%]{--background:#dcdcdc;color:#1e90ff;border-radius:6vh;margin-top:5vh;margin-bottom:5vh;padding-top:1vh;padding-bottom:1vh;font-size:2.2vh;height:11vh}ion-button[_ngcontent-%COMP%]{text-transform:none!important;height:8vh;font-size:3vh}"],data:{animation:[Object(X.k)("fadeIn",[Object(X.j)(":enter",[Object(X.e)(2800,Object(X.f)([Object(X.i)({offset:0,opacity:"0"}),Object(X.i)({offset:.7,opacity:"0"}),Object(X.i)({offset:1,opacity:"1"})]))])])]}}),Ks),Ds=((Ms=function e(){_classCallCheck(this,e)}).\u0275mod=f.Sb({type:Ms}),Ms.\u0275inj=f.Rb({factory:function(e){return new(e||Ms)},providers:[j.a],imports:[[n.G,c.b,r.d,r.i,i.i.forChild([{path:"",component:Ys}])]]}),Ms)}}]);