(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{CKRj:function(e,t,s){"use strict";s.r(t),s.d(t,"TrainingPageModule",(function(){return Ps}));var i=s("c7TG"),n=s("tyNb"),c=s("ofXK"),o=s("3Pt+"),r=s("mrSG"),a=s("PqYM"),l=s("l5mm"),h=s("fXoL");const d=["slideElement"];function f(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",10),h.fc("click",(function(){return h.sc(e),h.hc().toggleOverview()})),h.Wb()}}const b=function(e){return{hidden:e}};function u(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",11),h.fc("click",(function(){return h.sc(e),h.hc().closeModal()})),h.Wb()}if(2&e){const e=h.hc();h.kc("ngClass",h.nc(1,b,e.hideQuit))}}function g(e,t){if(1&e&&(h.Xb(0,"ion-slide",12),h.Vb(1,"img",13),h.Xb(2,"div",14),h.wc(3),h.Wb(),h.Wb()),2&e){const e=t.$implicit;h.Kb(1),h.kc("src",e[0],h.tc),h.Kb(2),h.xc(e[1])}}function m(e,t){1&e&&h.Vb(0,"ion-icon",18)}function p(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",19),h.fc("click",(function(){h.sc(e);const t=h.hc().index;return h.hc(),h.rc(9).slideTo(t)})),h.Wb()}}function k(e,t){if(1&e&&(h.Xb(0,"span",15),h.vc(1,m,1,0,"ion-icon",16),h.vc(2,p,1,0,"ion-icon",17),h.Wb()),2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngIf",s.currentSlide==e),h.Kb(1),h.kc("ngIf",s.currentSlide!=e)}}const v={Start:[["assets/help-slides/start/0.png","Welcome to your CRD training. Please take a minute to review these slides and familiarize yourself with the training process."],["assets/help-slides/start/1.png","There are 8 levels to complete. You should complete one level per day, in about 10-15 minutes."],["assets/help-slides/start/2.png","In the learning task you will learn the day's names and faces, then you will use those faces to complete the challenges in the four training tasks."],["assets/help-slides/start/3.png","After passing the training tasks, you will complete two assessment tasks. Your level will increase after you finish."],["assets/help-slides/start/4.png","Before Level 1 and after Level 8 you will complete an additional assessment to estimate your overall progress."],["assets/help-slides/start/5.png","If you have questions about how to complete a task or what to do next, you can click the help icon in the upper-right corner."],["assets/help-slides/start/6.png","Your data will be used to further research of CRD and facial recognition. For more information about the research visit the About Us page."],["assets/help-slides/start/7.png","Should you need to review this information again, simply click the help icon in the upper right-hand corner of any help page."]],Overview:[["assets/help-slides/start/0.png","These slides will provide an overview of the training process."],["assets/help-slides/start/1.png","There are 8 levels to complete. You should complete one level per day, in about 10-15 minutes."],["assets/help-slides/start/2.png","In the learning task you will learn the day's names and faces, then you will use those faces to complete the challenges in the four training tasks."],["assets/help-slides/start/3.png","After passing the training tasks, you will complete two assessment tasks. Your level will increase after you finish."],["assets/help-slides/start/4.png","Before Level 1 and after Level 8 you will complete an additional assessment to estimate your overall progress."],["assets/help-slides/start/5.png","If you have questions about how to complete a task or what to do next, you can click the help icon in the upper-right corner."],["assets/help-slides/start/6.png","Your data will be used to further research of CRD and facial recognition. For more information about the research visit the About Us page."]],"Meet Today's Faces":[["assets/help-slides/learning/0.png","Memorize the eight name-face pairs you are shown; they will be the basis of your daily training."],["assets/help-slides/learning/1.png","You can come back to this module at any time after finishing."]],"Name and Face":[["assets/help-slides/name-face/0.png","For each of the names you've seen before, you'll be asked to match the appropriate face."],["assets/help-slides/name-face/1.png","You'll get a point for each face you match correctly."],["assets/help-slides/name-face/2.png","Whenever you guess incorrectly, you'll be shown the correct answer as well as the two names."]],"Who's New?":[["assets/help-slides/whos-new/0.png","Select the face that you haven't yet seen today, and that wasn't part of the learning task."],["assets/help-slides/whos-new/1.png","You'll get a point for each face you guess correctly."],["assets/help-slides/whos-new/2.png","Whenever you guess incorrectly, you'll be shown the correct answer."]],"Memory Match":[["assets/help-slides/memory-match/0.png","Tap to show the faces and begin the timer."],["assets/help-slides/memory-match/1.png","You will have 10 seconds to memorize the placement of as many face pairs as you can."],["assets/help-slides/memory-match/2.png","After the timer is up, click the cards to match the pairs. When you correctly match a pair, they will be revealed."],["assets/help-slides/memory-match/3.png","Correct matches award 4 points, while incorrect matches deduct 1 point."]],Shuffle:[["assets/help-slides/shuffle/0.png","Tap to show the faces and begin the timer."],["assets/help-slides/shuffle/1.png","You will have 10 seconds to memorize the placement of the faces."],["assets/help-slides/shuffle/2.png","After the timer is up, click cards to swap their positions. Tap 'Done' when you think the positions are correct."],["assets/help-slides/shuffle/3.png","For an incorrect solution, incorrect cards will be colored red. You will be awarded a point for each correct card."],["assets/help-slides/shuffle/4.png","You can toggle between your solution and the correct solution with the toggle at the bottom."]],"Forced Choice":[["assets/help-slides/forced-choice/0.png","Tap to show the face and begin the timer."],["assets/help-slides/forced-choice/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/forced-choice/2.png","After the timer is up select the face that you saw."],["assets/help-slides/forced-choice/3.png","You will receive a point for each correct answer."]],"Same-Different":[["assets/help-slides/same-different/0.png","Tap to show the face and begin the timer."],["assets/help-slides/same-different/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/same-different/2.png","After the timer is up, decide whether the face is the same."],["assets/help-slides/same-different/3.png","You will receive a point for each correct answer."]],"Training Tasks":[["assets/help-slides/training/0.png","Welcome to the training tasks. You can revisit the learning task however often you need with the bottom left-hand button."],["assets/help-slides/training/1.png","When you complete a task, you can see your highest score. You must get at least 75% to pass each task, and can do them any number of times."],["assets/help-slides/training/2.png","After passing every task, you can progress to the daily assessment tasks with the bottom right-hand button. You will not be able to come back today after moving on."]],"Assessment Tasks":[["assets/help-slides/assessment/0.png","The daily assessment tasks track your learning progress. You cannot redo them."]],Finish:[["assets/help-slides/finish/0.png","You are done for the day, come back tomorrow for your next training. You can see your training history on the history page."]],"Pre-Assessment":[["assets/help-slides/pre-post/0.png","Welcome to your pre-assessment. This is a one-time test; it will provide a baseline for your current CRD."],["assets/help-slides/same-different/0.png","Tap to show the face and begin the timer."],["assets/help-slides/same-different/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/same-different/2.png","After the timer is up, decide whether the face is the same."],["assets/help-slides/pre-post/1.png","This test consists of 30 questions, so set aside a few minutes to complete it."],["assets/help-slides/finish/0.png","When you have finished you can officially begin your training in Level 1."]],"Post-Assessment":[["assets/help-slides/pre-post/0.png","Welcome to your post-assessment. This is your final test; after this, your participation in this research will be complete."],["assets/help-slides/pre-post/1.png","This test consists of 30 questions, so set aside a few minutes to complete it."]]};let S=(()=>{class e{constructor(e,t){this.modalController=e,this.navParams=t}ngOnInit(){this.task=this.navParams.data.paramTask,this.displayFirst=this.navParams.data.displayFirst,this.slides=v[this.task],this.currentSlide=0,this.showOverview=!1;let e=[];for(let t=0;t<this.slides.length;t++)e.push(new Image),e[e.length-1].src=this.slides[t][0];this.hideQuit=!1,this.displayFirst&&this.slides.length>1&&(this.hideQuit=!0)}closeModal(){return Object(r.b)(this,void 0,void 0,(function*(){yield this.modalController.dismiss()}))}changeSlide(){return Object(r.b)(this,void 0,void 0,(function*(){this.currentSlide=yield this.slideElement.getActiveIndex(),this.currentSlide==this.slides.length-1&&(this.hideQuit=!1)}))}toggleOverview(){if(this.slideElement.slideTo(0),this.showOverview)this.showOverview=!1,this.ngOnInit();else{this.showOverview=!0,this.task="Overview",this.slides=v[this.task];let e=[];for(let t=0;t<this.slides.length;t++)e.push(new Image),e[e.length-1].src=this.slides[t][0]}}}return e.\u0275fac=function(t){return new(t||e)(h.Ub(i.I),h.Ub(i.J))},e.\u0275cmp=h.Ob({type:e,selectors:[["app-help-modal"]],viewQuery:function(e,t){var s;1&e&&h.Bc(d,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{firstDisplayed:"firstDisplayed"},decls:13,vars:8,consts:[[2,"--background","dodgerblue","--color","white",3,"swipedown"],["lines","none",2,"font-size","3vh","margin-top","5%","text-align","center","--background","dodgerblue","--color","white"],["slot","start","color","dark","name","arrow-back","style","height: 3vh",3,"click",4,"ngIf"],["slot","end","color","dark","name","help-circle",2,"height","3vh",3,"ngClass","click"],["slot","start","color","dark","name","close-circle","style","margin-right: 10px; height: 3vh",3,"ngClass","click",4,"ngIf"],[2,"height","80%",3,"ionSlideWillChange"],["slideElement",""],["style","height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: space-evenly; padding-left: 5%; padding-right: 5%",4,"ngFor","ngForOf"],[2,"text-align","center","font-size","3vh"],["style","margin: 0 auto",4,"ngFor","ngForOf"],["slot","start","color","dark","name","arrow-back",2,"height","3vh",3,"click"],["slot","start","color","dark","name","close-circle",2,"margin-right","10px","height","3vh",3,"ngClass","click"],[2,"height","100%","width","100%","display","flex","flex-direction","column","justify-content","space-evenly","padding-left","5%","padding-right","5%"],[3,"src"],[2,"display","flex","align-items","center","flex-shrink","2","margin-left","5%","margin-right","5%","font-size","5vw"],[2,"margin","0 auto"],["color","dark","name","radio-button-on",4,"ngIf"],["color","dark","name","radio-button-off",3,"click",4,"ngIf"],["color","dark","name","radio-button-on"],["color","dark","name","radio-button-off",3,"click"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.fc("swipedown",(function(){return t.closeModal()})),h.Xb(1,"ion-item",1),h.Xb(2,"ion-label"),h.Xb(3,"b"),h.wc(4),h.Wb(),h.Wb(),h.vc(5,f,1,0,"ion-icon",2),h.Xb(6,"ion-icon",3),h.fc("click",(function(){return t.toggleOverview()})),h.Wb(),h.vc(7,u,1,3,"ion-icon",4),h.Wb(),h.Xb(8,"ion-slides",5,6),h.fc("ionSlideWillChange",(function(){return t.changeSlide()})),h.vc(10,g,4,2,"ion-slide",7),h.Wb(),h.Xb(11,"div",8),h.vc(12,k,3,2,"span",9),h.Wb(),h.Wb()),2&e&&(h.Kb(4),h.xc(t.task),h.Kb(1),h.kc("ngIf",t.showOverview),h.Kb(1),h.kc("ngClass",h.nc(6,b,"Start"==t.task||"Overview"==t.task||t.hideQuit)),h.Kb(1),h.kc("ngIf",!t.showOverview),h.Kb(3),h.kc("ngForOf",t.slides),h.Kb(2),h.kc("ngForOf",t.slides))},directives:[i.j,i.o,i.p,c.j,i.m,c.h,i.B,c.i,i.A],styles:["ion-item[_ngcontent-%COMP%]{--background:#1e90ff}div[_ngcontent-%COMP%]{color:#fff;text-align:center}img[_ngcontent-%COMP%]{height:55vh;width:auto;margin:0 auto;border-radius:5%}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]}),e})();var O=s("l7GE"),I=s("ZUHj");function w(e){return t=>t.lift(new y(e))}class y{constructor(e){this.notifier=e}call(e,t){const s=new E(e),i=Object(I.a)(s,this.notifier);return i&&!s.seenValue?(s.add(i),t.subscribe(s)):s}}class E extends O.a{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,s,i,n){this.seenValue=!0,this.complete()}notifyComplete(){}}var C=s("MTcp"),T=s("Xy44"),F=s("tk/3");let W=(()=>{class e{constructor(e){this.http=e,this.scores_url="https://crossfacerecognition.herokuapp.com/tasks/",this.pre_url="https://crossfacerecognition.herokuapp.com/preassessment/",this.post_url="https://crossfacerecognition.herokuapp.com/postassessment/",this.shuffle=0,this.memory=0,this.whosnew=0,this.nameface=0,this.forcedchoice=0,this.samedifferent=0,this.pre_score=0,this.post_score=0}setScores(e,t,s="Black"){return new Promise((i,n)=>{this.level=e,this.race=s,this.nameface=t[0],this.whosnew=t[1],this.memory=t[2],this.shuffle=t[3],this.forcedchoice=t[4],this.samedifferent=t[5],this.body={level:this.level,race:this.race,shuffle:this.shuffle,memory:this.memory,whosnew:this.whosnew,nameface:this.nameface,forcedchoice:this.forcedchoice,samedifferent:this.samedifferent},i()})}putScores(e,t,s="Black"){return Object(r.b)(this,void 0,void 0,(function*(){const i={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};yield this.setScores(e,t,s),console.log("Sent: ",JSON.stringify(this.body)),this.http.post(this.scores_url,this.body,i).subscribe(e=>{console.log("Response: ",e)},e=>{console.log("Error: ",e)})}))}submitTaskScores(e,t,s="Black"){this.putScores(e,t,s)}setPre(e,t="Black"){return new Promise((s,i)=>{this.pre_score=e,this.race=t,this.body={score:this.pre_score,race:this.race},s()})}submitPreAssessment(e,t="Black"){return Object(r.b)(this,void 0,void 0,(function*(){const s={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};yield this.setPre(e,t),console.log("Sent to pre: ",JSON.stringify(this.body)),this.http.put(this.pre_url,this.body,s).subscribe(e=>{console.log("Response: ",e),console.log("status: ",e.status)},e=>{console.log("Error: ",e)})}))}setPost(e,t="Black"){return new Promise((s,i)=>{this.post_score=e,this.race=t,this.body={score:this.post_score,race:this.race},s()})}submitPostAssessment(e,t="Black"){return Object(r.b)(this,void 0,void 0,(function*(){const s={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};yield this.setPost(e,t),console.log("Sent to post: ",JSON.stringify(this.body)),this.http.put(this.post_url,this.body,s).subscribe(e=>{console.log("Response: ",e),console.log("status: ",e.status)},e=>{console.log("Error: ",e)})}))}}return e.\u0275fac=function(t){return new(t||e)(h.bc(F.a))},e.\u0275prov=h.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=s("Bg0J"),j=s("R0Ic");const X=function(e){return{opacity:e}};function M(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-slide",10),h.Xb(1,"ion-card",11),h.Xb(2,"ion-icon",12),h.fc("click",(function(){return h.sc(e),h.hc(),h.rc(6).slidePrev()})),h.Wb(),h.Xb(3,"div"),h.Xb(4,"div",13),h.Vb(5,"img",14),h.Wb(),h.Xb(6,"div",15),h.Xb(7,"div",16),h.Xb(8,"p",17),h.wc(9),h.Wb(),h.Wb(),h.Wb(),h.Wb(),h.Xb(10,"ion-icon",18),h.fc("click",(function(){return h.sc(e),h.hc(),h.rc(6).slideNext()})),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=t.$implicit,s=t.index,i=h.hc();h.Kb(2),h.kc("ngStyle",h.nc(4,X,0==i.progress?"0.2":"1")),h.Kb(3),h.kc("src",e,h.tc),h.Kb(4),h.xc(i.setNames[s]),h.Kb(1),h.kc("ngStyle",h.nc(6,X,i.progress==i.facePaths.length-1?"0.2":"1"))}}function K(e,t){1&e&&(h.Xb(0,"ion-button",19),h.wc(1,"Finish"),h.Wb())}function x(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-button",20),h.fc("click",(function(){return h.sc(e),h.hc().finished.emit()})),h.wc(1,"Finish"),h.Wb()}}let A=(()=>{class e{constructor(){this.finished=new h.s,this.progress=0,this.progressPercent=0,this.seenAll=!1}ngOnInit(){}changeCard(e){"next"==e?this.progress++:this.progress--,this.seenAll||(this.progressPercent=this.progress/(this.facePaths.length-1)),7==this.progress&&(this.seenAll=!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-learning-task"]],inputs:{setNames:"setNames",facePaths:"facePaths"},outputs:{finished:"finished"},decls:11,vars:4,consts:[["id","learningView"],[2,"margin-top","0px",3,"value"],[1,"flex-slide"],[2,"font-size","7vw","color","white","text-align","center","margin-top","5%"],[2,"width","100%",3,"ionSlideNextStart","ionSlidePrevStart"],["slideElement",""],["style","text-align: center",4,"ngFor","ngForOf"],[2,"text-align","center","height","7%","margin-bottom","5%"],["color","success","style","height: 100%","disabled","",4,"ngIf"],["color","success","style","height: 100%",3,"click",4,"ngIf"],[2,"text-align","center"],[2,"display","flex","justify-content","center","align-items","center"],["color","dark","name","arrow-back",2,"margin-right","calc((100% - 220px) / 2)","font-size","150%",3,"ngStyle","click"],[1,"imgContainer"],["id","faceImg",3,"src"],[1,"nameContainer"],["id","nameDisplay"],["id","nameText"],["color","dark","name","arrow-forward",2,"margin-left","calc((100% - 220px) / 2)","font-size","150%",3,"ngStyle","click"],["color","success","disabled","",2,"height","100%"],["color","success",2,"height","100%",3,"click"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.Xb(2,"div",2),h.Xb(3,"div",3),h.wc(4,"Memorize the faces and names"),h.Wb(),h.Xb(5,"ion-slides",4,5),h.fc("ionSlideNextStart",(function(){return t.changeCard("next")}))("ionSlidePrevStart",(function(){return t.changeCard("back")})),h.vc(7,M,11,8,"ion-slide",6),h.Wb(),h.Xb(8,"div",7),h.vc(9,K,2,0,"ion-button",8),h.vc(10,x,2,0,"ion-button",9),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.Kb(1),h.lc("value",t.progressPercent),h.Kb(6),h.kc("ngForOf",t.facePaths),h.Kb(2),h.kc("ngIf",!t.seenAll),h.Kb(1),h.kc("ngIf",t.seenAll))},directives:[i.j,i.u,i.B,c.i,c.j,i.A,i.g,i.m,c.k,i.e],styles:["#learningView[_ngcontent-%COMP%]{--background:grey}ion-card[_ngcontent-%COMP%]{width:90%;height:auto;text-align:center;border-radius:2%;box-shadow:6px 4px 5px rgba(0,0,0,.7);display:block;margin-left:auto;margin-right:auto;margin-bottom:5px;background-color:#dcdcdc}ion-button[_ngcontent-%COMP%]{width:80%;height:100%;padding:0;margin:5px}ion-icon[_ngcontent-%COMP%]{font-size:100%}.imgContainer[_ngcontent-%COMP%]{height:230px;width:auto;text-align:center!important;display:flex;flex-direction:column;justify-content:center}#faceImg[_ngcontent-%COMP%]{margin:0 auto;height:210px;width:160px;display:inline-block}.nameContainer[_ngcontent-%COMP%]{height:70px;width:100%;margin-bottom:10px;background-image:url(nametag.9fffc7bfd1a8708802bc.png);background-position:50%;background-size:auto 100%;background-repeat:no-repeat}.nameContainer[_ngcontent-%COMP%]   #nameDisplay[_ngcontent-%COMP%]{height:100%;position:relative}.nameContainer[_ngcontent-%COMP%]   #nameDisplay[_ngcontent-%COMP%]   #nameText[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700;font-size:large;margin:5px;position:absolute;left:50%;transform:translate(-55%);bottom:15%}"]}),e})();function P(e,t){if(1&e&&(h.Xb(0,"div",5),h.wc(1),h.Wb()),2&e){const e=h.hc();h.Kb(1),h.Ac("You need a score of at least ",e.length*e.minTrainScore,"/",e.length," (",100*e.minTrainScore,"%) to pass this module")}}function L(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-button",6),h.fc("click",(function(){return h.sc(e),h.hc().finished.emit(0)})),h.wc(1,"Retry"),h.Wb()}}function N(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-button",6),h.fc("click",(function(){return h.sc(e),h.hc().finished.emit(1)})),h.Vb(1,"ion-icon",7),h.wc(2," \xa0 "),h.Vb(3,"ion-icon",7),h.Wb()}if(2&e){const e=h.hc();h.Kb(1),h.kc("src",e.replay_icon),h.Kb(2),h.kc("src",e.face_icon)}}let Y=(()=>{class e{constructor(){this.finished=new h.s,this.minTrainScore=.75,this.replay_icon="assets/icon/replay.svg",this.face_icon="assets/icon/face.svg"}ngOnInit(){}failed(){return this.score<this.length*this.minTrainScore&&!this.assessment}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-score-page"]],inputs:{score:"score",length:"length",assessment:"assessment"},outputs:{finished:"finished"},decls:10,vars:6,consts:[[1,"flex-slide"],[1,"header"],["class","subheader","style","margin: 5%",4,"ngIf"],[3,"click",4,"ngIf"],[3,"color","click"],[1,"subheader",2,"margin","5%"],[3,"click"],[3,"src"]],template:function(e,t){1&e&&(h.Xb(0,"div",0),h.Xb(1,"div"),h.Xb(2,"div",1),h.wc(3),h.Wb(),h.vc(4,P,2,3,"div",2),h.vc(5,L,2,0,"ion-button",3),h.vc(6,N,4,2,"ion-button",3),h.Vb(7,"br"),h.Xb(8,"ion-button",4),h.fc("click",(function(){return t.finished.emit(2)})),h.wc(9,"Finish"),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.Kb(3),h.zc("Your score: ",t.score,"/",t.length,""),h.Kb(1),h.kc("ngIf",t.failed()),h.Kb(1),h.kc("ngIf",t.failed()),h.Kb(1),h.kc("ngIf",t.failed()),h.Kb(2),h.kc("color",t.failed()?"danger":"success"))},directives:[c.j,i.e,i.m],styles:["ion-button[_ngcontent-%COMP%]{height:8vh}"]}),e})();const D=["slideElement"];function _(e,t){if(1&e&&(h.Xb(0,"span"),h.Xb(1,"div",7),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",8),h.wc(5,"+1"),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(3),h.zc("Score: ",e.score,"/",e.progressPercent*e.taskLength,"")}}function V(e,t){if(1&e&&(h.Xb(0,"div",16),h.wc(1,"Who is "),h.Xb(2,"b"),h.wc(3),h.Wb(),h.wc(4,"?"),h.Wb()),2&e){const e=h.hc().index,t=h.hc();h.Kb(3),h.xc(t.slideInfo[e].correctName)}}function z(e,t){1&e&&(h.Xb(0,"div",16),h.wc(1,"Correct!"),h.Wb())}function H(e,t){1&e&&(h.Xb(0,"div",16),h.wc(1,"Incorrect!"),h.Wb())}function B(e,t){if(1&e&&h.Vb(0,"img",21),2&e){const e=h.hc().index,t=h.hc().index,s=h.hc();h.kc("src",s.slideInfo[t].faces[e],h.tc)}}const U=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function q(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",17),h.Xb(1,"ion-card",18),h.fc("click",(function(){h.sc(e);const s=t.index,i=h.hc().index,n=h.hc();return n.selectFace(n.slideInfo[i].faces[s])})),h.vc(2,B,1,1,"img",19),h.Wb(),h.Xb(3,"div",20),h.wc(4),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc().index,i=h.hc();h.Kb(1),h.kc("button",!i.showFeedback())("ngClass",h.oc(4,U,i.showSelected(e)&&s==i.currentSlide,i.showDisabled(e)&&s==i.currentSlide)),h.Kb(1),h.kc("ngIf",s<=i.currentSlide),h.Kb(2),h.xc(s==i.currentSlide?i.getName(e):"")}}function Z(e,t){if(1&e&&h.Vb(0,"img",21),2&e){const e=h.hc().index,t=h.hc().index,s=h.hc();h.kc("src",s.slideInfo[t].faces[e+3],h.tc)}}function G(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",17),h.Xb(1,"ion-card",18),h.fc("click",(function(){h.sc(e);const s=t.index,i=h.hc().index,n=h.hc();return n.selectFace(n.slideInfo[i].faces[s+3])})),h.vc(2,Z,1,1,"img",19),h.Wb(),h.Xb(3,"div",20),h.wc(4),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc().index,i=h.hc();h.Kb(1),h.kc("button",!i.showFeedback())("ngClass",h.oc(4,U,i.showSelected(e+3)&&s==i.currentSlide,i.showDisabled(e+3)&&s==i.currentSlide)),h.Kb(1),h.kc("ngIf",s<=i.currentSlide),h.Kb(2),h.xc(s==i.currentSlide?i.getName(e+3):"")}}const J=function(){return[]};function Q(e,t){if(1&e&&(h.Xb(0,"ion-slide"),h.Xb(1,"div",9),h.vc(2,V,5,1,"div",10),h.vc(3,z,2,0,"div",10),h.vc(4,H,2,0,"div",10),h.Xb(5,"div"),h.Xb(6,"div",11),h.vc(7,q,5,7,"div",12),h.Wb(),h.Xb(8,"div",13),h.vc(9,G,5,7,"div",12),h.Wb(),h.Wb(),h.Xb(10,"ion-item",14),h.Xb(11,"ion-label"),h.wc(12,"Swipe to Continue"),h.Wb(),h.Vb(13,"ion-icon",15),h.Wb(),h.Wb(),h.Wb()),2&e){const e=t.index,s=h.hc();h.Kb(2),h.kc("ngIf",e!=s.currentSlide||!s.showFeedback()),h.Kb(1),h.kc("ngIf",s.showFeedback()&&s.slideInfo[e].stage==s.Stage.CORRECT),h.Kb(1),h.kc("ngIf",s.showFeedback()&&s.slideInfo[e].stage==s.Stage.INCORRECT),h.Kb(3),h.kc("ngForOf",h.mc(6,J).constructor(3)),h.Kb(2),h.kc("ngForOf",h.mc(7,J).constructor(3)),h.Kb(1),h.kc("@fadeFooter",s.showFeedback()?"visible":"invisible")}}const $=function(e,t,s){return{default:e,success:t,failure:s}};var ee=function(e){return e[e.SELECT=0]="SELECT",e[e.CORRECT=1]="CORRECT",e[e.INCORRECT=2]="INCORRECT",e}({});let te=(()=>{class e{constructor(){this.finished=new h.s,this.Stage=ee,this.numberOfOptions=6}ngOnInit(){this.score=0,this.currentSlide=0,this.progressPercent=0,this.changeScore=Object(C.h)(),this.taskLength=this.facePaths.length,this.shuffledNames=[];for(let e=0;e<this.taskLength;e++)this.shuffledNames.push(this.setNames[e]);for(let e=this.taskLength-1;e>0;e-=1){let t=Math.floor(Math.random()*(e+1)),s=this.shuffledNames[e];this.shuffledNames[e]=this.shuffledNames[t],this.shuffledNames[t]=s}this.slideInfo=[];for(let e=0;e<this.taskLength;e++)this.slideInfo.push({correctName:this.shuffledNames[e],correctFace:this.facePaths[this.setNames.indexOf(this.shuffledNames[e])],selectedFace:null,faces:this.getSlideFaces(e),stage:ee.SELECT})}ngAfterViewInit(){this.slideElement.lockSwipes(!0)}finish(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}selectFace(e){this.slideInfo[this.currentSlide].stage==ee.SELECT&&(this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=ee.CORRECT,this.changeScore=Object(C.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=ee.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0))}getSlideFaces(e){let t=[];for(let i=0;i<this.numberOfOptions-1;i++){let s=Math.floor(Math.random()*this.taskLength);for(;t.indexOf(this.facePaths[s])>-1||this.facePaths[s]==this.facePaths[this.setNames.indexOf(this.shuffledNames[e])];)s=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[s])}let s=Math.floor(Math.random()*this.numberOfOptions);return t.splice(s,0,this.facePaths[this.setNames.indexOf(this.shuffledNames[e])]),t}showDisabled(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].correctFace!=this.slideInfo[this.currentSlide].faces[e]}showSelected(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].faces[e]!=this.slideInfo[this.currentSlide].correctFace&&this.slideInfo[this.currentSlide].faces[e]==this.slideInfo[this.currentSlide].selectedFace}getName(e){return!this.showFeedback()||this.showDisabled(e)&&!this.showSelected(e)?"  ":this.setNames[this.facePaths.indexOf(this.slideInfo[this.currentSlide].faces[e])]}showFeedback(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ee.CORRECT||this.slideInfo[this.currentSlide].stage==ee.INCORRECT)}scoreCardDisplayed(){return this.currentSlide>=this.taskLength}changeSlide(){return Object(r.b)(this,void 0,void 0,(function*(){(yield this.slideElement.getActiveIndex())>this.currentSlide&&(this.currentSlide=yield this.slideElement.getActiveIndex(),yield this.slideElement.lockSwipes(!0),yield this.changeScore.stop())}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-name-face"]],viewQuery:function(e,t){var s;1&e&&h.Bc(D,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{setNames:"setNames",facePaths:"facePaths"},outputs:{finished:"finished"},decls:8,vars:11,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[2,"display","flex","justify-content","center"],["style","margin-left: 10px; margin-right: 10px",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","margin-top","10px"],["lines","none",1,"footer"],["slot","end","color","medium","name","arrow-back",2,"margin-top","10px"],[1,"prompt"],[2,"margin-left","10px","margin-right","10px"],[1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],[2,"height","25px","color","white"],[3,"src"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.vc(2,_,6,2,"span",2),h.Xb(3,"ion-slides",3,4),h.fc("ionSlideDidChange",(function(){return t.changeSlide()})),h.vc(5,Q,14,8,"ion-slide",5),h.Xb(6,"ion-slide"),h.Xb(7,"app-score-page",6),h.fc("finished",(function(e){return t.finish(e)})),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.kc("ngClass",h.pc(7,$,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),h.Kb(1),h.lc("value",t.progressPercent),h.Kb(1),h.kc("ngIf",!t.scoreCardDisplayed()),h.Kb(3),h.kc("ngForOf",t.slideInfo),h.Kb(2),h.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[i.j,c.h,i.u,c.j,i.B,c.i,i.A,Y,i.o,i.p,i.m,i.g],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;height:110px;width:80px;margin:0}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:75px;margin-left:3px;margin-top:5px}"],data:{animation:[Object(j.k)("fadeFooter",[Object(j.h)("visible",Object(j.i)({opacity:.75})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)("invisible => visible",[Object(j.e)(1500,Object(j.f)([Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:".75"})]))]),Object(j.j)("visible => invisible",[Object(j.e)(200)])])]}}),e})();const se=["slideElement"];function ie(e,t){if(1&e&&(h.Xb(0,"span"),h.Xb(1,"div",7),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",8),h.wc(5,"+1"),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(3),h.zc("Score: ",e.score,"/",e.progressPercent*e.taskLength,"")}}function ne(e,t){1&e&&(h.Xb(0,"div",15),h.wc(1,"Who didn't you see today?"),h.Wb())}function ce(e,t){1&e&&(h.Xb(0,"div",15),h.wc(1,"Correct!"),h.Wb())}function oe(e,t){1&e&&(h.Xb(0,"div",15),h.wc(1,"Incorrect!"),h.Wb())}function re(e,t){if(1&e&&h.Vb(0,"img",16),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.slideInfo[e].faces[0],h.tc)}}function ae(e,t){if(1&e&&h.Vb(0,"img",16),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.slideInfo[e].faces[1],h.tc)}}function le(e,t){if(1&e&&h.Vb(0,"img",16),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.slideInfo[e].faces[2],h.tc)}}function he(e,t){if(1&e&&h.Vb(0,"img",16),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.slideInfo[e].faces[3],h.tc)}}const de=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function fe(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-slide"),h.Xb(1,"div",9),h.vc(2,ne,2,0,"div",10),h.vc(3,ce,2,0,"div",10),h.vc(4,oe,2,0,"div",10),h.Xb(5,"div"),h.Xb(6,"div"),h.Xb(7,"ion-card",11),h.fc("click",(function(){h.sc(e);const s=t.index,i=h.hc();return i.selectFace(i.slideInfo[s].faces[0])})),h.vc(8,re,1,1,"img",12),h.Wb(),h.Xb(9,"ion-card",11),h.fc("click",(function(){h.sc(e);const s=t.index,i=h.hc();return i.selectFace(i.slideInfo[s].faces[1])})),h.vc(10,ae,1,1,"img",12),h.Wb(),h.Wb(),h.Xb(11,"div"),h.Xb(12,"ion-card",11),h.fc("click",(function(){h.sc(e);const s=t.index,i=h.hc();return i.selectFace(i.slideInfo[s].faces[2])})),h.vc(13,le,1,1,"img",12),h.Wb(),h.Xb(14,"ion-card",11),h.fc("click",(function(){h.sc(e);const s=t.index,i=h.hc();return i.selectFace(i.slideInfo[s].faces[3])})),h.vc(15,he,1,1,"img",12),h.Wb(),h.Wb(),h.Wb(),h.Xb(16,"ion-item",13),h.Xb(17,"ion-label"),h.wc(18,"Swipe to Continue"),h.Wb(),h.Vb(19,"ion-icon",14),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc();h.Kb(2),h.kc("ngIf",e!=s.currentSlide||!s.showFeedback()),h.Kb(1),h.kc("ngIf",s.showFeedback()&&s.slideInfo[e].stage==s.Stage.CORRECT),h.Kb(1),h.kc("ngIf",s.showFeedback()&&s.slideInfo[e].stage==s.Stage.INCORRECT),h.Kb(3),h.kc("button",!s.showFeedback())("ngClass",h.oc(16,de,s.showSelected(0)&&e==s.currentSlide,s.showDisabled(0)&&e==s.currentSlide)),h.Kb(1),h.kc("ngIf",e<=s.currentSlide),h.Kb(1),h.kc("button",!s.showFeedback())("ngClass",h.oc(19,de,s.showSelected(1)&&e==s.currentSlide,s.showDisabled(1)&&e==s.currentSlide)),h.Kb(1),h.kc("ngIf",e<=s.currentSlide),h.Kb(2),h.kc("button",!s.showFeedback())("ngClass",h.oc(22,de,s.showSelected(2)&&e==s.currentSlide,s.showDisabled(2)&&e==s.currentSlide)),h.Kb(1),h.kc("ngIf",e<=s.currentSlide),h.Kb(1),h.kc("button",!s.showFeedback())("ngClass",h.oc(25,de,s.showSelected(3)&&e==s.currentSlide,s.showDisabled(3)&&e==s.currentSlide)),h.Kb(1),h.kc("ngIf",e<=s.currentSlide),h.Kb(1),h.kc("@fadeFooter",s.showFeedback()?"visible":"invisible")}}const be=function(e,t,s){return{default:e,success:t,failure:s}};var ue=function(e){return e[e.SELECT=0]="SELECT",e[e.CORRECT=1]="CORRECT",e[e.INCORRECT=2]="INCORRECT",e}({});let ge=(()=>{class e{constructor(){this.finished=new h.s,this.Stage=ue,this.numberOfOptions=4}ngOnInit(){this.score=0,this.currentSlide=0,this.progressPercent=0,this.changeScore=Object(C.h)(),this.taskLength=this.newFacePaths.length,this.shuffledFaces=[];for(let e=0;e<this.taskLength;e++)this.shuffledFaces.push(this.newFacePaths[e]);for(let e=this.taskLength-1;e>0;e-=1){let t=Math.floor(Math.random()*(e+1)),s=this.shuffledFaces[e];this.shuffledFaces[e]=this.shuffledFaces[t],this.shuffledFaces[t]=s}this.slideInfo=[];for(let e=0;e<this.taskLength;e++)this.slideInfo.push({correctFace:this.shuffledFaces[e],selectedFace:null,faces:this.getSlideFaces(e),stage:ue.SELECT})}ngAfterViewInit(){this.slideElement.lockSwipes(!0)}finish(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}selectFace(e){this.slideInfo[this.currentSlide].stage==ue.SELECT&&(this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=ue.CORRECT,this.changeScore=Object(C.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=ue.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0))}getSlideFaces(e){let t=[];for(let i=0;i<this.numberOfOptions-1;i++){let e=Math.floor(Math.random()*this.taskLength);for(;t.indexOf(this.facePaths[e])>-1;)e=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[e])}let s=Math.floor(Math.random()*this.numberOfOptions);return t.splice(s,0,this.shuffledFaces[e]),t}showDisabled(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].correctFace!=this.slideInfo[this.currentSlide].faces[e]}showSelected(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].faces[e]!=this.slideInfo[this.currentSlide].correctFace&&this.slideInfo[this.currentSlide].faces[e]==this.slideInfo[this.currentSlide].selectedFace}showFeedback(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ue.CORRECT||this.slideInfo[this.currentSlide].stage==ue.INCORRECT)}scoreCardDisplayed(){return this.currentSlide>=this.taskLength}changeSlide(){return Object(r.b)(this,void 0,void 0,(function*(){(yield this.slideElement.getActiveIndex())>this.currentSlide&&(this.currentSlide=yield this.slideElement.getActiveIndex(),yield this.slideElement.lockSwipes(!0),yield this.changeScore.stop())}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-whos-new"]],viewQuery:function(e,t){var s;1&e&&h.Bc(se,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths",newFacePaths:"newFacePaths"},outputs:{finished:"finished"},decls:8,vars:11,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","medium","name","arrow-back"],[1,"prompt"],[3,"src"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.vc(2,ie,6,2,"span",2),h.Xb(3,"ion-slides",3,4),h.fc("ionSlideDidChange",(function(){return t.changeSlide()})),h.vc(5,fe,20,28,"ion-slide",5),h.Xb(6,"ion-slide"),h.Xb(7,"app-score-page",6),h.fc("finished",(function(e){return t.finish(e)})),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.kc("ngClass",h.pc(7,be,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),h.Kb(1),h.lc("value",t.progressPercent),h.Kb(1),h.kc("ngIf",!t.scoreCardDisplayed()),h.Kb(3),h.kc("ngForOf",t.slideInfo),h.Kb(2),h.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[i.j,c.h,i.u,c.j,i.B,c.i,i.A,Y,i.g,i.o,i.p,i.m],styles:[""],data:{animation:[Object(j.k)("fadeFooter",[Object(j.h)("visible",Object(j.i)({opacity:.75})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)("invisible => visible",[Object(j.e)(1500,Object(j.f)([Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:".75"})]))]),Object(j.j)("visible => invisible",[Object(j.e)(200)])])]}}),e})();const me=["slideElement"];function pe(e,t){if(1&e&&(h.Xb(0,"span"),h.Xb(1,"div",13),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",14),h.wc(5),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(3),h.zc("Score: ",e.score,"/",e.progressPercent*e.taskLength,""),h.Kb(2),h.xc(e.stage==e.Stage.CORRECT?"+4":"-1")}}function ke(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",15),h.fc("click",(function(){return h.sc(e),h.hc().startMemorizeTimer()})),h.Xb(1,"div",16),h.wc(2," Tap to reveal "),h.Wb(),h.Wb()}if(2&e){const e=h.hc();h.kc("@fadeInOut",e.stage==e.Stage.START?"visible":"invisible")}}function ve(e,t){if(1&e&&(h.Xb(0,"div",17),h.wc(1),h.Wb()),2&e){const e=h.hc();h.Kb(1),h.yc("Memorize the face placement: ",e.memorizeTime,"")}}function Se(e,t){if(1&e&&(h.Xb(0,"div",17),h.wc(1,"Memorize the face placement: "),h.Xb(2,"span",18),h.wc(3),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(2),h.kc("@countdown",e.timeRemaining%2==0?"active":"inactive"),h.Kb(1),h.xc(e.timeRemaining)}}function Oe(e,t){1&e&&(h.Xb(0,"div",17),h.wc(1,"Hold the faces in your mind..."),h.Wb())}function Ie(e,t){1&e&&(h.Xb(0,"div",17),h.wc(1,"Match the faces"),h.Wb())}function we(e,t){1&e&&(h.Xb(0,"div",17),h.wc(1,"Correct!"),h.Wb())}function ye(e,t){1&e&&(h.Xb(0,"div",17),h.wc(1,"Incorrect!"),h.Wb())}function Ee(e,t){if(1&e&&h.Vb(0,"img",25),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.randomFaces[e],h.tc)}}function Ce(e,t){if(1&e&&h.Vb(0,"img",26),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}const Te=function(e){return{"selected-card":e}};function Fe(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",19),h.Xb(1,"div",20),h.fc("click",(function(){h.sc(e);const s=t.index;return h.hc().clickFace(s)})),h.Xb(2,"div",21),h.vc(3,Ee,1,1,"img",22),h.Wb(),h.Xb(4,"div",23),h.vc(5,Ce,1,1,"img",24),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngClass",h.nc(3,Te,s.selectedFace==e)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e))}}function We(e,t){if(1&e&&h.Vb(0,"img",25),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.randomFaces[e+4],h.tc)}}function Re(e,t){if(1&e&&h.Vb(0,"img",26),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function je(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",19),h.Xb(1,"div",20),h.fc("click",(function(){h.sc(e);const s=t.index;return h.hc().clickFace(s+4)})),h.Xb(2,"div",21),h.vc(3,We,1,1,"img",22),h.Wb(),h.Xb(4,"div",23),h.vc(5,Re,1,1,"img",24),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngClass",h.nc(3,Te,s.selectedFace==e+4)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e+4)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e+4))}}function Xe(e,t){if(1&e&&h.Vb(0,"img",25),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.randomFaces[e+8],h.tc)}}function Me(e,t){if(1&e&&h.Vb(0,"img",26),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function Ke(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",19),h.Xb(1,"div",20),h.fc("click",(function(){h.sc(e);const s=t.index;return h.hc().clickFace(s+8)})),h.Xb(2,"div",21),h.vc(3,Xe,1,1,"img",22),h.Wb(),h.Xb(4,"div",23),h.vc(5,Me,1,1,"img",24),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngClass",h.nc(3,Te,s.selectedFace==e+8)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e+8)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e+8))}}function xe(e,t){if(1&e&&h.Vb(0,"img",25),2&e){const e=h.hc().index,t=h.hc();h.kc("src",t.randomFaces[e+12],h.tc)}}function Ae(e,t){if(1&e&&h.Vb(0,"img",26),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function Pe(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",19),h.Xb(1,"div",20),h.fc("click",(function(){h.sc(e);const s=t.index;return h.hc().clickFace(s+12)})),h.Xb(2,"div",21),h.vc(3,xe,1,1,"img",22),h.Wb(),h.Xb(4,"div",23),h.vc(5,Ae,1,1,"img",24),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngClass",h.nc(3,Te,s.selectedFace==e+12)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e+12)),h.Kb(2),h.kc("ngIf",s.imageIsDisplayed(e+12))}}const Le=function(e,t,s){return{default:e,success:t,failure:s}},Ne=function(){return[]};var Ye=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({});let De=(()=>{class e{constructor(){this.finished=new h.s,this.Stage=Ye,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=10,this.taskLength=32}ngOnInit(){this.stage=Ye.START,this.score=0,this.promise=0,this.progressPercent=0,this.selectedFace=null,this.correctFaces=[],this.incorrectFaces=[],this.firstSlide=!0,this.changeScore=Object(C.h)(),this.randomFaces=[];for(let e=0;e<this.facePaths.length;e++)this.randomFaces.push(this.facePaths[e]),this.randomFaces.push(this.facePaths[e]);for(let e=this.randomFaces.length-1;e>0;e-=1){let t=Math.floor(Math.random()*(e+1)),s=this.randomFaces[e];this.randomFaces[e]=this.randomFaces[t],this.randomFaces[t]=s}}ngAfterViewInit(){this.slideElement.lockSwipes(!0)}ngOnDestroy(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}finish(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}clickFace(e){return Object(r.b)(this,void 0,void 0,(function*(){this.stage!=Ye.START&&this.stage!=Ye.MEMORIZE&&this.stage!=Ye.MASK&&(this.stage!=Ye.CORRECT&&this.stage!=Ye.INCORRECT||(this.promise++,this.selectedFace=null,this.resetSelected()),this.correctFaces.indexOf(this.randomFaces[e])<0&&e!=this.selectedFace)&&(Object(C.h)().addElement(document.querySelectorAll(".memory-card")[e]).fill("none").duration(400).keyframes([{offset:0,transform:"scale(1, 1)"},{offset:.5,transform:"scale(0.95, 0.95)"},{offset:1,transform:"scale(1, 1)"}]).play(),null==this.selectedFace?this.selectedFace=e:this.randomFaces[e]==this.randomFaces[this.selectedFace]?(this.correctFaces.push(this.randomFaces[e]),this.progressPercent=this.correctFaces.length/this.facePaths.length,this.score+=this.taskLength/this.facePaths.length,this.stage=Ye.CORRECT,this.correctFaces.length==this.facePaths.length&&(this.score=Math.ceil(this.score),this.slideElement.lockSwipes(!1)),yield this.waitForFeedback()):(this.incorrectFaces.push(this.selectedFace),this.incorrectFaces.push(e),this.score=this.score>=1?this.score-1:0,this.stage=Ye.INCORRECT,yield this.waitForFeedback()))}))}imageIsDisplayed(e){return this.stage==Ye.MEMORIZE||this.stage==Ye.MASK||this.incorrectFaces.indexOf(e)>-1||this.correctFaces.indexOf(this.randomFaces[e])>-1||this.selectedFace==e}resetSelected(){this.incorrectFaces=[],this.stage=Ye.SELECT,this.changeScore.stop()}waitForFeedback(){return Object(r.b)(this,void 0,void 0,(function*(){this.selectedFace=null,this.stage!=Ye.INCORRECT&&this.stage!=Ye.CORRECT||(this.changeScore=Object(C.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play());let e=this.promise;yield new Promise(e=>setTimeout(e,2e3)),e==this.promise&&this.resetSelected()}))}startMemorizeTimer(){return Object(r.b)(this,void 0,void 0,(function*(){this.stage==Ye.START&&(this.timeRemaining=this.memorizeTime,this.stage=Ye.MEMORIZE,this.timer=Object(a.a)(1e3*this.timeRemaining).subscribe(()=>{this.startMaskTimer()}),this.interval=Object(l.a)(1e3).pipe(w(Object(a.a)(1e3*this.timeRemaining))).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining--}))))}))}startMaskTimer(){Object(C.h)().addElement(document.querySelectorAll(".flipper")).fill("none").duration(2800).keyframes([{offset:0,transform:"rotateY(0deg)"},{offset:.15,transform:"rotateY(180deg)"},{offset:.85,transform:"rotateY(180deg)"},{offset:1,transform:"rotateY(0deg)"}]).play(),this.timer=Object(a.a)(400).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.stage=Ye.MASK}))),this.timer=Object(a.a)(2400).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.stage=Ye.SELECT})))}scoreCardDisplayed(){return!this.firstSlide}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-memory-match"]],viewQuery:function(e,t){var s;1&e&&h.Bc(me,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:28,vars:26,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange","ionSlideReachStart","ionSlideReachEnd"],["slideElement",""],[1,"flex-slide"],["class","prompt-small",4,"ngIf"],[2,"display","flex","justify-content","center"],["style","margin: 10px; perspective: 500px",4,"ngFor","ngForOf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change",2,"right","12vw"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"prompt-small"],[1,"time-left"],[2,"margin","10px","perspective","500px"],[1,"flipper","memory-card",3,"ngClass","click"],[1,"front"],[3,"src",4,"ngIf"],[1,"back"],["style","backface-visibility: hidden",3,"src",4,"ngIf"],[3,"src"],[2,"backface-visibility","hidden",3,"src"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.vc(2,pe,6,3,"span",2),h.vc(3,ke,3,1,"div",3),h.Xb(4,"ion-slides",4,5),h.fc("ionSlideDidChange",(function(){return t.ngAfterViewInit(),t.resetSelected()}))("ionSlideReachStart",(function(){return t.firstSlide=!0}))("ionSlideReachEnd",(function(){return t.firstSlide=!1})),h.Xb(6,"ion-slide",6),h.vc(7,ve,2,1,"div",7),h.vc(8,Se,4,2,"div",7),h.vc(9,Oe,2,0,"div",7),h.vc(10,Ie,2,0,"div",7),h.vc(11,we,2,0,"div",7),h.vc(12,ye,2,0,"div",7),h.Xb(13,"div"),h.Xb(14,"div",8),h.vc(15,Fe,6,5,"div",9),h.Wb(),h.Xb(16,"div",8),h.vc(17,je,6,5,"div",9),h.Wb(),h.Xb(18,"div",8),h.vc(19,Ke,6,5,"div",9),h.Wb(),h.Xb(20,"div",8),h.vc(21,Pe,6,5,"div",9),h.Wb(),h.Wb(),h.Xb(22,"ion-item",10),h.Xb(23,"ion-label"),h.wc(24,"Swipe to Continue"),h.Wb(),h.Vb(25,"ion-icon",11),h.Wb(),h.Wb(),h.Xb(26,"ion-slide"),h.Xb(27,"app-score-page",12),h.fc("finished",(function(e){return t.finish(e)})),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.kc("ngClass",h.pc(18,Le,t.stage!=t.Stage.CORRECT&&t.stage!=t.Stage.INCORRECT,t.stage==t.Stage.CORRECT,t.stage==t.Stage.INCORRECT)),h.Kb(1),h.lc("value",t.progressPercent),h.Kb(1),h.kc("ngIf",!t.scoreCardDisplayed()),h.Kb(1),h.kc("ngIf",t.stage==t.Stage.START),h.Kb(4),h.kc("ngIf",t.stage==t.Stage.START),h.Kb(1),h.kc("ngIf",t.stage==t.Stage.MEMORIZE),h.Kb(1),h.kc("ngIf",t.stage==t.Stage.MASK),h.Kb(1),h.kc("ngIf",t.stage==t.Stage.SELECT),h.Kb(1),h.kc("ngIf",t.stage==t.Stage.CORRECT),h.Kb(1),h.kc("ngIf",t.stage==t.Stage.INCORRECT),h.Kb(3),h.kc("ngForOf",h.mc(22,Ne).constructor(4)),h.Kb(2),h.kc("ngForOf",h.mc(23,Ne).constructor(4)),h.Kb(2),h.kc("ngForOf",h.mc(24,Ne).constructor(4)),h.Kb(2),h.kc("ngForOf",h.mc(25,Ne).constructor(4)),h.Kb(1),h.kc("@fadeFooter",t.correctFaces.length==t.facePaths.length?"visible":"invisible"),h.Kb(5),h.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[i.j,c.h,i.u,c.j,i.B,i.A,c.i,i.o,i.p,i.m,Y],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;background-color:#dcdcdc;display:inline-block;margin:0;height:70px;width:52px}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:45px;margin-left:4px;margin-top:5px}.memory-card[_ngcontent-%COMP%]{margin:0;height:70px;width:52px}.memory-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:45px;border-radius:10%}"],data:{animation:[Object(j.k)("fadeInOut",[Object(j.h)("visible",Object(j.i)({opacity:.9})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)(":enter",[Object(j.e)(500)]),Object(j.j)(":leave",[Object(j.e)(500)])]),Object(j.k)("countdown",[Object(j.j)("active <=> inactive",[Object(j.e)(200,Object(j.f)([Object(j.i)({transform:"translateY(0%)",opacity:"1"}),Object(j.i)({transform:"translateY(75%)",opacity:"0"}),Object(j.i)({transform:"translateY(-75%)",opacity:"0"}),Object(j.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(j.k)("fadeFooter",[Object(j.h)("visible",Object(j.i)({opacity:.75})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)("invisible => visible",[Object(j.e)(1500,Object(j.f)([Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:".75"})]))]),Object(j.j)("visible => invisible",[Object(j.e)(200)])])]}}),e})();const _e=["slideElement"];function Ve(e,t){if(1&e&&(h.Xb(0,"span"),h.Xb(1,"div",8),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",9),h.wc(5),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(3),h.zc("Score: ",e.score,"/",e.progressPercent*e.taskLength,""),h.Kb(2),h.yc("+",e.changeScoreValue,"")}}function ze(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",10),h.fc("click",(function(){return h.sc(e),h.hc().startMemorizeTimer()})),h.Xb(1,"div",11),h.wc(2," Tap to reveal "),h.Wb(),h.Wb()}if(2&e){const e=h.hc();h.kc("@fadeInOut",e.slideInfo[e.currentSlide].stage==e.Stage.START?"visible":"invisible")}}function He(e,t){if(1&e&&(h.Xb(0,"div",28),h.wc(1),h.Wb()),2&e){const e=h.hc(2);h.Kb(1),h.yc("Memorize the face placement: ",e.memorizeTime,"")}}function Be(e,t){if(1&e&&(h.Xb(0,"div",28),h.wc(1,"Memorize the face placement: "),h.Xb(2,"span",29),h.wc(3),h.Wb(),h.Wb()),2&e){const e=h.hc(2);h.Kb(2),h.kc("@countdown",e.timeRemaining%2==0?"active":"inactive"),h.Kb(1),h.xc(e.timeRemaining)}}function Ue(e,t){1&e&&(h.Xb(0,"div",28),h.wc(1,"Hold the faces in your mind..."),h.Wb())}function qe(e,t){1&e&&(h.Xb(0,"div",28),h.wc(1,"Rearrange the faces"),h.Wb())}function Ze(e,t){1&e&&(h.Xb(0,"div",28),h.wc(1,"Correct!"),h.Wb())}function Ge(e,t){1&e&&(h.Xb(0,"div",28),h.wc(1,"Incorrect!"),h.Wb())}function Je(e,t){if(1&e&&h.Vb(0,"img",30),2&e){const e=h.hc(2);h.kc("src",e.getSrc(0),h.tc)}}function Qe(e,t){if(1&e&&h.Vb(0,"img",31),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function $e(e,t){if(1&e&&h.Vb(0,"img",30),2&e){const e=h.hc(2);h.kc("src",e.getSrc(1),h.tc)}}function et(e,t){if(1&e&&h.Vb(0,"img",31),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function tt(e,t){if(1&e&&h.Vb(0,"img",30),2&e){const e=h.hc(2);h.kc("src",e.getSrc(2),h.tc)}}function st(e,t){if(1&e&&h.Vb(0,"img",31),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function it(e,t){if(1&e&&h.Vb(0,"img",30),2&e){const e=h.hc(2);h.kc("src",e.getSrc(3),h.tc)}}function nt(e,t){if(1&e&&h.Vb(0,"img",31),2&e){const e=h.hc(2);h.kc("src",e.mask,h.tc)}}function ct(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-button",32),h.fc("click",(function(){return h.sc(e),h.hc(2).clickDone()})),h.wc(1,"Done"),h.Wb()}}function ot(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-grid",33),h.Xb(1,"ion-row"),h.Xb(2,"ion-col"),h.Xb(3,"span",34),h.wc(4,"Correct"),h.Wb(),h.Wb(),h.Xb(5,"ion-col"),h.Xb(6,"ion-toggle",35),h.fc("ngModelChange",(function(t){h.sc(e);const s=h.hc().index;return h.hc().slideInfo[s].feedback=t}))("click",(function(){return h.sc(e),h.hc(2).animateCardChange()})),h.Wb(),h.Wb(),h.Xb(7,"ion-col"),h.Xb(8,"span",34),h.wc(9,"Selected"),h.Wb(),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=h.hc().index,t=h.hc();h.Kb(6),h.kc("ngModel",t.slideInfo[e].feedback)}}const rt=function(e,t){return{"selected-card":e,"wrong-card":t}};function at(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-slide",12),h.vc(1,He,2,1,"div",13),h.vc(2,Be,4,2,"div",13),h.vc(3,Ue,2,0,"div",13),h.vc(4,qe,2,0,"div",13),h.vc(5,Ze,2,0,"div",13),h.vc(6,Ge,2,0,"div",13),h.Xb(7,"div"),h.Xb(8,"div",14),h.Xb(9,"div",15),h.fc("click",(function(){return h.sc(e),h.hc().clickCard(0)})),h.Xb(10,"div",16),h.vc(11,Je,1,1,"img",17),h.Wb(),h.Xb(12,"div",18),h.vc(13,Qe,1,1,"img",19),h.Wb(),h.Wb(),h.Xb(14,"div",20),h.fc("click",(function(){return h.sc(e),h.hc().clickCard(1)})),h.Xb(15,"div",16),h.vc(16,$e,1,1,"img",17),h.Wb(),h.Xb(17,"div",18),h.vc(18,et,1,1,"img",19),h.Wb(),h.Wb(),h.Wb(),h.Xb(19,"div",14),h.Xb(20,"div",21),h.fc("click",(function(){return h.sc(e),h.hc().clickCard(2)})),h.Xb(21,"div",16),h.vc(22,tt,1,1,"img",17),h.Wb(),h.Xb(23,"div",18),h.vc(24,st,1,1,"img",19),h.Wb(),h.Wb(),h.Xb(25,"div",22),h.fc("click",(function(){return h.sc(e),h.hc().clickCard(3)})),h.Xb(26,"div",16),h.vc(27,it,1,1,"img",17),h.Wb(),h.Xb(28,"div",18),h.vc(29,nt,1,1,"img",19),h.Wb(),h.Wb(),h.Wb(),h.Wb(),h.Xb(30,"div",23),h.vc(31,ct,2,0,"ion-button",24),h.vc(32,ot,10,1,"ion-grid",25),h.Wb(),h.Xb(33,"ion-item",26),h.Xb(34,"ion-label"),h.wc(35,"Swipe to Continue"),h.Wb(),h.Vb(36,"ion-icon",27),h.Wb(),h.Wb()}if(2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.START),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.MEMORIZE),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.MASK),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.SELECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.CORRECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.INCORRECT),h.Kb(3),h.kc("ngClass",h.oc(21,rt,s.slideInfo[e].stage==s.Stage.SELECT&&s.getSrc(0)==s.slideInfo[e].selectedFace,s.slideInfo[e].stage==s.Stage.INCORRECT&&s.slideInfo[e].feedback&&s.slideInfo[e].shuffledOrder[0]!=s.slideInfo[e].correctOrder[0])),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(1),h.kc("ngClass",h.oc(24,rt,s.slideInfo[e].stage==s.Stage.SELECT&&s.getSrc(1)==s.slideInfo[e].selectedFace,s.slideInfo[e].stage==s.Stage.INCORRECT&&s.slideInfo[e].feedback&&s.slideInfo[e].shuffledOrder[1]!=s.slideInfo[e].correctOrder[1])),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(2),h.kc("ngClass",h.oc(27,rt,s.slideInfo[e].stage==s.Stage.SELECT&&s.getSrc(2)==s.slideInfo[e].selectedFace,s.slideInfo[e].stage==s.Stage.INCORRECT&&s.slideInfo[e].feedback&&s.slideInfo[e].shuffledOrder[2]!=s.slideInfo[e].correctOrder[2])),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(1),h.kc("ngClass",h.oc(30,rt,s.slideInfo[e].stage==s.Stage.SELECT&&s.getSrc(3)==s.slideInfo[e].selectedFace,s.slideInfo[e].stage==s.Stage.INCORRECT&&s.slideInfo[e].feedback&&s.slideInfo[e].shuffledOrder[3]!=s.slideInfo[e].correctOrder[3])),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.START),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.SELECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.INCORRECT),h.Kb(1),h.kc("@fadeFooter",s.showFeedback()?"visible":"invisible")}}const lt=function(e,t,s){return{default:e,success:t,failure:s}};var ht=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({});let dt=(()=>{class e{constructor(){this.finished=new h.s,this.Stage=ht,this.numberOfOptions=4,this.numberOfSlides=4,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=10,this.taskLength=this.numberOfOptions*this.numberOfSlides}ngOnInit(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.changeScore=Object(C.h)(),this.slideInfo=[];for(let e=0;e<this.numberOfSlides;e++){let t=this.getSlideFaces(e);this.slideInfo.push({correctOrder:t,shuffledOrder:this.shuffleFaces(t),stage:ht.START,feedback:!0,selectedFace:null})}}ngAfterViewInit(){this.slideElement.lockSwipes(!0)}ngOnDestroy(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}finish(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}clickDone(){this.changeScoreValue=this.numberOfOptions,this.slideInfo[this.currentSlide].selectedFace=null;for(let e=0;e<this.slideInfo[this.currentSlide].shuffledOrder.length;e++)this.slideInfo[this.currentSlide].shuffledOrder[e]!=this.slideInfo[this.currentSlide].correctOrder[e]&&(this.changeScoreValue-=1);this.score+=this.changeScoreValue,this.slideInfo[this.currentSlide].stage=this.changeScoreValue==this.numberOfOptions?ht.CORRECT:ht.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.numberOfSlides,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0),this.changeScore=Object(C.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()}getSlideFaces(e){let t=[];for(let i=0;i<this.numberOfOptions-1;i++){let s=Math.floor(Math.random()*this.facePaths.length);for(;t.indexOf(this.facePaths[s])>-1||this.facePaths[s]==this.facePaths[e];)s=Math.floor(Math.random()*this.facePaths.length);t.push(this.facePaths[s])}let s=Math.floor(Math.random()*this.numberOfOptions);return t.splice(s,0,this.facePaths[e]),t}shuffleFaces(e){let t=[];for(let s=0;s<e.length;s++)t.push(e[s]);for(let s=t.length-1;s>0;s-=1){let e=Math.floor(Math.random()*(s+1)),i=t[s];t[s]=t[e],t[e]=i}return t}startMemorizeTimer(){return Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=ht.MEMORIZE,this.timer=Object(a.a)(1e3*this.timeRemaining).subscribe(()=>{this.startMaskTimer()}),this.interval=Object(l.a)(1e3).pipe(w(Object(a.a)(1e3*this.timeRemaining))).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining--})))}))}startMaskTimer(){return Object(r.b)(this,void 0,void 0,(function*(){Object(C.h)().addElement(document.querySelectorAll(".flipper")).fill("none").duration(2800).keyframes([{offset:0,transform:"rotateY(0deg)"},{offset:.15,transform:"rotateY(180deg)"},{offset:.85,transform:"rotateY(180deg)"},{offset:1,transform:"rotateY(0deg)"}]).play(),this.timer=Object(a.a)(400).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage=ht.MASK}))),this.timer=Object(a.a)(2200).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage=ht.SELECT})))}))}getSrc(e){return this.slideInfo[this.currentSlide].stage==ht.MASK?null:this.slideInfo[this.currentSlide].stage==ht.SELECT||this.slideInfo[this.currentSlide].stage==ht.INCORRECT&&this.slideInfo[this.currentSlide].feedback?this.slideInfo[this.currentSlide].shuffledOrder[e]:this.slideInfo[this.currentSlide].correctOrder[e]}clickCard(e){return Object(r.b)(this,void 0,void 0,(function*(){if(this.slideInfo[this.currentSlide].stage==ht.SELECT)if(Object(C.h)().addElement(document.querySelectorAll(".small-card")[e]).fill("none").duration(400).keyframes([{offset:0,transform:"scale(1, 1)"},{offset:.5,transform:"scale(0.95, 0.95)"},{offset:1,transform:"scale(1, 1)"}]).play(),null==this.slideInfo[this.currentSlide].selectedFace)this.slideInfo[this.currentSlide].selectedFace=this.slideInfo[this.currentSlide].shuffledOrder[e];else{let t=this.slideInfo[this.currentSlide].shuffledOrder.indexOf(this.slideInfo[this.currentSlide].selectedFace);[this.slideInfo[this.currentSlide].shuffledOrder[e],this.slideInfo[this.currentSlide].shuffledOrder[t]]=[this.slideInfo[this.currentSlide].shuffledOrder[t],this.slideInfo[this.currentSlide].shuffledOrder[e]],this.slideInfo[this.currentSlide].selectedFace=null}else this.showFeedback()&&(yield this.animateCardChange(),this.slideInfo[this.currentSlide].feedback=!this.slideInfo[this.currentSlide].feedback)}))}animateCardChange(){return Object(r.b)(this,void 0,void 0,(function*(){let e=[];for(let t=0;t<this.slideInfo[this.currentSlide].correctOrder.length;t++){let s=this.slideInfo[this.currentSlide].shuffledOrder.indexOf(this.slideInfo[this.currentSlide].correctOrder[t]),i="0px",n="0px";t!=s&&(1!=Math.abs(t-s)&&3!=Math.abs(t-s)||(i="-125px",(t<s&&!this.slideInfo[this.currentSlide].feedback||t>s&&this.slideInfo[this.currentSlide].feedback)&&(i="125px"),(1==t&&2==s||2==t&&1==s)&&(i="125px"==i?"-125px":"125px")),(3==Math.abs(t-s)||2==Math.abs(t-s)||1==Math.abs(t-s)&&(1==t&&2==s||2==t&&1==s))&&(n="-150px",(t<s&&!this.slideInfo[this.currentSlide].feedback||t>s&&this.slideInfo[this.currentSlide].feedback)&&(n="150px")));let c="#card-"+(this.slideInfo[this.currentSlide].feedback?s:t),o=Object(C.h)().addElement(document.querySelectorAll(c)[this.currentSlide]).fill("none").duration(300).fromTo("transform","translate(0vw, 0vh)","translate("+i+", "+n+")");e.push(o)}for(let t=0;t<e.length;t++)t==e.length-1?yield e[t].play():e[t].play()}))}showFeedback(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ht.CORRECT||this.slideInfo[this.currentSlide].stage==ht.INCORRECT)}scoreCardDisplayed(){return this.currentSlide>=this.numberOfSlides}changeSlide(){return Object(r.b)(this,void 0,void 0,(function*(){(yield this.slideElement.getActiveIndex())>this.currentSlide&&(this.currentSlide=yield this.slideElement.getActiveIndex(),yield this.slideElement.lockSwipes(!0),yield this.changeScore.stop(),this.scoreCardDisplayed()||this.startMemorizeTimer())}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-shuffle"]],viewQuery:function(e,t){var s;1&e&&h.Bc(_e,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],["class","flex-slide",4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change",2,"right","12vw"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"flex-slide"],["class","prompt-small",4,"ngIf"],[2,"display","flex","justify-content","center","perspective","500px"],["id","card-0",1,"flipper","small-card",3,"ngClass","click"],[1,"front"],[3,"src",4,"ngIf"],[1,"back"],["style","backface-visibility: hidden",3,"src",4,"ngIf"],["id","card-1",1,"flipper","small-card",3,"ngClass","click"],["id","card-2",1,"flipper","small-card",3,"ngClass","click"],["id","card-3",1,"flipper","small-card",3,"ngClass","click"],[2,"text-align","center","height","10%","width","100%"],[3,"click",4,"ngIf"],["style","--background: transparent; height: 60%","lines","none",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[1,"prompt-small"],[1,"time-left"],[3,"src"],[2,"backface-visibility","hidden",3,"src"],[3,"click"],["lines","none",2,"--background","transparent","height","60%"],[2,"color","white"],[3,"ngModel","ngModelChange","click"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.vc(2,Ve,6,3,"span",2),h.vc(3,ze,3,1,"div",3),h.Xb(4,"ion-slides",4,5),h.fc("ionSlideDidChange",(function(){return t.changeSlide()})),h.vc(6,at,37,33,"ion-slide",6),h.Xb(7,"ion-slide"),h.Xb(8,"app-score-page",7),h.fc("finished",(function(e){return t.finish(e)})),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.kc("ngClass",h.pc(8,lt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),h.Kb(1),h.lc("value",t.progressPercent),h.Kb(1),h.kc("ngIf",!t.scoreCardDisplayed()),h.Kb(1),h.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),h.Kb(3),h.kc("ngForOf",t.slideInfo),h.Kb(2),h.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[i.j,c.h,i.u,c.j,i.B,c.i,i.A,Y,i.o,i.p,i.m,i.e,i.k,i.x,i.i,i.E,i.b,o.f,o.h],styles:[".wrong-card[_ngcontent-%COMP%]{background-color:#fe2e2e!important}"],data:{animation:[Object(j.k)("fadeInOut",[Object(j.h)("visible",Object(j.i)({opacity:.9})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)(":enter",[Object(j.e)(500)]),Object(j.j)(":leave",[Object(j.e)(500)])]),Object(j.k)("countdown",[Object(j.j)("active <=> inactive",[Object(j.e)(200,Object(j.f)([Object(j.i)({transform:"translateY(0%)",opacity:"1"}),Object(j.i)({transform:"translateY(75%)",opacity:"0"}),Object(j.i)({transform:"translateY(-75%)",opacity:"0"}),Object(j.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(j.k)("fadeFooter",[Object(j.h)("visible",Object(j.i)({opacity:.75})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)("invisible => visible",[Object(j.e)(1500,Object(j.f)([Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:".75"})]))]),Object(j.j)("visible => invisible",[Object(j.e)(200)])])]}}),e})();const ft=["slideElement"];function bt(e,t){if(1&e&&(h.Xb(0,"span"),h.Xb(1,"div",8),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",9),h.wc(5,"+1"),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(3),h.zc("Score: ",e.score,"/",e.progressPercent*e.taskLength,"")}}function ut(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",10),h.fc("click",(function(){return h.sc(e),h.hc().startMemorizeTimer()})),h.Xb(1,"div",11),h.wc(2," Tap to reveal "),h.Wb(),h.Wb()}if(2&e){const e=h.hc();h.kc("@fadeInOut",e.slideInfo[e.currentSlide].stage==e.Stage.START?"visible":"invisible")}}function gt(e,t){if(1&e&&(h.Xb(0,"div",20),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.yc("Memorize the face: ",e.memorizeTime,"")}}function mt(e,t){if(1&e&&(h.Xb(0,"div",20),h.wc(1,"Memorize the face: "),h.Xb(2,"span",21),h.wc(3),h.Wb(),h.Wb()),2&e){const e=h.hc(3);h.Kb(2),h.kc("@countdown",e.timeRemaining%2==0?"active":"inactive"),h.Kb(1),h.xc(e.timeRemaining)}}function pt(e,t){1&e&&(h.Xb(0,"div",20),h.wc(1,"Hold the face in your mind..."),h.Wb())}function kt(e,t){if(1&e&&h.Vb(0,"img",27),2&e){const e=h.hc(3).index,t=h.hc();h.kc("src",t.slideInfo[e].correctFace,h.tc)}}function vt(e,t){if(1&e&&(h.Xb(0,"div",22),h.Xb(1,"div",23),h.vc(2,kt,1,1,"img",24),h.Wb(),h.Xb(3,"div",25),h.Vb(4,"img",26),h.Wb(),h.Wb()),2&e){const e=h.hc(2).index,t=h.hc();h.Kb(2),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.MEMORIZE),h.Kb(2),h.kc("src",t.mask,h.tc)}}function St(e,t){if(1&e&&(h.Xb(0,"div",14),h.vc(1,gt,2,1,"div",15),h.vc(2,mt,4,2,"div",15),h.vc(3,pt,2,0,"div",15),h.Xb(4,"div",16),h.vc(5,vt,5,2,"div",17),h.Wb(),h.Xb(6,"ion-item",18),h.Xb(7,"ion-label"),h.wc(8,"Swipe to Continue"),h.Wb(),h.Vb(9,"ion-icon",19),h.Wb(),h.Wb()),2&e){const e=h.hc().index,t=h.hc();h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.START),h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.MEMORIZE),h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.MASK),h.Kb(2),h.kc("ngIf",t.slideInfo[e].stage!=t.Stage.CORRECT&&t.slideInfo[e].stage!=t.Stage.INCORRECT),h.Kb(1),h.kc("@fadeFooter",t.showFeedback()?"visible":"invisible")}}function Ot(e,t){1&e&&(h.Xb(0,"div",20),h.wc(1,"Who did you see?"),h.Wb())}function It(e,t){1&e&&(h.Xb(0,"div",20),h.wc(1,"Correct!"),h.Wb())}function wt(e,t){1&e&&(h.Xb(0,"div",20),h.wc(1,"Incorrect!"),h.Wb())}const yt=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function Et(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",28),h.vc(1,Ot,2,0,"div",15),h.vc(2,It,2,0,"div",15),h.vc(3,wt,2,0,"div",15),h.Xb(4,"div"),h.Xb(5,"div"),h.Xb(6,"ion-card",29),h.fc("click",(function(){h.sc(e);const t=h.hc().index,s=h.hc();return s.selectFace(s.slideInfo[t].faces[0])})),h.Vb(7,"img",27),h.Wb(),h.Xb(8,"ion-card",29),h.fc("click",(function(){h.sc(e);const t=h.hc().index,s=h.hc();return s.selectFace(s.slideInfo[t].faces[1])})),h.Vb(9,"img",27),h.Wb(),h.Wb(),h.Xb(10,"div"),h.Xb(11,"ion-card",29),h.fc("click",(function(){h.sc(e);const t=h.hc().index,s=h.hc();return s.selectFace(s.slideInfo[t].faces[2])})),h.Vb(12,"img",27),h.Wb(),h.Xb(13,"ion-card",29),h.fc("click",(function(){h.sc(e);const t=h.hc().index,s=h.hc();return s.selectFace(s.slideInfo[t].faces[3])})),h.Vb(14,"img",27),h.Wb(),h.Wb(),h.Wb(),h.Xb(15,"ion-item",18),h.Xb(16,"ion-label"),h.wc(17,"Swipe to Continue"),h.Wb(),h.Vb(18,"ion-icon",19),h.Wb(),h.Wb()}if(2&e){const e=h.hc().index,t=h.hc();h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.SELECT),h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.CORRECT),h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.INCORRECT),h.Kb(3),h.kc("button",!t.showFeedback())("ngClass",h.oc(16,yt,t.showFeedback()&&t.slideInfo[e].faces[0]!=t.slideInfo[e].correctFace&&t.slideInfo[e].faces[0]==t.slideInfo[e].selectedFace,t.showFeedback()&&t.slideInfo[e].faces[0]!=t.slideInfo[e].correctFace)),h.Kb(1),h.kc("src",t.slideInfo[e].faces[0],h.tc),h.Kb(1),h.kc("button",!t.showFeedback())("ngClass",h.oc(19,yt,t.showFeedback()&&t.slideInfo[e].faces[1]!=t.slideInfo[e].correctFace&&t.slideInfo[e].faces[1]==t.slideInfo[e].selectedFace,t.showFeedback()&&t.slideInfo[e].faces[1]!=t.slideInfo[e].correctFace)),h.Kb(1),h.kc("src",t.slideInfo[e].faces[1],h.tc),h.Kb(2),h.kc("button",!t.showFeedback())("ngClass",h.oc(22,yt,t.showFeedback()&&t.slideInfo[e].faces[2]!=t.slideInfo[e].correctFace&&t.slideInfo[e].faces[2]==t.slideInfo[e].selectedFace,t.showFeedback()&&t.slideInfo[e].faces[2]!=t.slideInfo[e].correctFace)),h.Kb(1),h.kc("src",t.slideInfo[e].faces[2],h.tc),h.Kb(1),h.kc("button",!t.showFeedback())("ngClass",h.oc(25,yt,t.showFeedback()&&t.slideInfo[e].faces[3]!=t.slideInfo[e].correctFace&&t.slideInfo[e].faces[3]==t.slideInfo[e].selectedFace,t.showFeedback()&&t.slideInfo[e].faces[3]!=t.slideInfo[e].correctFace)),h.Kb(1),h.kc("src",t.slideInfo[e].faces[3],h.tc),h.Kb(1),h.kc("@fadeFooter",t.showFeedback()?"visible":"invisible")}}function Ct(e,t){if(1&e&&(h.Xb(0,"ion-slide"),h.vc(1,St,10,5,"div",12),h.vc(2,Et,19,28,"div",13),h.Wb()),2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngIf",s.firstStage(e)),h.Kb(1),h.kc("ngIf",!s.firstStage(e))}}const Tt=function(e,t,s){return{default:e,success:t,failure:s}};var Ft=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({});let Wt=(()=>{class e{constructor(){this.finished=new h.s,this.Stage=Ft,this.numberOfOptions=4,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=3}ngOnInit(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.changeScore=Object(C.h)(),this.taskLength=this.facePaths.length,this.slideInfo=[];for(let e=0;e<this.taskLength;e++)this.slideInfo.push({correctFace:this.facePaths[e],selectedFace:null,faces:this.getSlideFaces(e),stage:Ft.START})}ngAfterViewInit(){this.slideElement.lockSwipes(!0)}ngOnDestroy(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}selectFace(e){this.slideInfo[this.currentSlide].stage==Ft.SELECT&&(this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=Ft.CORRECT,this.changeScore=Object(C.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=Ft.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0))}getSlideFaces(e){let t=[];for(let i=0;i<this.numberOfOptions-1;i++){let s=Math.floor(Math.random()*this.taskLength);for(;t.indexOf(this.facePaths[s])>-1||this.facePaths[s]==this.facePaths[e];)s=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[s])}let s=Math.floor(Math.random()*this.numberOfOptions);return t.splice(s,0,this.facePaths[e]),t}startMemorizeTimer(){return Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=Ft.MEMORIZE,this.timer=Object(a.a)(1e3*this.timeRemaining).subscribe(()=>{this.startMaskTimer()}),this.interval=Object(l.a)(1e3).pipe(w(Object(a.a)(1e3*this.timeRemaining))).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining--})))}))}startMaskTimer(){return Object(r.b)(this,void 0,void 0,(function*(){Object(C.h)().addElement(document.querySelectorAll(".flipper")).fill("none").duration(2400).keyframes([{offset:0,transform:"rotateY(0deg)"},{offset:.15,transform:"rotateY(180deg)"},{offset:1,transform:"rotateY(180deg)"}]).play(),this.timer=Object(a.a)(400).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage=Ft.MASK}))),this.timer=Object(a.a)(2200).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage=Ft.SELECT})))}))}firstStage(e){return this.slideInfo[e].stage==Ft.START||this.slideInfo[e].stage==Ft.MEMORIZE||this.slideInfo[e].stage==Ft.MASK}getSrc(e){return this.slideInfo[e].stage==Ft.MEMORIZE?this.slideInfo[e].correctFace:this.slideInfo[e].stage==Ft.MASK?this.mask:null}showFeedback(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==Ft.CORRECT||this.slideInfo[this.currentSlide].stage==Ft.INCORRECT)}scoreCardDisplayed(){return this.currentSlide>=this.taskLength}changeSlide(){return Object(r.b)(this,void 0,void 0,(function*(){(yield this.slideElement.getActiveIndex())>this.currentSlide&&(this.currentSlide=yield this.slideElement.getActiveIndex(),yield this.slideElement.lockSwipes(!0),yield this.changeScore.stop(),this.scoreCardDisplayed()||this.startMemorizeTimer())}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-forced-choice"]],viewQuery:function(e,t){var s;1&e&&h.Bc(ft,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],["class","flex-slide","style","align-items: center",4,"ngIf"],["class","flex-slide",4,"ngIf"],[1,"flex-slide",2,"align-items","center"],["class","prompt",4,"ngIf"],[2,"perspective","500px"],["class","flipper large-card",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[1,"prompt"],[1,"time-left"],[1,"flipper","large-card"],[1,"front"],[3,"src",4,"ngIf"],[1,"back"],[2,"width","85%","backface-visibility","hidden",3,"src"],[3,"src"],[1,"flex-slide"],[1,"grid-card",3,"button","ngClass","click"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.vc(2,bt,6,2,"span",2),h.vc(3,ut,3,1,"div",3),h.Xb(4,"ion-slides",4,5),h.fc("ionSlideDidChange",(function(){return t.changeSlide()})),h.vc(6,Ct,3,2,"ion-slide",6),h.Xb(7,"ion-slide"),h.Xb(8,"app-score-page",7),h.fc("finished",(function(){return t.finished.emit([t.score,2])})),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.kc("ngClass",h.pc(8,Tt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),h.Kb(1),h.lc("value",t.progressPercent),h.Kb(1),h.kc("ngIf",!t.scoreCardDisplayed()),h.Kb(1),h.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),h.Kb(3),h.kc("ngForOf",t.slideInfo),h.Kb(2),h.kc("score",t.score)("length",t.taskLength)("assessment",!0))},directives:[i.j,c.h,i.u,c.j,i.B,c.i,i.A,Y,i.o,i.p,i.m,i.g],styles:[""],data:{animation:[Object(j.k)("fadeInOut",[Object(j.h)("visible",Object(j.i)({opacity:.9})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)(":enter",[Object(j.e)(500)]),Object(j.j)(":leave",[Object(j.e)(500)])]),Object(j.k)("countdown",[Object(j.j)("active <=> inactive",[Object(j.e)(200,Object(j.f)([Object(j.i)({transform:"translateY(0%)",opacity:"1"}),Object(j.i)({transform:"translateY(75%)",opacity:"0"}),Object(j.i)({transform:"translateY(-75%)",opacity:"0"}),Object(j.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(j.k)("fadeFooter",[Object(j.h)("visible",Object(j.i)({opacity:.75})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)("invisible => visible",[Object(j.e)(1500,Object(j.f)([Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:".75"})]))]),Object(j.j)("visible => invisible",[Object(j.e)(200)])])]}}),e})();const Rt=["slideElement"];function jt(e,t){if(1&e&&(h.Xb(0,"span"),h.Xb(1,"div",8),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",9),h.wc(5,"+1"),h.Wb(),h.Wb()),2&e){const e=h.hc();h.Kb(3),h.zc("Score: ",e.score,"/",e.progressPercent*e.taskLength,"")}}function Xt(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",10),h.fc("click",(function(){return h.sc(e),h.hc().startMemorizeTimer()})),h.Xb(1,"div",11),h.wc(2," Tap to reveal "),h.Wb(),h.Wb()}if(2&e){const e=h.hc();h.kc("@fadeInOut",e.slideInfo[e.currentSlide].stage==e.Stage.START?"visible":"invisible")}}function Mt(e,t){if(1&e&&(h.Xb(0,"div",19),h.wc(1),h.Wb()),2&e){const e=h.hc(2);h.Kb(1),h.yc("Memorize the face: ",e.memorizeTime,"")}}function Kt(e,t){if(1&e&&(h.Xb(0,"div",19),h.wc(1,"Memorize the face: "),h.Xb(2,"span",20),h.wc(3),h.Wb(),h.Wb()),2&e){const e=h.hc(2);h.Kb(2),h.kc("@countdown",e.timeRemaining%2==0?"active":"inactive"),h.Kb(1),h.xc(e.timeRemaining)}}function xt(e,t){1&e&&(h.Xb(0,"div",19),h.wc(1,"Hold the face in your mind..."),h.Wb())}function At(e,t){1&e&&(h.Xb(0,"div",19),h.wc(1,"Is this the same person?"),h.Wb())}function Pt(e,t){1&e&&(h.Xb(0,"div",19),h.wc(1,"Correct!"),h.Wb())}function Lt(e,t){1&e&&(h.Xb(0,"div",19),h.wc(1,"Incorrect!"),h.Wb())}function Nt(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",28),h.fc("click",(function(){return h.sc(e),h.hc(3).selectFace(!0)})),h.Wb()}}function Yt(e,t){if(1&e&&h.Vb(0,"img",29),2&e){const e=h.hc(2).index,t=h.hc();h.kc("src",t.getSrc(e),h.tc)}}function Dt(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",30),h.fc("click",(function(){return h.sc(e),h.hc(3).selectFace(!1)})),h.Wb()}}function _t(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",21),h.fc("pan",(function(t){return h.sc(e),h.hc(2).drag(t)}))("panend",(function(t){return h.sc(e),h.hc(2).returnCenter(t)})),h.Xb(1,"div",22),h.vc(2,Nt,1,0,"ion-icon",23),h.vc(3,Yt,1,1,"img",24),h.vc(4,Dt,1,0,"ion-icon",25),h.Wb(),h.Xb(5,"div",26),h.Vb(6,"img",27),h.Wb(),h.Wb()}if(2&e){const e=h.hc().index,t=h.hc();h.kc("@swipeCard",1==t.slideInfo[e].selection?"left":"right"),h.Kb(2),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.SELECT),h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage!=t.Stage.START),h.Kb(1),h.kc("ngIf",t.slideInfo[e].stage==t.Stage.SELECT),h.Kb(2),h.kc("src",t.mask,h.tc)}}function Vt(e,t){1&e&&(h.Xb(0,"div",35),h.wc(1,"Same"),h.Wb())}function zt(e,t){1&e&&(h.Xb(0,"div",35),h.wc(1,"Different"),h.Wb())}function Ht(e,t){if(1&e&&(h.Xb(0,"div",31),h.vc(1,Vt,2,0,"div",32),h.vc(2,zt,2,0,"div",32),h.Xb(3,"div"),h.Xb(4,"ion-card",33),h.Vb(5,"img",34),h.Wb(),h.Xb(6,"ion-card",33),h.Vb(7,"img",34),h.Wb(),h.Wb(),h.Wb()),2&e){const e=h.hc().index,t=h.hc();h.Kb(1),h.kc("ngIf",t.slideInfo[e].correctFace==t.slideInfo[e].displayedFace),h.Kb(1),h.kc("ngIf",t.slideInfo[e].correctFace!=t.slideInfo[e].displayedFace),h.Kb(3),h.kc("src",t.slideInfo[e].correctFace,h.tc),h.Kb(2),h.kc("src",t.slideInfo[e].displayedFace,h.tc)}}function Bt(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",36),h.Xb(1,"ion-button",37),h.fc("click",(function(){return h.sc(e),h.hc(2).selectFace(!0)})),h.wc(2,"Same"),h.Wb(),h.Xb(3,"ion-button",38),h.fc("click",(function(){return h.sc(e),h.hc(2).selectFace(!1)})),h.wc(4,"Different"),h.Wb(),h.Wb()}if(2&e){const e=h.hc().index,t=h.hc();h.kc("@fadeFooter",t.slideInfo[e].stage==t.Stage.SELECT?"sameDifferent":"invisible")}}function Ut(e,t){if(1&e&&(h.Xb(0,"ion-item",39),h.Xb(1,"ion-label"),h.wc(2,"Swipe to Continue"),h.Wb(),h.Vb(3,"ion-icon",40),h.Wb()),2&e){const e=h.hc(2);h.kc("@fadeFooter",e.showFeedback()?"visible":"invisible")}}function qt(e,t){if(1&e&&(h.Xb(0,"ion-slide",12),h.vc(1,Mt,2,1,"div",13),h.vc(2,Kt,4,2,"div",13),h.vc(3,xt,2,0,"div",13),h.vc(4,At,2,0,"div",13),h.vc(5,Pt,2,0,"div",13),h.vc(6,Lt,2,0,"div",13),h.Xb(7,"div",14),h.vc(8,_t,7,5,"div",15),h.Wb(),h.vc(9,Ht,8,4,"div",16),h.vc(10,Bt,5,1,"div",17),h.vc(11,Ut,4,1,"ion-item",18),h.Wb()),2&e){const e=t.index,s=h.hc();h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.START),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.MEMORIZE),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.MASK),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.SELECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.CORRECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.INCORRECT),h.Kb(2),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.CORRECT&&s.slideInfo[e].stage!=s.Stage.INCORRECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.CORRECT||s.slideInfo[e].stage==s.Stage.INCORRECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage==s.Stage.SELECT),h.Kb(1),h.kc("ngIf",s.slideInfo[e].stage!=s.Stage.SELECT)}}const Zt=function(e,t,s){return{default:e,success:t,failure:s}};var Gt=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({});let Jt=(()=>{class e{constructor(){this.finished=new h.s,this.Stage=Gt,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=3}ngOnInit(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.changeScore=Object(C.h)(),this.taskLength=this.facePaths.length,this.slideInfo=[];for(let e=0;e<this.taskLength;e++){let t=this.facePaths[e];Math.random()>.5&&(t=this.facePaths[Math.floor(Math.random()*this.taskLength)]),this.slideInfo.push({correctFace:this.facePaths[e],displayedFace:t,selection:null,stage:Gt.START})}}ngAfterViewInit(){this.slideElement.lockSwipes(!0)}ngOnDestroy(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}selectFace(e){return Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage==Gt.SELECT&&(this.slideInfo[this.currentSlide].selection=e,this.timer=Object(a.a)(10).subscribe(()=>{e==(this.slideInfo[this.currentSlide].displayedFace==this.slideInfo[this.currentSlide].correctFace)?(this.score++,this.slideInfo[this.currentSlide].stage=Gt.CORRECT,this.changeScore=Object(C.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=Gt.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0)}))}))}startMemorizeTimer(){return Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=Gt.MEMORIZE,this.timer=Object(a.a)(1e3*this.timeRemaining).subscribe(()=>{this.startMaskTimer()}),this.interval=Object(l.a)(1e3).pipe(w(Object(a.a)(1e3*this.timeRemaining))).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.timeRemaining--})))}))}startMaskTimer(){return Object(r.b)(this,void 0,void 0,(function*(){Object(C.h)().addElement(document.querySelectorAll(".flipper")).fill("none").duration(2800).keyframes([{offset:0,transform:"rotateY(0deg)"},{offset:.15,transform:"rotateY(180deg)"},{offset:.85,transform:"rotateY(180deg)"},{offset:1,transform:"rotateY(0deg)"}]).play(),this.timer=Object(a.a)(400).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage=Gt.MASK}))),this.timer=Object(a.a)(2400).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.slideInfo[this.currentSlide].stage=Gt.SELECT})))}))}getSrc(e){return this.slideInfo[e].stage==Gt.MEMORIZE?this.slideInfo[e].correctFace:this.slideInfo[e].stage==Gt.MASK?null:this.slideInfo[e].displayedFace}showFeedback(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==Gt.CORRECT||this.slideInfo[this.currentSlide].stage==Gt.INCORRECT)}scoreCardDisplayed(){return this.currentSlide>=this.taskLength}changeSlide(){return Object(r.b)(this,void 0,void 0,(function*(){(yield this.slideElement.getActiveIndex())>this.currentSlide&&(this.currentSlide=yield this.slideElement.getActiveIndex(),yield this.slideElement.lockSwipes(!0),yield this.changeScore.stop(),this.scoreCardDisplayed()||this.startMemorizeTimer())}))}drag(e){this.slideInfo[this.currentSlide].stage==Gt.SELECT&&Array.from(document.getElementsByClassName("flipper"))[0].setAttribute("style",`transform: translateX(${e.deltaX}px) translateY(-${Math.abs(e.deltaX/2)}px) rotate(${e.deltaX/3}deg)`)}returnCenter(e){Math.abs(e.velocityX)>.5?e.velocityX<0?(this.slideInfo[this.currentSlide].selection=!0,this.selectFace(!0)):(this.slideInfo[this.currentSlide].selection=!1,this.selectFace(!1)):Array.from(document.getElementsByClassName("flipper"))[0].setAttribute("style","transform: translateX(0px) transform: translateY(0px) transform: rotate(0px)")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ob({type:e,selectors:[["app-same-different"]],viewQuery:function(e,t){var s;1&e&&h.Bc(Rt,!0),2&e&&h.qc(s=h.gc())&&(t.slideElement=s.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],["class","flex-slide",4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[2,"perspective","500px"],["class","flipper large-card",3,"pan","panend",4,"ngIf"],["style","width: 100%; display: flex; flex-direction: column; justify-content: center",4,"ngIf"],["class","swipe-footer",4,"ngIf"],["class","footer","lines","none",4,"ngIf"],[1,"prompt"],[1,"time-left"],[1,"flipper","large-card",3,"pan","panend"],[1,"front"],["color","dark","name","arrow-back","style","font-size: 150%",3,"click",4,"ngIf"],["style","border-radius: 10%;",3,"src",4,"ngIf"],["color","dark","name","arrow-forward","style","font-size: 150%",3,"click",4,"ngIf"],[1,"back"],[2,"width","85%","border-radius","10%","backface-visibility","hidden",3,"src"],["color","dark","name","arrow-back",2,"font-size","150%",3,"click"],[2,"border-radius","10%",3,"src"],["color","dark","name","arrow-forward",2,"font-size","150%",3,"click"],[2,"width","100%","display","flex","flex-direction","column","justify-content","center"],["class","subheader",4,"ngIf"],[1,"grid-card",2,"--background","gainsboro"],[3,"src"],[1,"subheader"],[1,"swipe-footer"],["color","primary",3,"click"],["color","secondary",3,"click"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Vb(1,"ion-progress-bar",1),h.vc(2,jt,6,2,"span",2),h.vc(3,Xt,3,1,"div",3),h.Xb(4,"ion-slides",4,5),h.fc("ionSlideDidChange",(function(){return t.changeSlide()})),h.vc(6,qt,12,10,"ion-slide",6),h.Xb(7,"ion-slide"),h.Xb(8,"app-score-page",7),h.fc("finished",(function(){return t.finished.emit([t.score,2])})),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.kc("ngClass",h.pc(8,Zt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),h.Kb(1),h.lc("value",t.progressPercent),h.Kb(1),h.kc("ngIf",!t.scoreCardDisplayed()),h.Kb(1),h.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),h.Kb(3),h.kc("ngForOf",t.slideInfo),h.Kb(2),h.kc("score",t.score)("length",t.taskLength)("assessment",!0))},directives:[i.j,c.h,i.u,c.j,i.B,c.i,i.A,Y,i.m,i.g,i.e,i.o,i.p],styles:[".swipe-footer[_ngcontent-%COMP%]{opacity:0;--background:grey;width:100%}"],data:{animation:[Object(j.k)("fadeInOut",[Object(j.h)("visible",Object(j.i)({opacity:.9})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)(":enter",[Object(j.e)(500)]),Object(j.j)(":leave",[Object(j.e)(500)])]),Object(j.k)("countdown",[Object(j.j)("active <=> inactive",[Object(j.e)(200,Object(j.f)([Object(j.i)({transform:"translateY(0%)",opacity:"1"}),Object(j.i)({transform:"translateY(75%)",opacity:"0"}),Object(j.i)({transform:"translateY(-75%)",opacity:"0"}),Object(j.i)({transform:"translateY(0%)",opacity:"1"})]))])]),Object(j.k)("fadeFooter",[Object(j.h)("visible",Object(j.i)({opacity:.75})),Object(j.h)("sameDifferent",Object(j.i)({opacity:1})),Object(j.h)("invisible",Object(j.i)({opacity:0})),Object(j.j)("void => visible",[Object(j.e)(1500,Object(j.f)([Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:"0"}),Object(j.i)({opacity:".75"})]))]),Object(j.j)("void => sameDifferent",[Object(j.e)(500)]),Object(j.j)("visible => invisible",[Object(j.e)(200)])]),Object(j.k)("swipeCard",[Object(j.j)("right => void",[Object(j.e)(200,Object(j.f)([Object(j.i)({transform:"*",position:"absolute",zIndex:"21"}),Object(j.i)({transform:"translateY(-50%) translateX(100%) rotate(100deg)",position:"absolute",zIndex:"21"})]))]),Object(j.j)("left => void",[Object(j.e)(200,Object(j.f)([Object(j.i)({transform:"*",position:"absolute",zIndex:"21"}),Object(j.i)({transform:"translateY(-50%) translateX(-100%) rotate(-100deg)",position:"absolute",zIndex:"21"})]))])])]}}),e})();function Qt(e,t){1&e&&(h.Xb(0,"ion-buttons",12),h.Vb(1,"ion-menu-button",13),h.Wb())}function $t(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",14),h.fc("click",(function(){return h.sc(e),h.hc().taskExitAlert()})),h.Wb()}}function es(e,t){if(1&e){const e=h.Yb();h.Xb(0,"ion-icon",15),h.fc("click",(function(){return h.sc(e),h.hc().getHelp(!1)})),h.Wb()}}function ts(e,t){1&e&&(h.Xb(0,"div",16),h.Vb(1,"ion-spinner",17),h.Wb())}function ss(e,t){if(1&e&&(h.Xb(0,"div"),h.Xb(1,"div",25),h.Xb(2,"b"),h.wc(3),h.Wb(),h.Wb(),h.Xb(4,"div",26),h.wc(5,"Are you ready to train?"),h.Wb(),h.Wb()),2&e){const e=h.hc(3);h.Kb(3),h.yc("Level ",e.userLevel,"")}}function is(e,t){1&e&&(h.Xb(0,"div"),h.Xb(1,"div",27),h.Xb(2,"b"),h.wc(3,"Pre-Assessment"),h.Wb(),h.Wb(),h.Xb(4,"div",26),h.wc(5,"It looks like you're new, are you ready to begin your pretest?"),h.Wb(),h.Wb())}function ns(e,t){1&e&&(h.Xb(0,"div"),h.Xb(1,"div",27),h.Xb(2,"b"),h.wc(3,"Post-Assessment"),h.Wb(),h.Wb(),h.Xb(4,"div",26),h.wc(5,"It looks like you've completed all eight levels, are you ready to begin your post-test?"),h.Wb(),h.Wb())}function cs(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",22),h.vc(1,ss,6,1,"div",23),h.vc(2,is,6,0,"div",23),h.vc(3,ns,6,0,"div",23),h.Vb(4,"br"),h.Xb(5,"ion-button",24),h.fc("click",(function(){return h.sc(e),h.hc(2).clickStart()})),h.wc(6,"Start"),h.Wb(),h.Wb()}if(2&e){const e=h.hc(2);h.Kb(1),h.kc("ngIf",e.userLevel>0&&e.userLevel<9),h.Kb(1),h.kc("ngIf",0==e.userLevel),h.Kb(1),h.kc("ngIf",9==e.userLevel)}}function os(e,t){if(1&e&&(h.Xb(0,"span"),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.zc(": ",e.scores[e.Task.NAME_FACE],"/",e.taskLengths[e.Task.NAME_FACE],"")}}function rs(e,t){if(1&e&&(h.Xb(0,"span"),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.zc(": ",e.scores[e.Task.WHOS_NEW],"/",e.taskLengths[e.Task.WHOS_NEW],"")}}function as(e,t){if(1&e&&(h.Xb(0,"span"),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.zc(": ",e.scores[e.Task.MEMORY],"/",e.taskLengths[e.Task.MEMORY],"")}}function ls(e,t){if(1&e&&(h.Xb(0,"span"),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.zc(": ",e.scores[e.Task.SHUFFLE],"/",e.taskLengths[e.Task.SHUFFLE],"")}}const hs=function(e,t){return{"task-done":e,"task-failed":t}};function ds(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",28),h.Xb(1,"div",29),h.wc(2,"What would you like to do next?"),h.Wb(),h.Xb(3,"ion-card",30),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return-1==t.scores[t.Task.NAME_FACE]&&t.renderLevelOneHelp(),t.task=t.Task.NAME_FACE})),h.Vb(4,"ion-icon",31),h.Xb(5,"div"),h.wc(6,"Name and Face"),h.vc(7,os,2,2,"span",23),h.Wb(),h.Wb(),h.Xb(8,"ion-card",30),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return-1==t.scores[t.Task.WHOS_NEW]&&t.renderLevelOneHelp(),t.task=t.Task.WHOS_NEW})),h.Vb(9,"ion-icon",32),h.Xb(10,"div"),h.wc(11,"Who's New"),h.vc(12,rs,2,2,"span",23),h.Wb(),h.Wb(),h.Xb(13,"ion-card",30),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return-1==t.scores[t.Task.MEMORY]&&t.renderLevelOneHelp(),t.task=t.Task.MEMORY})),h.Vb(14,"ion-icon",33),h.Xb(15,"div"),h.wc(16,"Memory Match"),h.vc(17,as,2,2,"span",23),h.Wb(),h.Wb(),h.Xb(18,"ion-card",30),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return-1==t.scores[t.Task.SHUFFLE]&&t.renderLevelOneHelp(),t.task=t.Task.SHUFFLE})),h.Vb(19,"ion-icon",34),h.Xb(20,"div"),h.wc(21,"Shuffle"),h.vc(22,ls,2,2,"span",23),h.Wb(),h.Wb(),h.Xb(23,"ion-button",35),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return t.task=t.Task.LEARNING})),h.Vb(24,"ion-icon",36),h.wc(25," \xa0 "),h.Vb(26,"ion-icon",36),h.Wb(),h.Xb(27,"ion-button",37),h.fc("click",(function(){return h.sc(e),h.hc(2).startAssessmentAlert()})),h.Vb(28,"ion-icon",36),h.Wb(),h.Wb()}if(2&e){const e=h.hc(2);h.Kb(3),h.kc("ngClass",h.oc(12,hs,e.scores[e.Task.NAME_FACE]>=e.taskLengths[e.Task.NAME_FACE]*e.minTrainScore,e.scores[e.Task.NAME_FACE]>-1&&e.scores[e.Task.NAME_FACE]<e.taskLengths[e.Task.NAME_FACE]*e.minTrainScore)),h.Kb(4),h.kc("ngIf",e.scores[e.Task.NAME_FACE]>-1),h.Kb(1),h.kc("ngClass",h.oc(15,hs,e.scores[e.Task.WHOS_NEW]>=e.taskLengths[e.Task.WHOS_NEW]*e.minTrainScore,e.scores[e.Task.WHOS_NEW]>-1&&e.scores[e.Task.WHOS_NEW]<e.taskLengths[e.Task.WHOS_NEW]*e.minTrainScore)),h.Kb(4),h.kc("ngIf",e.scores[e.Task.WHOS_NEW]>-1),h.Kb(1),h.kc("ngClass",h.oc(18,hs,e.scores[e.Task.MEMORY]>=e.taskLengths[e.Task.MEMORY]*e.minTrainScore,e.scores[e.Task.MEMORY]>-1&&e.scores[e.Task.MEMORY]<e.taskLengths[e.Task.MEMORY]*e.minTrainScore)),h.Kb(4),h.kc("ngIf",e.scores[e.Task.MEMORY]>-1),h.Kb(1),h.kc("ngClass",h.oc(21,hs,e.scores[e.Task.SHUFFLE]>=e.taskLengths[e.Task.SHUFFLE]*e.minTrainScore,e.scores[e.Task.SHUFFLE]>-1&&e.scores[e.Task.SHUFFLE]<e.taskLengths[e.Task.SHUFFLE]*e.minTrainScore)),h.Kb(4),h.kc("ngIf",e.scores[e.Task.SHUFFLE]>-1),h.Kb(2),h.kc("src",e.replay_icon),h.Kb(2),h.kc("src",e.face_icon),h.Kb(1),h.kc("disabled",e.trainingNotDone()),h.Kb(1),h.kc("src",e.assessment_icon)}}function fs(e,t){if(1&e&&(h.Xb(0,"span"),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.zc(": ",e.scores[e.Task.FORCED_CHOICE],"/",e.taskLengths[e.Task.FORCED_CHOICE],"")}}function bs(e,t){if(1&e&&(h.Xb(0,"span"),h.wc(1),h.Wb()),2&e){const e=h.hc(3);h.Kb(1),h.zc(": ",e.scores[e.Task.SAME_DIFFERENT],"/",e.taskLengths[e.Task.SAME_DIFFERENT],"")}}const us=function(e){return{"task-done":e}};function gs(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div",28),h.Xb(1,"div",29),h.wc(2,"What would you like to do next?"),h.Wb(),h.Xb(3,"ion-card",30),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return-1==t.scores[4]&&(t.task=t.Task.FORCED_CHOICE),t.renderLevelOneHelp()})),h.Vb(4,"ion-icon",38),h.Xb(5,"div"),h.wc(6,"Forced Choice"),h.vc(7,fs,2,2,"span",23),h.Wb(),h.Wb(),h.Xb(8,"ion-card",30),h.fc("click",(function(){h.sc(e);const t=h.hc(2);return-1==t.scores[5]&&(t.task=t.Task.SAME_DIFFERENT),t.renderLevelOneHelp()})),h.Vb(9,"ion-icon",39),h.Xb(10,"div"),h.wc(11,"Same Different"),h.vc(12,bs,2,2,"span",23),h.Wb(),h.Wb(),h.Wb()}if(2&e){const e=h.hc(2);h.Kb(3),h.kc("ngClass",h.nc(4,us,-1!=e.scores[4])),h.Kb(4),h.kc("ngIf",e.scores[4]>-1),h.Kb(1),h.kc("ngClass",h.nc(6,us,-1!=e.scores[5])),h.Kb(4),h.kc("ngIf",e.scores[5]>-1)}}function ms(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div"),h.Xb(1,"div",26),h.wc(2,"You've entered level 1! Tap to begin your training."),h.Wb(),h.Xb(3,"ion-button",24),h.fc("click",(function(){return h.sc(e),h.hc(4).initCurrentLevel()})),h.wc(4,"Train"),h.Wb(),h.Wb()}2&e&&h.kc("@fadeIn",void 0)}function ps(e,t){1&e&&(h.Xb(0,"div"),h.Xb(1,"div",26),h.wc(2,"You've moved on to the next level! Come back tomorrow for your next training."),h.Wb(),h.Xb(3,"ion-button",46),h.wc(4,"Home"),h.Wb(),h.Wb()),2&e&&h.kc("@fadeIn",void 0)}function ks(e,t){if(1&e){const e=h.Yb();h.Xb(0,"div"),h.Xb(1,"div",26),h.wc(2,"You've completed all eight levels! Now it's time for your post-assessment."),h.Wb(),h.Xb(3,"ion-button",24),h.fc("click",(function(){return h.sc(e),h.hc(4).initCurrentLevel()})),h.wc(4,"Post-Assessment"),h.Wb(),h.Wb()}2&e&&h.kc("@fadeIn",void 0)}function vs(e,t){if(1&e&&(h.Xb(0,"div",42),h.Xb(1,"div",25),h.Xb(2,"b"),h.wc(3,"Finished!"),h.Wb(),h.Wb(),h.Vb(4,"ion-progress-bar",43),h.Xb(5,"div",44),h.wc(6,"Level "),h.Xb(7,"span",45),h.wc(8),h.Wb(),h.Wb(),h.vc(9,ms,5,1,"div",23),h.vc(10,ps,5,1,"div",23),h.vc(11,ks,5,1,"div",23),h.Wb()),2&e){const e=h.hc(3);h.Kb(4),h.lc("value",e.progress),h.Kb(4),h.xc(e.userLevel),h.Kb(1),h.kc("ngIf",1==e.userLevel),h.Kb(1),h.kc("ngIf",e.userLevel>0&&e.userLevel<9),h.Kb(1),h.kc("ngIf",9==e.userLevel)}}function Ss(e,t){1&e&&(h.Xb(0,"div"),h.Xb(1,"div",25),h.Xb(2,"b"),h.wc(3,"You're all done."),h.Wb(),h.Wb(),h.Xb(4,"div",26),h.wc(5,"Since you've completed all eight levels and the post assessment, you don't have anything else to do! Thank you for your participation in this research."),h.Wb(),h.Xb(6,"ion-button",46),h.wc(7,"Home"),h.Wb(),h.Wb())}function Os(e,t){if(1&e&&(h.Xb(0,"div",40),h.vc(1,vs,12,5,"div",41),h.vc(2,Ss,8,0,"div",23),h.Wb()),2&e){const e=h.hc(2);h.Kb(1),h.kc("ngIf",e.userLevel<=9),h.Kb(1),h.kc("ngIf",e.userLevel>9)}}function Is(e,t){if(1&e&&(h.Xb(0,"div",18),h.vc(1,cs,7,3,"div",19),h.vc(2,ds,29,24,"div",20),h.vc(3,gs,13,8,"div",20),h.vc(4,Os,3,2,"div",21),h.Wb()),2&e){const e=h.hc();h.Kb(1),h.kc("ngIf",e.stage==e.Stage.START),h.Kb(1),h.kc("ngIf",e.stage==e.Stage.TRAINING),h.Kb(1),h.kc("ngIf",e.stage==e.Stage.ASSESSMENT),h.Kb(1),h.kc("ngIf",e.stage==e.Stage.DONE)}}function ws(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-learning-task",47),h.fc("finished",(function(){h.sc(e);const t=h.hc();return t.learningDone=!0,t.iterateStage()})),h.Wb()}if(2&e){const e=h.hc();h.kc("setNames",e.setNames)("facePaths",e.trainingFacePaths)}}function ys(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-name-face",47),h.fc("finished",(function(t){return h.sc(e),h.hc().finished(t,0)})),h.Wb()}if(2&e){const e=h.hc();h.kc("setNames",e.setNames)("facePaths",e.trainingFacePaths)}}function Es(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-whos-new",48),h.fc("finished",(function(t){return h.sc(e),h.hc().finished(t,1)})),h.Wb()}if(2&e){const e=h.hc();h.kc("facePaths",e.trainingFacePaths)("newFacePaths",e.whosNewFacePaths)}}function Cs(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-memory-match",49),h.fc("finished",(function(t){return h.sc(e),h.hc().finished(t,2)})),h.Wb()}if(2&e){const e=h.hc();h.kc("facePaths",e.trainingFacePaths)}}function Ts(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-shuffle",49),h.fc("finished",(function(t){return h.sc(e),h.hc().finished(t,3)})),h.Wb()}if(2&e){const e=h.hc();h.kc("facePaths",e.trainingFacePaths)}}function Fs(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-forced-choice",49),h.fc("finished",(function(t){return h.sc(e),h.hc().finished(t,4)})),h.Wb()}if(2&e){const e=h.hc();h.kc("facePaths",e.assessmentFacePaths)}}function Ws(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-same-different",49),h.fc("finished",(function(t){return h.sc(e),h.hc().finished(t,5)})),h.Wb()}if(2&e){const e=h.hc();h.kc("facePaths",e.assessmentFacePaths)}}function Rs(e,t){if(1&e){const e=h.Yb();h.Xb(0,"app-same-different",49),h.fc("finished",(function(t){return h.sc(e),h.hc().finishPrePost(t)})),h.Wb()}if(2&e){const e=h.hc();h.kc("facePaths",e.assessmentFacePaths)}}const js=function(e){return{"blue-border":e}};var Xs=function(e){return e[e.BLACK=0]="BLACK",e[e.ASIAN=1]="ASIAN",e}({}),Ms=function(e){return e[e.START=0]="START",e[e.TRAINING=1]="TRAINING",e[e.ASSESSMENT=2]="ASSESSMENT",e[e.DONE=3]="DONE",e}({}),Ks=function(e){return e[e.NAME_FACE=0]="NAME_FACE",e[e.WHOS_NEW=1]="WHOS_NEW",e[e.MEMORY=2]="MEMORY",e[e.SHUFFLE=3]="SHUFFLE",e[e.FORCED_CHOICE=4]="FORCED_CHOICE",e[e.SAME_DIFFERENT=5]="SAME_DIFFERENT",e[e.PRETEST=6]="PRETEST",e[e.POSTTEST=7]="POSTTEST",e[e.LEARNING=8]="LEARNING",e}({});let xs={0:{race:Xs.BLACK,namePool:{1:["James","John","Robert","Michael","Will","David","Richard","Joseph"],2:["Thomas","Charlie","Chris","Daniel","Matthew","Anthony","Don","Mark"],3:["Paul","Steven","Andrew","Ken","Joshua","George","Kevin","Brian"],4:["Edward","Ron","Tim","Jason","Jeff","Ryan","Jacob","Gary"],5:["Nick","Eric","Stephen","Jonathan","Larry","Justin","Scott","Brandon"],6:["Frank","Ben","Greg","Sam","Ray","Patrick","Alex","Jack"],7:["Dennis","Jerry","Tyler","Aaron","Jose","Henry","Doug","Adam"],8:["Peter","Nathan","Zach","Walter","Kyle","Harry","Carl","Jeremy"]}}},As=(()=>{class e{constructor(e,t,s,i,n,c,o,r){this.alertController=e,this.modalController=t,this.routerOutlet=s,this.getProgress=i,this.submitScores=n,this.toastController=c,this.localNotifications=o,this.http=r,this.Race=Xs,this.Stage=Ms,this.Task=Ks,this.stage=null,this.task=null,this.learningDone=!1,this.scores=[-1,-1,-1,-1,-1,-1],this.minTrainScore=.75,this.taskLengths=[8,8,32,16,8,8],this.numFaces=8,this.assessmentPoolSize=30,this.assessment_icon="assets/icon/assessment.svg",this.replay_icon="assets/icon/replay.svg",this.face_icon="assets/icon/face.svg",this.routerOutlet.swipeGesture=!1}ionViewWillEnter(){this.stage=null,this.task=null,Object(a.a)(500).subscribe(()=>{this.currentRace=Xs.BLACK,this.initCurrentLevel()})}ngAfterViewInit(){0==this.userLevel&&Object(a.a)(500).subscribe(()=>{this.getHelp(!0)})}initCurrentLevel(e=Xs.BLACK){this.currentRace=e,this.getProgress.getData().subscribe(e=>{let t=e.days;this.userLevel=e.level;let s=!1;if(0==this.userLevel||9==this.userLevel)this.getPrePostAssessmentFaces().then(e=>{this.assessmentFacePaths=e,Object(a.a)(1e3).subscribe(()=>{this.stage=Ms.START})});else if(this.userLevel>0&&this.userLevel<9){let e=(new Date).toLocaleDateString(),i="";for(let s in t)[t[s].nameface,t[s].whosnew,t[s].memory,t[s].shuffle,t[s].forcedchoice,t[s].samedifferent].indexOf(-1)<0&&(i=new Date(t[s].date).toLocaleDateString());e==i&&(s=!0),s?(this.userLevel--,this.finishLevel()):(this.setNames=xs[this.currentRace].namePool[this.userLevel],this.getTrainingFaces().then(e=>{this.trainingFacePaths=e,this.getWhosNewFaces().then(e=>{this.whosNewFacePaths=e,this.getDailyAssessmentFaces().then(e=>{this.assessmentFacePaths=e,t[this.userLevel-1]&&(this.scores=[t[this.userLevel-1].nameface,t[this.userLevel-1].whosnew,t[this.userLevel-1].memory,t[this.userLevel-1].shuffle,t[this.userLevel-1].forcedchoice,t[this.userLevel-1].samedifferent],this.learningDone=this.scores.indexOf(-1)>-1),Object(a.a)(1e3).subscribe(()=>{this.iterateStage()})})})}))}else this.stage=Ms.DONE;let i=[];i.push(new Image),i[i.length-1].src="assets/background_imgs/mask1.png"},e=>Object(r.b)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:"Something went wrong. Please try logging out and back in",color:"danger",duration:2e3})).present()})))}iterateStage(){this.task=null,this.learningDone?this.trainingNotDone()?(this.stage=Ms.TRAINING,-1==this.scores[Ks.NAME_FACE]&&-1==this.scores[Ks.WHOS_NEW]&&-1==this.scores[Ks.MEMORY]&&-1==this.scores[Ks.SAME_DIFFERENT]&&this.renderLevelOneHelp()):this.scores.includes(-1)?(this.stage=Ms.ASSESSMENT,-1==this.scores[Ks.FORCED_CHOICE]&&-1==this.scores[Ks.SAME_DIFFERENT]&&this.renderLevelOneHelp()):(this.finishLevel(),this.scheduleNotification()):this.stage=Ms.START}getTitle(){switch(this.task){case null:switch(this.stage){case Ms.START:return"Start";case Ms.TRAINING:return"Training Tasks";case Ms.ASSESSMENT:return"Assessment Tasks";case Ms.DONE:return"Finish";default:return"Modules"}case Ks.LEARNING:return"Meet Today's Faces";case Ks.NAME_FACE:return"Name and Face";case Ks.WHOS_NEW:return"Who's New?";case Ks.MEMORY:return"Memory Match";case Ks.SHUFFLE:return"Shuffle";case Ks.FORCED_CHOICE:return"Forced Choice";case Ks.SAME_DIFFERENT:return"Same-Different";case Ks.PRETEST:return"Pre-Assessment";case Ks.POSTTEST:return"Post-Assessment";default:return"Modules"}}getHelp(e){return Object(r.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:S,componentProps:{paramTask:this.getTitle(),displayFirst:e}});yield t.present()}))}renderLevelOneHelp(){1==this.userLevel&&Object(a.a)(500).subscribe(()=>{this.getHelp(!0)})}getTrainingFaces(){return Object(r.b)(this,void 0,void 0,(function*(){let e=[],t=!0;for(let s=0;s<8;s++){let i=sessionStorage.getItem("training"+s);if(!i){t=!1;break}e.push(i)}if(!t){e=[];const t={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};yield this.http.put("https://crossfacerecognition.herokuapp.com/getTrainingFaces/",{level:this.userLevel},t).subscribe(t=>{for(let s=0;s<8;s++)e.push("data:image/png;base64,"+t.images[s]),sessionStorage.setItem("training"+s,"data:image/png;base64,"+t.images[s])})}return e}))}getWhosNewFaces(){return Object(r.b)(this,void 0,void 0,(function*(){let e=[];const t={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};return yield this.http.put("https://crossfacerecognition.herokuapp.com/getWhosNewFaces/",{level:this.userLevel},t).subscribe(t=>{for(let s=0;s<8;s++)e.push("data:image/png;base64,"+t.images[s])}),e}))}getDailyAssessmentFaces(){return Object(r.b)(this,void 0,void 0,(function*(){let e=[],t=!0;for(let s=0;s<8;s++){let i=sessionStorage.getItem("dailyAssessment"+s);if(!i){t=!1;break}e.push(i)}if(!t){e=[];const t={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};yield this.http.put("https://crossfacerecognition.herokuapp.com/getDailyAssessmentFaces/",{},t).subscribe(t=>{for(let s=0;s<8;s++)e.push("data:image/jpg;base64,"+t.images[s]),sessionStorage.setItem("dailyAssessment"+s,"data:image/jpg;base64,"+t.images[s])})}return e}))}getPrePostAssessmentFaces(){return Object(r.b)(this,void 0,void 0,(function*(){let e=[];const t={headers:new F.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})};return yield this.http.put("https://crossfacerecognition.herokuapp.com/getPrePostAssessmentFaces/",{},t).subscribe(t=>{for(let s=0;s<30;s++)e.push("data:image/jpg;base64,"+t.images[s])}),e}))}finished(e,t){this.scores[t]=Math.max(e[0],this.scores[t]),0!=e[1]&&(this.task=1==e[1]?Ks.LEARNING:null,4!=t&&5!=t||this.iterateStage()),this.submitScores.submitTaskScores(this.userLevel,this.scores)}finishPrePost(e){0==this.userLevel?this.submitScores.submitPreAssessment(e[0]):9==this.userLevel&&this.submitScores.submitPostAssessment(e[0]),this.finishLevel()}taskExitAlert(){return Object(r.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Quit",message:"Do you want to quit? Your progress on this task will be lost.",buttons:[{text:"Cancel"},{text:"Quit",handler:()=>{Object(a.a)(500).subscribe(()=>{this.task=null})}}]});yield e.present()}))}startAssessmentAlert(){return Object(r.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Assessment",message:"Do you want to move on to the assessment? You will not be able to come back to training today.",buttons:[{text:"Cancel"},{text:"Go",handler:()=>{Object(a.a)(500).subscribe(()=>{this.iterateStage()})}}]});yield e.present()}))}clickStart(){0==this.userLevel?(this.task=Ks.PRETEST,Object(a.a)(500).subscribe(()=>{this.getHelp(!0)})):9==this.userLevel?this.task=Ks.POSTTEST:this.userLevel>0&&this.userLevel<9&&(this.task=Ks.LEARNING,this.renderLevelOneHelp())}finishLevel(){this.stage=Ms.DONE;let e=this.task;this.task=null,e!=Ks.POSTTEST?(this.progress=0,Object(a.a)(1200).subscribe(()=>Object(r.b)(this,void 0,void 0,(function*(){this.userLevel++;let e=Object(C.h)().addElement(document.querySelector(".level")).fill("none").duration(500).keyframes([{offset:0,transform:"scale(1, 1)"},{offset:.5,transform:"scale(2, 2)"},{offset:1,transform:"scale(1, 1)"}]);yield e.play()}))),Object(l.a)(100).pipe(w(Object(a.a)(1100))).subscribe(()=>{this.progress+=.1})):this.userLevel++}trainingNotDone(){return this.scores[Ks.NAME_FACE]<this.taskLengths[Ks.NAME_FACE]*this.minTrainScore||this.scores[Ks.WHOS_NEW]<this.taskLengths[Ks.WHOS_NEW]*this.minTrainScore||this.scores[Ks.MEMORY]<this.taskLengths[Ks.MEMORY]*this.minTrainScore||this.scores[Ks.SHUFFLE]<this.taskLengths[Ks.SHUFFLE]*this.minTrainScore}scheduleNotification(){let e=new Date;e.setMinutes(0),e.setSeconds(0),e.setHours(8),e.setDate(e.getDate()+1),this.localNotifications.schedule({id:1,text:"You're next training is now available!",foreground:!0,trigger:{at:e}})}}return e.\u0275fac=function(t){return new(t||e)(h.Ub(i.a),h.Ub(i.I),h.Ub(i.w),h.Ub(T.a),h.Ub(W),h.Ub(i.P),h.Ub(R.a),h.Ub(F.a))},e.\u0275cmp=h.Ob({type:e,selectors:[["app-training"]],decls:46,vars:17,consts:[[2,"--background","gray","height","100%"],[3,"ngClass"],["slot","start",4,"ngIf"],["slot","start","color","medium","name","arrow-back","style","margin-left: 1vw; height: 3vh",3,"click",4,"ngIf"],["slot","end","color","medium","name","help-circle","style","margin-right: 1vw; height: 3vh",3,"click",4,"ngIf"],["style","height: 90%; display: flex; justify-content: center; align-items: center",4,"ngIf"],["style","color: white; text-align: center",4,"ngIf"],[3,"setNames","facePaths","finished",4,"ngIf"],[3,"facePaths","newFacePaths","finished",4,"ngIf"],[3,"facePaths","finished",4,"ngIf"],[2,"text-align","center"],[3,"click"],["slot","start"],["autoHide","false"],["slot","start","color","medium","name","arrow-back",2,"margin-left","1vw","height","3vh",3,"click"],["slot","end","color","medium","name","help-circle",2,"margin-right","1vw","height","3vh",3,"click"],[2,"height","90%","display","flex","justify-content","center","align-items","center"],["name","crescent","color","light"],[2,"color","white","text-align","center"],["style","margin-top: 50%",4,"ngIf"],["style","margin-top: 20px",4,"ngIf"],["style","margin-top: 40%",4,"ngIf"],[2,"margin-top","50%"],[4,"ngIf"],["color","success",3,"click"],[1,"header",2,"margin","5%"],[1,"subheader",2,"margin","5%"],[1,"header"],[2,"margin-top","20px"],[2,"font-size","6vw"],["button","",3,"ngClass","click"],["slot","start","name","happy",2,"font-size","300%"],["slot","start","name","person-add",2,"font-size","300%"],["slot","start","name","grid",2,"font-size","300%"],["slot","start","name","swap",2,"font-size","300%"],[2,"padding","0","margin","1%",3,"click"],[3,"src"],[2,"padding","0","margin","1%",3,"disabled","click"],["slot","start","name","checkmark-circle",2,"font-size","300%"],["slot","start","name","contacts",2,"font-size","300%"],[2,"margin-top","40%"],["style","display: flex; flex-direction: column; justify-content: center; align-items: center",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[2,"width","80%",3,"value"],[2,"margin-top","5%","font-size","4vh"],[1,"level"],["color","success","routerLink","/dashboard","routerDirection","forward"],[3,"setNames","facePaths","finished"],[3,"facePaths","newFacePaths","finished"],[3,"facePaths","finished"]],template:function(e,t){1&e&&(h.Xb(0,"ion-content",0),h.Xb(1,"ion-header"),h.Xb(2,"ion-toolbar",1),h.Xb(3,"ion-title"),h.wc(4),h.Wb(),h.vc(5,Qt,2,0,"ion-buttons",2),h.vc(6,$t,1,0,"ion-icon",3),h.vc(7,es,1,0,"ion-icon",4),h.Wb(),h.Wb(),h.vc(8,ts,2,0,"div",5),h.vc(9,Is,5,4,"div",6),h.vc(10,ws,1,2,"app-learning-task",7),h.vc(11,ys,1,2,"app-name-face",7),h.vc(12,Es,1,2,"app-whos-new",8),h.vc(13,Cs,1,1,"app-memory-match",9),h.vc(14,Ts,1,1,"app-shuffle",9),h.vc(15,Fs,1,1,"app-forced-choice",9),h.vc(16,Ws,1,1,"app-same-different",9),h.vc(17,Rs,1,1,"app-same-different",9),h.wc(18," For development only "),h.Xb(19,"div",10),h.Vb(20,"br"),h.Vb(21,"br"),h.Vb(22,"br"),h.Vb(23,"br"),h.Vb(24,"br"),h.Vb(25,"br"),h.Vb(26,"br"),h.Vb(27,"br"),h.Vb(28,"br"),h.Vb(29,"br"),h.Vb(30,"br"),h.Vb(31,"br"),h.Xb(32,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.LEARNING})),h.wc(33,"Learning"),h.Wb(),h.Xb(34,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.NAME_FACE})),h.wc(35,"Name and Face"),h.Wb(),h.Xb(36,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.WHOS_NEW})),h.wc(37,"Who's New"),h.Wb(),h.Xb(38,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.MEMORY})),h.wc(39,"Memory"),h.Wb(),h.Xb(40,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.SHUFFLE})),h.wc(41,"Shuffle"),h.Wb(),h.Xb(42,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.FORCED_CHOICE})),h.wc(43,"Forced Choice"),h.Wb(),h.Xb(44,"ion-button",11),h.fc("click",(function(){return t.task=t.Task.SAME_DIFFERENT})),h.wc(45,"Same Different"),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.Kb(2),h.kc("ngClass",h.nc(15,js,null==t.task)),h.Kb(2),h.xc(t.getTitle()),h.Kb(1),h.kc("ngIf",null==t.task),h.Kb(1),h.kc("ngIf",null!=t.task&&t.task!=t.Task.FORCED_CHOICE&&t.task!=t.Task.SAME_DIFFERENT&&t.task!=t.Task.PRETEST&&t.task!=t.Task.POSTTEST),h.Kb(1),h.kc("ngIf",t.userLevel<=9),h.Kb(1),h.kc("ngIf",null==t.stage),h.Kb(1),h.kc("ngIf",null==t.task),h.Kb(1),h.kc("ngIf",t.task==t.Task.LEARNING),h.Kb(1),h.kc("ngIf",t.task==t.Task.NAME_FACE),h.Kb(1),h.kc("ngIf",t.task==t.Task.WHOS_NEW),h.Kb(1),h.kc("ngIf",t.task==t.Task.MEMORY),h.Kb(1),h.kc("ngIf",t.task==t.Task.SHUFFLE),h.Kb(1),h.kc("ngIf",t.task==t.Task.FORCED_CHOICE),h.Kb(1),h.kc("ngIf",t.task==t.Task.SAME_DIFFERENT),h.Kb(1),h.kc("ngIf",t.task==t.Task.PRETEST||t.task==t.Task.POSTTEST))},directives:[i.j,i.l,i.F,c.h,i.D,c.j,i.e,i.f,i.s,i.m,i.C,i.g,i.u,i.M,n.h,A,te,ge,De,dt,Wt,Jt],styles:[".task-done[_ngcontent-%COMP%]{--background:#8ecf8e!important;color:#000}.task-failed[_ngcontent-%COMP%]{--background:#c98b8b!important;color:#000}.blue-border[_ngcontent-%COMP%]{border-bottom:solid #1e90ff}.fade-in[_ngcontent-%COMP%], .level[_ngcontent-%COMP%]{display:inline-block}.fade-in[_ngcontent-%COMP%]{opacity:0}ion-card[_ngcontent-%COMP%]{--background:#dcdcdc;color:#1e90ff;border-radius:6vh;margin-top:5vh;margin-bottom:5vh;padding-top:1vh;padding-bottom:1vh;font-size:2.2vh;height:11vh}ion-button[_ngcontent-%COMP%]{text-transform:none!important;height:8vh;font-size:3vh}"],data:{animation:[Object(j.k)("fadeIn",[Object(j.j)(":enter",[Object(j.e)(2800,Object(j.f)([Object(j.i)({offset:0,opacity:"0"}),Object(j.i)({offset:.7,opacity:"0"}),Object(j.i)({offset:1,opacity:"1"})]))])])]}}),e})(),Ps=(()=>{class e{}return e.\u0275mod=h.Sb({type:e}),e.\u0275inj=h.Rb({factory:function(t){return new(t||e)},providers:[R.a],imports:[[i.G,c.b,o.d,o.i,n.i.forChild([{path:"",component:As}])]]}),e})()}}]);